!function(a){$.extend(a,{ajax:function(b,c,d,e,f){var g=d||function(){},h=e||function(){},i=f||!0,j=""===b?"/apps/telstraEveServlet":b;return $(".error-banner.rest-error").remove(),$.ajax({url:j,type:"POST",data:c,dataType:"json",timeout:12e4,success:function(b){setTimeout(function(){g(b)},a.DEVDELAY)},error:function(b,c,d){setTimeout(function(){i&&$(".error-banner.rest-error").removeClass("hidden"),h(b,c,d)},a.DEVDELAY)}})}})}(BELONG),function(a){$.extend(a,{ajaxSetup:function(){$.ajaxSetup({timeout:12e4,dataType:"json",cache:!1})}})}(BELONG),function(a){var b=a||{};b.datepickerSetup=function(){$.extend($.fn.pickadate.defaults,{weekdaysShort:["S","M","T","W","T","F","S"],closeOnClear:!1,format:"dddd, dd mmmm, yyyy",formatSubmit:"yyyy-mm-dd"})}}(BELONG),BELONG.DISPLAY_TEXT={plan:{Unlimited:"Unlimited Data",ExtraLarge:"1000GB",Large:"500GB",Regular:"100GB"},contract:{TWENTY_FOUR_MONTHS:"24 Month",TWELVE_MONTHS:"12 Month",MONTH_BY_MONTH:"Month by Month"},planSpeed:{"100/40":"100/40","25/5":"25/5","12/1":"12/1"},voicePlan:{BOTH:"Belong Voice National and International",NATIONAL:"Belong Voice National",INTERNATIONAL:"Belong Voice International"}},function(a){var b={},c={},d=new a.nativeTemplateEngine;a.templateSources.stringTemplate=function(a){this.templateName=a},a.utils.extend(a.templateSources.stringTemplate.prototype,{data:function(a,b){return c[this.templateName]=c[this.templateName]||{},1===arguments.length?c[this.templateName][a]:void(c[this.templateName][a]=b)},text:function(a){if(0===arguments.length){var c=b[this.templateName];if("undefined"==typeof c)throw Error("Template not found: "+this.templateName);return c}b[this.templateName]=a}}),d.makeTemplateSource=function(b,c){var d;return"string"==typeof b?(d=(c||document).getElementById(b),d?new a.templateSources.domElement(d):new a.templateSources.stringTemplate(b)):b&&1==b.nodeType||8==b.nodeType?new a.templateSources.anonymousTemplate(b):void 0},a.templates=b,a.setTemplateEngine(d)}(window.ko),function(a){"use strict";var b=a||{};b.util=b.util||{},b.util.formatter={},b.util.formatter.toCurrency=function(a,b,c,d,e){var f=isNaN(b)?2:Math.abs(b),g=c||".",h="undefined"==typeof d?",":d,i=a<0?"-":"",j=parseInt(a=Math.abs(a).toFixed(f),10)+"",k=j.length,l=e||"";return k=k>3?k%3:0,i+l+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(a-j).toFixed(f).slice(2):"")},b.util.formatter.dateString=function(a,b){var c="",d=void 0===b?"Do MMMM YYYY":b;return a&&(c=moment(a).format(d)),c}}(BELONG),function(a){"use strict";var b=a||{};b.util=b.util||{},b.util.helpers=function(){$(".lt-ie10").length&&$("textarea[maxlength]").each(function(){var a=$(this),b=parseInt(a.attr("maxlength"),10);isNaN(b)===!1&&a.on("keyup.textareaMaxlength blur.textareaMaxlength",function(){var a=$(this).val();a.length>b&&$(this).val(a.substr(0,b))})}),b.util.detectIE()&&$("html").removeClass("supports-cssanimations"),Modernizr.input.placeholder||$("input, textarea").placeholder(),$.fn.noScrollFocus=function(){var a=window.scrollX,b=window.scrollY;return this.focus(),0===$(".lt-ie10").length&&window.scrollTo(a,b),this},$.fn.isValid=function(){var a=!0;return this.each(function(){this.checkValidity()===!1&&(a=!1)}),a}}}(BELONG),function(a){"use strict";var b=a||{};b.util=b.util||{},b.util.scrollPageTo=function(a,b,c,d){var e,f,g,h,i=c,j=!1,k="string"==typeof b?b.substring(b.indexOf("#")+1):null;null===i&&(e=$(document).scrollTop(),f=Math.abs(a-e),g=2e3,h=1e3,i=f>g?h:a>e?(1-e/a)*h:(1-a/e)*h),$("html").velocity("stop").velocity("scroll",{offset:a,duration:i,complete:function(){j||(j=!0,"string"==typeof k&&(window.History&&window.History.pushState?window.History.pushState(null,null,"#"+k):window.location.hash=k),"function"==typeof d&&d())}})},b.util.scrollPage=function(){$("body").off("click.scrollto").on("click.scrollto",".scrollto, .scrollup, .scrolldown",function(a){var c=$(this),d=c.attr("href").substr(d.indexOf("#")+1),e=parseInt(c.attr("data-scroll-offset"),10)||0,f="true"===c.attr("data-scroll-tabto"),g="false"===c.attr("data-scroll-hash"),h=$("#"+d),i=g?d:null;0===h.length&&(h=$('a[name="'+d+'"]')),0!==h.length&&(a.preventDefault(),f?b.util.scrollPageTo(h.offset().top+e,i,null,function(){h.eq(0).noScrollFocus()}):b.util.scrollPageTo(h.offset().top+e,i))})},b.util.scrollToAnchor=function(a){var b=$(this);return a.preventDefault(),0!==b.attr("href").indexOf("#")||void $(b.attr("href")).velocity("scroll",{duration:400,offset:-60})},b.util.lockScroll=function(a){var b=$(document).scrollTop();a?($("body").data("scrolltop",b),$("html,body").addClass("locked"),$("html,body").css("overflow","hidden"),$("html,body").height("100%")):($("html,body").removeClass("locked"),$("html,body").css("overflow","auto"),$("html,body").height("auto"),setTimeout(function(){$(window).scrollTop($("body").data("scrolltop"))},0))}}(BELONG),function(a){"use strict";$.extend(a.util,function(){var b={Android:function(){return navigator.userAgent.match(/Android/i)},AndroidChrome:function(){return window.chrome&&navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){var a=b.Android()||b.BlackBerry()||b.iOS()||b.Opera()||b.Windows();return null!==a},touch:function(){return"ontouchstart"in window||"onmsgesturechange"in window}},c=function(){var a,b,c,d=window.navigator.userAgent,e=d.indexOf("MSIE ");return e>0?parseInt(d.substring(e+5,d.indexOf(".",e)),10):(a=d.indexOf("Trident/"),a>0?(b=d.indexOf("rv:"),parseInt(d.substring(b+3,d.indexOf(".",b)),10)):(c=d.indexOf("Edge/"),c>0&&parseInt(d.substring(c+5,d.indexOf(".",c)),10)))},d=function(){$(".fn_print").on("click.print",function(a){a.preventDefault(),window.print()})},e=function(a){var b=!isNaN(a-0)&&null!==a&&""!==a&&a!==!1;return b},f=function(a){var b=unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(a).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return b.replace(/["']/g,"")},g=function(a,b,c){for(var d="undefined"==typeof c?"":c,e=0,f=b.length;e<f;e++)if("object"==typeof b[e]&&b[e].name===a)return b[e].value;return d},h=function(a,b){var c,d={success:!1,value:""};return"undefined"==typeof a.messages||0===a.messages.length||(c=a.messages[0],"undefined"==typeof c[b]||(d.success=!0,d.value=c[b])),d},i=function(a,b,c){var d=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")};return a.replace(new RegExp(d(b),"g"),c)},j=function(b,c,d){var e=b.text();b.text(a.util.replaceAll(e,d,c))},k=function(b,c){$.each(c,function(){b(a.util.replaceAll(b(),this.placeholder,this.replacement))})},l=function(b,c,d){var e=b.html();b.html(a.util.replaceAll(e,d,c))},m=function(a){var b=a.replace(/[\[\]]/g,"\\$&"),c=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)","i"),d=window.location.href,e=c.exec(d);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},n=function(b,c){var d=b;return $.each(c,function(){d=a.util.replaceAll(d,this.placeholder,this.replacement)}),d},o=function(a,b,c,d){var e=c||"slow";$("html, body").animate({scrollTop:a},e,function(){"string"==typeof b&&(window.location.hash=b),"function"==typeof d&&d()})};return function(){b.Android()?$("html").addClass("d-android"):b.BlackBerry()?$("html").addClass("d-blackberry"):b.iOS()?$("html").addClass("d-ios"):b.Opera()?$("html").addClass("d-opera"):b.Windows()?$("html").addClass("d-windows"):$("html").addClass("d-other"),b.any()&&$("html").addClass("d-any"),b.touch()&&$("html").addClass("d-touch")}(),{isDevice:b,detectIE:c,print:d,isNumber:e,loadPageVar:f,getCMSMessage:g,getApiResponseMessage:h,replaceAll:i,replacePlaceholderCopy:j,koReplacePlaceholderCopy:k,stringReplacePlaceholderCopy:n,getUrlParameterByName:m,replacePlaceholderCopyHtml:l,scrollPageTo:o}}())}(BELONG),function(a){a.accordian=function(){var a=$(".accordian-container"),b=$(".accordian-container .expand-btn");b.on("click",function(b){b.preventDefault();var c=$(this),d=c.closest("li");d.hasClass("active")?a.find("li").removeClass("active").removeClass("inactive"):d.hasClass("inactive")?(a.find("li").removeClass("active").addClass("inactive"),d.removeClass("inactive").addClass("active")):(a.find("li").addClass("inactive"),d.removeClass("inactive").addClass("active")),$("html").hasClass("lt-ie9")&&(d.redraw(),a.find("li").redraw())})}}(BELONG),function(a){a.advancedAccordion=function(){var b,c=$(".accordion-title"),d=$(".accordion-content"),e=($(".faq-accordian-header span"),$("#header").data("page-sub-type")),f=$(".accordion-container").data("default-category"),g=function(a){if(a){var b=$(a);$("html, body").animate({scrollTop:$(b).offset().top-90},400).promise().then(function(){})}},h=function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},i=function(){var a=h("section");a||(a=f);var b="#"+a;anchorTag=window.location.hash,g(anchorTag?anchorTag:b);var c=$(b).closest(".accordion-title");c.length&&c.closest(".accordion-item").hasClass("is-inactive")&&c.click()},j=function(a){$('.accordion-container .section-category[data-category="'+a+'"]').show(0,"",function(){setTimeout(function(){i()},400)})},k=function(a){$('.accordion-container .section-category[data-category="'+a+'"]').siblings().hide(),j(a)};$(d).find("a").on("click",function(a){var b=$(this).attr("href"),c=h("section",b),d=h("section");if(d||(d=f),d==c){a.preventDefault();var e=b.substring(b.indexOf("#"));e&&(g(e),window.location.hash=e)}}),$(c).on("click",function(c){c.preventDefault(),$(this).closest(".accordion-item").hasClass("is-active")?($(this).next(d).velocity("slideUp",{delay:20,duration:400},{easing:"easeInSine"}),$(this).closest(".accordion-item").removeClass("is-active").addClass("is-inactive")):($(this).find(".accordion-item").siblings().find(".accordion-content").velocity("slideUp",{delay:20,duration:400}),$(this).next(d).velocity("slideDown",{delay:20,duration:400},{easing:"easeInSine"}),$(this).closest(".accordion-item").removeClass("is-inactive").addClass("is-active"),b=$(this).text(),a.analytics.methods.faq.productFaq(b,e),a.adobeAnalytics.pages.product.faq(b,e))});var l=function(){var a=[];$(".accordion-container section").each(function(){var b=$(this).data("category");$.inArray(b,a)===-1&&a.push(b)});for(var b=0;b<a.length;b++){var c=a[b];$('.accordion-container section[data-category="'+c+'"]').wrapAll('<div class="section-category '+c+'" data-category="'+c+'"/>')}};$(function(){l();var a=h("section"),b=$(".accordion-container").data("default-category");$(".accordion-container .section-category").hasClass(a)?k(a):b&&k(b)})}}(BELONG),function(a){"use strict";a.appleSmartBanner=function(){var a,b,c;return{init:function(){a=this,b=!1,c="","undefined"!=typeof appleSmartBannerData&&"undefined"!=typeof appleSmartBannerData.appleiTunesAppID&&"undefined"!=typeof appleSmartBannerData.isActive&&(c=appleSmartBannerData.appleiTunesAppID,b="true"==appleSmartBannerData.isActive.toString().toLowerCase(),a.loadSmartBanner())},loadSmartBanner:function(){1!=b||1!=a.isAccountPage()&&1!=a.isWelcomePage()||0!=a.isAgentOrMoboLoggedIn()||$("head").append('<meta name="apple-itunes-app" content="app-id='+c+'">')},removeSmartBanner:function(){$("head meta[name=apple-itunes-app]").remove()},isAccountPage:function(){var a=window.location.pathname.toLowerCase(),b=a.indexOf("/account");return 0==b||15==b},isWelcomePage:function(){var a=window.location.pathname.toLowerCase(),b=a.indexOf("/welcome");return 0==b||15==b},isAgentOrMoboLoggedIn:function(){var a=$("#GlobalData");if(a.length>0){var b=a.data("isAgent"),c=a.data("isMobo");return"undefined"!=typeof b&&b.toString().length>0&&"true"==b.toString().toLowerCase()||(b=!1,"undefined"!=typeof c&&c.toString().length>0&&"true"==c.toString().toLowerCase()?(c=!0,!0):(c=!1,!1))}}}}()}(BELONG),function(a){"use strict";a.autoPaymentPrompt=function(){var b;return{init:function(){b=this,$(".auto-payment-prompt").each(function(){$("#auto-payment-pay-button").off("click.payButtonClick").on("click.payButtonClick",b.events.payButtonClick),$("#auto-payment-pay-later-button").off("click.payLaterButtonClick").on("click.payLaterButtonClick",b.events.payLaterButtonClick)})},events:{payButtonClick:function(b){b.preventDefault();var c=$("#auto-payment-pay-button").prop("href"),d=$("#auto-payment-pay-button").text();a.adobeAnalytics.pages.payment.payNowRedirect($("#auto-payment-pay-button").text()),a.analytics.methods.autoPaymentPrompt.PayNowRedirect(c,d)},payLaterButtonClick:function(b){b.preventDefault(),$.post("/bin/belong/customer/redirect/remove").done(function(a){location.href="/"}).fail(function(a,b){$(".auto-payment-prompt__error").removeClass("hidden")}),a.adobeAnalytics.pages.payment.payLaterClick()}}}}()}(BELONG),function(a){"use strict";a.expandCollapse=function(){var b,c,d,e,f,g=$(".lt-ie9").length>0;return b={IS_EXPANDED_CLASS:"is-expanded",IS_COLLAPSED_CLASS:"is-collapsed",IS_DISABLED_CLASS:"is-disabled"},c={reset:function(a){a.css({display:"",opacity:""})},initClose:function(a){g?a.hide():a.css({opacity:0},1).hide()},open:function(b,c,d,e){e="boolean"==typeof e&&e,b.is(":visible")||(g||e?(b.show().css({opacity:""}).data("ec-isAnimating",!1),c.trigger("opened.expandcollapse"),"function"==typeof d&&d()):b.css({opacity:0}).hide().velocity("stop").velocity("slideDown",{duration:250,easing:"ease-out",complete:function(){b.velocity({opacity:1},{duration:200,easing:"ease-out",complete:function(){b.data("ec-isAnimating",!1),c.trigger("opened.expandcollapse"),"function"==typeof d&&d()}})}}),setTimeout(function(){var b,c=$("#address-check");0!==c.length&&(b=c.offset().top-60,a.util.scrollPageTo(b))},100))},close:function(a,b,c,d){d="boolean"==typeof d&&d,g||d?(a.hide().data("ec-isAnimating",!1),b.trigger("closed.expandcollapse"),"function"==typeof c&&c()):a.velocity("stop").velocity("scroll",{offset:-300,duration:250}).velocity("slideUp",{duration:500,easing:"ease-out",complete:function(){a.data("ec-isAnimating",!1),b.trigger("closed.expandcollapse"),"function"==typeof c&&c()}})}},d=function(d){var e=d?$(".expandcollapse:not(.js-expandcollapse)",d):$(".expandcollapse:not(.js-expandcollapse)");e.each(function(d,e){var f=$(e).addClass("js-expandcollapse"),g=f.find("a"),h=g.attr("data-ec-expand"),i=g.attr("data-ec-collapse"),j=g.attr("data-ec-group")||!1,k=g.attr("data-eq-scrollat-mq")||!1,l="#"+g.attr("href").replace(/[\w\W]*#([\w\W]+)/g,"$1"),m=$(l),n=!1;if($(".lt-ie8").length>0)return void g.hide();var o={enable:function(){g.attr("aria-controls",l.substring(1)),m.attr({role:"region",tabindex:"-1","aria-expanded":f.hasClass(b.IS_EXPANDED_CLASS)})},disable:function(){g.removeAttr("aria-controls"),m.removeAttr("role").removeAttr("tabindex").removeAttr("aria-expanded")},update:function(){n||m.attr({"aria-expanded":f.hasClass(b.IS_EXPANDED_CLASS)})}};f.data("ec-group",j);var p={toExpand:function(){f.removeClass(b.IS_EXPANDED_CLASS).addClass(b.IS_COLLAPSED_CLASS),g.html(h),o.update()},toCollapse:function(){f.removeClass(b.IS_COLLAPSED_CLASS).addClass(b.IS_EXPANDED_CLASS),g.html(i),o.update()}};if(m.data("init")!==!0&&m.length>0){var q,r,s;m.data("ec-isAnimating",!1),f.hasClass(b.IS_COLLAPSED_CLASS)&&c.initClose(m),q=function(d,e){e="boolean"==typeof e&&e;var g,h;if(g=function(a){return n?(m.data("ec-isAnimating",!1),void p.toCollapse()):void(f.hasClass(b.IS_EXPANDED_CLASS)||(p.toCollapse(),c.open(m,f,a)))},h=function(){k===!1||"string"!=typeof DD.bp.get(k)?(a.util.scrollPageTo(f.offset().top,null,250),g()):DD.bp.is(k)?(a.util.scrollPageTo(f.offset().top,null,250),g()):g()},j){var i=!1;$(".js-expandcollapse."+b.IS_EXPANDED_CLASS).each(function(a,b){$(b).data("ec-group")===j&&(i=!0,$(b).trigger("close.expandcollapse",h))}),i||(e?h():g())}else g()},r=function(a,d){return n?(m.data("ec-isAnimating",!1),p.toExpand(),void("function"==typeof d&&d())):void(f.hasClass(b.IS_COLLAPSED_CLASS)||(p.toExpand(),c.close(m,f,d)))},s=function(a){a.preventDefault(),n||m.data("ec-isAnimating")===!1&&(m.data("ec-isAnimating",!0),f.hasClass(b.IS_EXPANDED_CLASS)?f.trigger("close.expandcollapse"):f.trigger("open.expandcollapse"))},f.on("open.expandcollapse",q).on("close.expandcollapse",r).on("click.expandcollapse",s),f.on("reinit.expandcollapse",function(a){a.stopPropagation(),g=f.find("a");var b="#"+g.attr("href").replace(/[\w\W]*#([\w\W]+)/g,"$1");m=$(b),m.data("ec-isAnimating",!1).data("init",!0),f.off("expandcollapse").on("open.expandcollapse",q).on("close.expandcollapse",r).on("click.expandcollapse",s)}),f.on("attach.mqad",function(a){a.stopPropagation(),n=!1,f.hasClass(b.IS_COLLAPSED_CLASS)&&c.initClose(m),f.removeClass(b.IS_DISABLED_CLASS),o.enable()}),f.on("detach.mqad",function(a){a.stopPropagation(),n=!0,c.reset(m),f.addClass(b.IS_DISABLED_CLASS),o.disable()}),o.enable(),m.data("init",!0)}})},e=function(a){var b=a?$(".expandcollapse",a):$(".expandcollapse");b.trigger("reinit.expandcollapse")},f=function(a,b,c){var d="string"==typeof c,e="boolean"!=typeof b||b;a.find(".expandcollapse").each(function(a,b){var f=$(b);if(f.removeClass("js-expandcollapse"),e?f.removeClass("is-collapsed").addClass("is-expanded"):f.removeClass("is-expanded").addClass("is-collapsed"),d){var g=f.find("a");g.attr("href",g.attr("href")+c);var h=f.next(".ec-content");h.attr("id",h.attr("id")+c),h.data("init",!1)}})},{init:d,update:e,reset:f,CONST:b}}()}(BELONG),function(a){a.faqAccordian=function(){var b,c=$(".faq-accordian-header"),d=$(".faq-accordian-content"),e=$(".faq-accordian-content p"),f=($(".faq-accordian-header span"),$("#header").data("page-sub-type"));c.addClass("is-inactive faq-accordian-icon-plus"),$(c).click(function(){$(this).hasClass("is-active")?(e.hide(),$(this).next(d).velocity("slideUp",{delay:20,duration:200},{easing:"easeInSine"}),$(".faq-accordian-content p").velocity("fadeOut",{delay:200,duration:700}),$(this).removeClass("is-active faq-accordian-icon-minus"),$(this).addClass("is-inactive faq-accordian-icon-plus")):(e.hide(),$(c).not(this).next(d).velocity("slideUp",{delay:20,duration:400}),$(c).not(this).removeClass("is-active faq-accordian-icon-minus"),$(c).not(this).addClass("is-inactive faq-accordian-icon-plus"),$(this).next(d).velocity("slideDown",{delay:20,duration:250},{easing:"easeInSine"}),$(".faq-accordian-content p").velocity("fadeIn",{delay:210,duration:700}),$(this).addClass("is-active faq-accordian-icon-minus"),$(this).removeClass("is-inactive faq-accordian-icon-plus"),b=$(this).find(".faq-accordian-heading").text(),a.analytics.methods.faq.productFaq(b,f),a.adobeAnalytics.pages.product.faq(b,f))})}}(BELONG),function(a){"use strict";a.flexslider=function(){$(".flexslider").each(function(){var b=$(this);b.find(".slide-inner img").each(function(){$(this).data("link-flag")&&($(this).parent().wrap('<a href="'+$(this).data("href")+'">'),$(this).parent().closest("a").off("click.scrollToAnchor").on("click.scrollToAnchor",a.util.scrollToAnchor))})}),$(".js-flexslider").each(function(){var a=$(this),b=$(".slides > .slide").length,c=!1,d=!0;a.data("autoScroll")&&(c=!0),1===b&&(d=!1,c=!1),a.data("bannerGradient")&&a.find(".banner-gradient").removeClass("hidden"),a.flexslider({NAMESPACE:"flex-",selector:".slides > .slide",animation:"slide",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:d,smoothHeight:!0,startAt:0,slideshow:c,slideshowSpeed:a.data("scrollSpeed"),animationSpeed:500,initDelay:a.data("scrollSpeed"),randomize:!1,pauseOnAction:!0,pauseOnHover:!0,useCSS:!0,touch:d,video:!1,controlNav:!0,directionNav:d,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){a.removeClass("loading")},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}})})}}(BELONG),function(a){"use strict";a.forms=a.forms||{},a.forms.setInputValue=function(a,b){var c;c="string"==typeof a?$(a):a,c.val(b),c.trigger("change")},a.forms.applyShiftLabelHandler=function(a){$(a).closest(".ctrl-holder").addClass("shift-label").addClass("shift-focussed")},a.forms.unShiftLabelHandler=function(a){var b=$(a);""===a.value&&b.closest(".ctrl-holder").removeClass("shift-label"),b.closest(".ctrl-holder").removeClass("shift-focussed")},a.forms.applyShiftLabel=function(){var b=$(".ctrl-holder").not(".disable-shift-label").find('input[type="text"], input[type="password"], input[type="email"], input[type="tel"], textarea');b.on("focus.applyShiftLabel",function(){a.forms.applyShiftLabelHandler(this)}).on("blur.applyShiftLabel",function(){a.forms.unShiftLabelHandler(this)}).on("change.applyShiftLabel",function(){a.forms.applyShiftLabelHandler(this),a.forms.unShiftLabelHandler(this)}),a.forms.initShiftLabel(b)},a.forms.initShiftLabel=function(a){var b=$("select");a.each(function(){var a=$(this);""!==this.value?a.closest(".ctrl-holder").addClass("shift-label"):a.closest(".ctrl-holder").removeClass("shift-label")}),b.on("change",function(){var a=$(this),b=$(this).find("option:selected").text();""!==b?a.closest(".ctrl-holder").addClass("shift-label"):a.closest(".ctrl-holder").removeClass("shift-label")}).change()},a.forms.simpleSelect=function(){$.simpleSelect&&0===$(".lt-ie7").length&&$("select").simpleSelect()},a.forms.styledRadio=function(){var b=$(".styled-radio");b.each(function(){var b=this;b.items=$(b).find("li"),b.items.on("click",function(){var c=$(this).find("input");b.items.removeClass("selected"),$(this).addClass("selected"),c.trigger("change");var c=$(this).find("input"),d="contract",e="non-contract";return c.val()!=e?(a.product.set.planSwitchOn(),!1):c.val()!=d?(a.product.set.planSwitchOff(),!1):void 0})})},a.forms.anchorButtons=function(){$('a[role="button"]').on("keyup",function(a){32===a.which&&this.click()})},a.forms.applyAutoGrowTextarea=function(){var b=$(".f-textarea").not(".disable-autogrow").find("textarea");b.on("keyup.autogrowtextarea",function(){a.forms.calculateAutoGrowTextArea($(this))}),a.forms.initAutoGrowTextarea(b)},a.forms.calculateAutoGrowTextArea=function(a){a.each(function(){var a=$(this).val(),b=$(this).closest(".f-textarea").find(".autogrowtextarea");a=a.replace(/\n/g,"<br>"),b.html(a+"<br>"),$(this).css("height",b.outerHeight()+1)})},a.forms.initAutoGrowTextarea=function(a){a.each(function(){var a=$(this);0===a.closest(".f-textarea").find(".autogrowtextarea").length&&a.closest(".f-textarea").append('<div class="autogrowtextarea '+a.attr("id")+'"></div>')})}}(BELONG),function(a){a.generalAccordian=function(){var a,b=$(".general-accordian-header"),c=$(".general-accordian-content"),d=$(".faq-accordian-content p");$(".general-accordian-header span");b.addClass("is-inactive faq-accordian-icon-plus"),$(b).click(function(){$(this).hasClass("is-active")?(d.hide(),$(this).next(c).velocity("slideUp",{delay:20,duration:200},{easing:"easeInSine"}),+$(".general-accordian-content p").velocity("fadeOut",{delay:200,duration:700}),$(this).removeClass("is-active faq-accordian-icon-minus"),$(this).addClass("is-inactive faq-accordian-icon-plus")):(d.hide(),$(b).not(this).next(c).velocity("slideUp",{delay:20,duration:400}),$(b).not(this).removeClass("is-active faq-accordian-icon-minus"),$(b).not(this).addClass("is-inactive faq-accordian-icon-plus"),$(this).next(c).velocity("slideDown",{delay:20,duration:250},{easing:"easeInSine"}),$(".general-accordian-content p").velocity("fadeIn",{delay:210,duration:700}),$(this).addClass("is-active faq-accordian-icon-minus"),$(this).removeClass("is-inactive faq-accordian-icon-plus"),a=$(this).find(".faq-accordian-heading").text())})}}(BELONG),function(a){"use strict";a.iconCarousel=function(){$(".icon-carousel").each(function(){var b,c,d,e,f,g,h=$(this);c=function(){return b=h.find(".slide").length,a.IS_RESPONSIVE?window.matchMedia(DD.bp.get("l")).matches?b:window.matchMedia(DD.bp.get("xs")).matches?2:1:b},d=function(){return c()},e=function(){return h.width()/c()},f={NAMESPACE:"flex--",minItems:d(),maxItems:d(),itemWidth:e(),animationLoop:!1,animation:"slide",selector:".slides > .slide",start:function(b){a.storedSlider=b,h.resize()}},h.flexslider(f),g=function(){var b=d(),c=e();a.storedSlider&&(a.storedSlider.vars.minItems=b,a.storedSlider.vars.maxItems=b,a.storedSlider.vars.itemWidth=c,a.storedSlider.slides.length<=b?h.find(".flex-direction-nav").addClass("hidden"):h.find(".flex-direction-nav").removeClass("hidden"))},$(window).on("resize.iconCarousel",$.debounce(100,g))})}}(BELONG),function(a){"use strict";a.infiniteCycle=function(){return{create:function(b,c,d){var e=d||0,f=b.find(".cycle-item").length;c=c||6e3,b.find(".cycle-item").eq(e).removeClass("hidden"),b.removeClass("hidden"),a.INFINITELOOP=setInterval(function(){b.find(".cycle-item").eq(e).addClass("hidden"),e===f-1?e=0:e++,b.find(".cycle-item").eq(e).removeClass("hidden"),a.belongModal.setHeights({modalContainer:$("#mdl-sq"),noShadow:!0})},c)},destroy:function(b){clearInterval(a.INFINITELOOP),b.addClass("hidden"),b.find(".cycle-item").addClass("hidden")}}}()}(BELONG),function(a){"use strict";a.livePerson=function(){var b,c,d="",e=!1;return{init:function(){b=this,b.loadLivePersonMonitorCode();b.loadPageSections();c=$("#header").data("pageType"),c="undefined"!=typeof c&&null!=c?c.toLowerCase():"",b.lpDebugOut("pageDefinitionType="+c),b.testCurrentPage()},loadLivePersonMonitorCode:function(){switch(livePersonSettingsData.isDisabled){case"true":e=!0,b.lpDebugOut("livePersonSettingsData.isDisabled: TRUE");break;default:b.lpDebugOut("livePersonSettingsData.isDisabled: FALSE")}switch(window.location.host){case"www.belong.com.au":case"belong.com.au":b.lpDebugOut("prod: "+window.location.host),d="83898727";break;case"preprod.belong.com.au":b.lpDebugOut("pre-prod: "+window.location.host),d="64328663";break;default:b.lpDebugOut("test: "+window.location.host),d="64328663"}0==b.IsAgentLoggedIn()?b.lpDebugOut("Connecting to LP. Site code: "+d):(b.lpDebugOut("Agent logged in. Not loading LP."),e=!0),0==e?(b.lpDebugOut("Loading LivePerson."),window.lpTag=window.lpTag||{},"undefined"==typeof window.lpTag._tagCount?(window.lpTag={site:d,section:lpTag.section||"",autoStart:lpTag.autoStart!==!1,ovr:lpTag.ovr||{},_v:"1.5.1",_tagCount:1,protocol:location.protocol,events:{bind:function(a,b,c){lpTag.defer(function(){lpTag.events.bind(a,b,c)},0)},trigger:function(a,b,c){lpTag.defer(function(){lpTag.events.trigger(a,b,c)},1)}},defer:function(a,b){0==b?(this._defB=this._defB||[],this._defB.push(a)):1==b?(this._defT=this._defT||[],this._defT.push(a)):(this._defL=this._defL||[],this._defL.push(a))},load:function(a,b,c){var d=this;setTimeout(function(){d._load(a,b,c)},0)},_load:function(a,b,c){var d=a;a||(d=this.protocol+"//"+(this.ovr&&this.ovr.domain?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site);var e=document.createElement("script");e.setAttribute("charset",b?b:"UTF-8"),c&&e.setAttribute("id",c),e.setAttribute("src",d),document.getElementsByTagName("head").item(0).appendChild(e)},init:function(){this._timing=this._timing||{},this._timing.start=(new Date).getTime();var a=this;window.attachEvent?window.attachEvent("onload",function(){a._domReady("domReady")}):(window.addEventListener("DOMContentLoaded",function(){a._domReady("contReady")},!1),window.addEventListener("load",function(){a._domReady("domReady")},!1)),"undefined"==typeof window._lptStop&&this.load()},start:function(){this.autoStart=!0},_domReady:function(a){this.isDom||(this.isDom=!0,this.events.trigger("LPT","DOM_READY",{t:a})),this._timing[a]=(new Date).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]},lpTag.init()):window.lpTag._tagCount+=1,lpTag.sdes=lpTag.sdes||[]):(b.lpDebugOut("LivePerson disabled."),window.lpTag=window.lpTag||{},lpTag.sdes=lpTag.sdes||[])},IsAgentLoggedIn:function(){var a=document.getElementById("GlobalData");return null!=a?"true"==a.getAttribute("data-is-agent")?(b.lpDebugOut("Agent logged in."),!0):(b.lpDebugOut("Not an agent."),!1):(b.lpDebugOut("Missing GlobalData"),!1)},isSessionExclusionSet:function(){var a=sessionStorage.getItem("le20ExcludeSession");return!!a},setSessionExclusionOn:function(){sessionStorage.setItem("le20ExcludeSession","true")},loadPageSections:function(){var a=!1,c=[],d=!1;if(lpSection=lpSection.trim(),""!=lpSection){c=lpSection.split(",");for(var e=0;e<c.length;e++)c[e]=c[e].trim(),""==c[e]&&c.splice(e,1),"no-session-chat"==c[e].toLowerCase()&&(d=!0)}return 1==d?b.setSessionExclusionOn():b.isSessionExclusionSet()&&(c=[],c.push("no-session-chat")),b.setSectionFromArray(c),c.length>0?(b.lpDebugOut("loadPageSections(): Sections loaded ["+c.toString()+"]"),a=!0):(b.lpDebugOut("loadPageSections(): No Section loaded"),a=!1),a},testCurrentPage:function(){1==b.isJoinPage()&&b.join.pageEntry()},isJoinPage:function(){return"join"==c},lpDebugOut:function(a){},setSection:function(a,c,d,f){if(1!=e&&"undefined"!=typeof lpTag){var g=[a,c];"undefined"!=typeof d&&g.push(d),"undefined"!=typeof f&&g.push(f),lpTag.section=g,b.lpDebugOut("setSection(): lpTag.section = "+JSON.stringify(lpTag.section))}},setSectionFromArray:function(a){1!=e&&"undefined"!=typeof lpTag&&(lpTag.section=a,b.lpDebugOut("setSectionFromArray(): lpTag.section = "+JSON.stringify(lpTag.section)))},updateSdesArray:function(a,c){if(1!=e)if("undefined"==typeof c||null===c||0==c)lpTag.sdes.push(a),b.lpDebugOut("updateSdesArray(PUSH): dataObject="+JSON.stringify(a));else try{lpTag.sdes.send(a),b.lpDebugOut("updateSdesArray(SEND OK): dataObject="+JSON.stringify(a))}catch(c){lpTag.sdes.push(a),b.lpDebugOut("updateSdesArray(SEND FAIL): ex="+JSON.stringify(c)+", dataObject="+JSON.stringify(a))}},sq:{startSQ:function(){},completeSQ:function(){b.lpDebugOut("SQ.completeSQ()")},invalidPhoneError:function(){b.lpDebugOut("SQ.invalidPhoneError()");var a={type:"error",error:{message:"Phone number does not match address in SQ.",code:"sq-invalid-phone-error"}};b.updateSdesArray(a,!0)},addressNotFound:function(){b.lpDebugOut("SQ.addressNotFound()");var a={type:"error",error:{message:"Address not found in SQ",code:"sq-address-not-found"}};b.updateSdesArray(a,!0)},cannotBelongError:function(){b.lpDebugOut("SQ.cannotBelongError()");var a={type:"error",error:{message:"Service not available at address.",code:"sq-cannot-belong"}};b.updateSdesArray(a,!0)},sqError:function(){b.lpDebugOut("SQ.sqError()");var a={type:"error",error:{message:"Error occurred in SQ.",code:"sq-error"}};b.updateSdesArray(a,!0)}},productPages:{productBuilderContinue:function(a,c,d,e,f,g,h){var i=[];i=b.helpers.getProductArrayFromProductModel(a,c,d,e,f,g);var j={type:"cart",total:h,products:i};b.updateSdesArray(j,!0)}},join:{pageEntry:function(c,d){if("undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null),null==c&&null==d){c=a.util.loadPageVar("planType"),d=a.util.loadPageVar("planSize");var e=sessionStorage.getItem("planType"),f=sessionStorage.getItem("planSize");b.lpDebugOut("join.pageEntry(): planType="+c),b.lpDebugOut("join.pageEntry(): productSize="+d),b.lpDebugOut("join.pageEntry(): sessionPlanType="+e),b.lpDebugOut("join.pageEntry(): sessionPlanSize="+f),c=c||e,d=d||f,null==c&&(c=""),null==d&&(d="")}var g="";if(""!=c&&(g=d.toLowerCase()+"-"+c.toLowerCase()),""!=g){var h={type:"prodView",products:[{product:{name:g,category:""}}]};b.updateSdesArray(h,!0)}},sqContinue:function(a,c){b.lpDebugOut("join.sqContinue('"+a+"','"+c+"')");var d="";if(""!=a&&(d=c.toLowerCase()+"-"+a.toLowerCase()),""!=d){var e={type:"prodView",products:[{product:{name:d,category:""}}]};b.updateSdesArray(e,!0)}},productContinue:function(a){b.lpDebugOut("join.productContinue()");var c=[];c=b.helpers.getProductArrayFromFormModel(a);var d={type:"cart",total:a.total_minimum_cost,products:c};b.updateSdesArray(d,!0)},confirmOrder:function(a,c){
var d;d=b.helpers.getProductArrayFromFormModel(a);var e={type:"purchase",total:a.total_minimum_cost,orderId:c,cart:{products:d}};b.updateSdesArray(e,!0),e={type:"service",service:{status:2}},b.updateSdesArray(e,!0)}},helpers:{getProductArrayFromFormModel:function(a){var b=[],c={product:{name:a.charges_title,category:"Broadband",price:a.monthly_price},quantity:1};b.push(c);var d={product:{name:1==a.withContract?"Contract":"Month",category:"Broadband"},quantity:1};b.push(d);var e={product:{name:"Modem",category:"Modem",price:a.modem_fee},quantity:1};if(b.push(e),1==a.speedboost){var f={product:{name:"Speedbost: "+a.planSpeed,category:"Speedboost"},quantity:1};b.push(f)}if(1==a.voice_national){var g={product:{name:"National Voice",category:"Voice",price:a.voice_national_cost},quantity:1};b.push(g)}if(1==a.voice_international){var h={product:{name:"International Voice",category:"Voice",price:a.voice_international_cost},quantity:1};b.push(h)}return b},getProductArrayFromProductModel:function(a,b,c,d,e,f){var g=[],h={product:{name:a,category:"Broadband",price:b},quantity:1};g.push(h);var i={product:{name:c,category:"Broadband"},quantity:1};if(g.push(i),"undefined"!=typeof d&&""!=d){var j={product:{name:"Speedbost: "+d,category:"Speedboost"},quantity:1};g.push(j)}if("NATIONAL"==e){var k={product:{name:"National Voice",category:"Voice",price:f},quantity:1};g.push(k)}else if("INTERNATIONAL"==e){var l={product:{name:"International Voice",category:"Voice",price:f},quantity:1};g.push(l)}else if("BOTH"==e){var l={product:{name:"National & International Voice",category:"Voice",price:f},quantity:1};g.push(l)}return g}}}}()}(BELONG),function(a){a.messageCycle=function(){var a,b,c,d,e,f,g,h,i,j;return i=function(a){a.each(function(){$(this).removeClass("visuallyhidden"),$(this).attr("data-width",$(this).width()),$(this).addClass("visuallyhidden")})},j=function(a){b.css("max-width",parseInt(a.attr("data-width"))+101+"px")},{init:function(){a=$("ul.cycle"),b=$(".search-btn"),d=b.find("span"),e=a.children().length,g=1e3*parseInt(a.attr("data")),h=1,a.children("li").each(function(){var a=$('<span class="cycle cycleHide"/>');a.text($(this).text()),a.appendTo(b),a.addClass("visuallyhidden")}),c=b.children("span.cycle")},cycle:function(){i(c),j(c.eq(0)),d.addClass("visuallyhidden"),h=1,c.eq(0).removeClass("cycleHide"),c.eq(0).removeClass("visuallyhidden"),f=setInterval(function(){var a=c.eq(h-1),b=c.eq(h);0!==h&&(a.addClass("cycleHide"),b.removeClass("visuallyhidden")),setTimeout(function(){a.addClass("visuallyhidden"),b.removeClass("cycleHide"),j(b),h+=1,h<=e-1?setTimeout(function(){c.not(b).addClass("cycleHide")},200):clearInterval(f)},1e3)},g)},cancel:function(){for(var a=0;a<e;a+=1)c.eq(a).addClass("cycleHide").addClass("visuallyhidden"),d.removeClass("visuallyhidden");clearInterval(f)}}}()}(BELONG),function(a){a.responseMessage=function(){return{getValidationMessage:function(a,b,c){var d=$("#"+a+"-response-messages .fed_val-"+b+"-"+c),e="";return e=d.length>0?d.html():""},getApiMessage:function(a,b,c){var d="",e=$("#global-response-messages .api_msg-"+b+"-"+c);e.length>0&&(d=e.html());var f=$("#"+a+"-response-messages .api_msg-"+b+"-"+c);return f.length>0&&(d=f.html()),d},getJSONMessage:function(a,b){var c=API_MESSAGES.filter(function(b){if(b.id===a)return!0}),d=c[0].message,e="";return b=b.toString(),$.each(d,function(a,c){$.isArray(c.code)?$.inArray(b,c.code)!=-1&&(e=c.description):c.code===b&&(e=c.description)}),e}}}()}(BELONG),function(a){"use strict";a.sectionTitle=function(){var a;return{init:function(){a=this,a.showTaglineOnInit()},isADSLPage:function(){var a=!1,b=$(".main.product-page .sq-container");return b.length>0&&"adsl"===b.data("sqType")&&(a=!0),a},showTaglineOnInit:function(){var b=!1;if(1==a.isADSLPage()?"ADSL1"===sessionStorage.getItem("broadbandTechnologyType")&&(b=!0):b=!0,1==b){var c=$(".main.product-page .title-section .tagline");c.length>0&&c.removeClass("hidden")}},hideTaglineForADSL1:function(){if(1==a.isADSLPage()){var b=$(".main.product-page .title-section .tagline");b.length>0&&b.addClass("hidden")}},showTaglineForADSL1:function(){if(1==a.isADSLPage()){var b=$(".main.product-page .title-section .tagline");b.length>0&&b.removeClass("hidden")}}}}()}(BELONG),function(a){"use strict";a.targetMobileApp=function(){var a,b=window.navigator.standalone,c=navigator.userAgent.match(/iPhone|iPad|iPod/i),d=navigator.userAgent.match(/Android/i),e=(navigator.userAgent.match(/IEMobile/i),!!window.chrome,/safari/.test(navigator.userAgent.toLowerCase())),f=navigator.userAgent.match(/BelongApp\/[0-9\.]+$/);return{init:function(){a=this,(c&&!b&&!e||d&&f)&&($("#ctn-title").addClass("hidden"),$(".authenticated-page-subtitle").addClass("hidden"),$(".authenticated-page-cards").css({background:"#ffffff"}),a.beforeLoggedIn(),a.afterLoggedIn(),a.display.overrideStyles())},isApp:function(){return!(!c||b||e)||!(!d||!f)},isAndroid:function(){return!1},isIOS:function(){return!1},afterLoggedIn:function(){a.hide.headerSection(),a.hide.footerSection()},beforeLoggedIn:function(){a.set.iOS()},set:{iOS:function(){$("[data-controller=forgottenpassword]").attr("id","is-ios")},android:function(){$("[data-controller=forgottenpassword]").attr("id","is-android")},windows:function(){$("[data-controller=forgottenpassword]").attr("id","is-windows")}},display:{headerSection:function(){$("#header").removeClass("hidden")},footerSection:function(){$(".footer").removeClass("hidden")},overrideStyles:function(){$(".content-container").css({paddingTop:"0"}),$("#ctn-cards").css({background:"#ffffff"}),$("#cmp-manage-payment").css({background:"#ffffff"}),$(".authenticated-cards").css({background:"#ffffff"}),$(".authenticated-page-summary").css({background:"#01BFDE"}),$(".txt-data-summary").css({color:"#FFFFFF"}),$(".summary-item-name").css({color:"#FFFFFF"}),$(".summary-item-cost").css({color:"#FFFFFF"}),$(".summary-tmc p").css({color:"#FFFFFF"})}},hide:{headerSection:function(){$("#header").addClass("hidden")},footerSection:function(){$(".footer").addClass("hidden")}}}}()}(BELONG),function(a){"use strict";a.unsubscribe=function(){var a;return{init:function(){a=this,a.processUnsubscribeToken()},processUnsubscribeToken:function(){function a(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function b(){var b="";if(b=a("token"),""==b){var c=window.location.pathname.split("/");c.length>=3&&(b=c[2])}return b}if(0!=$("#header[data-page-type='unsubscribe']").length){var c=b();if(""==c);else{var d=$.get("/bin/belong/customer/unsubscribe?unsubscribeToken="+c);d.done(function(a){}),d.fail(function(a){})}}}}}()}(BELONG),function(){"use strict";BELONG.campaignCarousel=function(){$(".campaign-carousel .carousel-container").each(function(){var a=$(this),b=$(".slides > .slide").length,c=!1,d=!0,e=!0;a.data("autoScroll")&&(c=!0,d=!0),1===b&&(e=!1,c=!1),a.flexslider({NAMESPACE:"flexCampaignCarousel-",selector:".slides > .slide",animation:"slide",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:e,smoothHeight:!0,startAt:0,slideshow:c,slideshowSpeed:a.data("scrollSpeed"),animationSpeed:500,initDelay:a.data("scrollSpeed"),randomize:!1,pauseOnAction:!0,pauseOnHover:!1,useCSS:!0,touch:e,video:!1,controlNav:!0,directionNav:e,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:d,pauseText:"<span>Pause</span>",playText:"<span>Play</span>",controlsContainer:".campaign-carousel__controls",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){a.removeClass("loading")},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}})})}}(),function(a){"use strict";a.headerNav=function(){var b,c,d,e,f,g="show-liveagent";return{init:function(){b=this,c=$("#header"),d=document.getElementById("header"),e=$(".navigation-list li"),f=$("#header").data("pageType"),b.methods.currentPage(),b.methods.showPageLinks(),BELONG.DEVSWITCH&&b.methods.toggleLiveagent(),$(window).resize(function(){if("none"===$("#header-call").css("display")&&0===$(".desktop-call").length){var a=!0;if(a===!1)$(".secondary-navigation").prepend('<li class="desktop-call desktop-call-visible"><a href="#" onclick="return false;">1300 235 664</a></li>');else{var b="";b+='<li class="desktop-call desktop-phone-reveal">',b+='  <a id="header-call-icon" href="#" class="call">',b+='    <span class="vh">Call</span>',b+="  </a>",b+='  <span class="desktop-phone hidden">',b+='    <a id="header-call" href="#" onclick="return false;">1300 235 664</a>',b+="</span>",b+="</li>",$(".secondary-navigation").prepend(b);var c=$(".secondary-navigation li.desktop-call a#header-call-icon"),d=$(".secondary-navigation li.desktop-call span.desktop-phone");c.off("click").on("click",function(){return c.addClass("hidden"),d.removeClass("hidden"),BELONG.adobeAnalytics.global.revealPhoneNumber(window.location.pathname),!1})}}}),$(window).trigger("resize")},methods:{toggleLiveagent:function(a){return 0!==$("#chat-popup").length&&void("undefined"!=typeof a&&"boolean"==typeof a?a?d.classList.add(g):d.classList.remove(g):d.classList.toggle(g))},currentPage:function(){e.each(function(){var a=$(this);window.location.pathname===a.find("a").attr("href")&&a.addClass("current-page")})},showPageLinks:function(){e.each(function(){var b=$(this),c=b.find("a"),d=c.data()||{},e=!0;switch(f){case"join":d.join||(e=!1)}a.GD.isAgent&&!d.agent&&(e=!1),a.GD.isMobo&&!d.agentMobo&&(e=!1),a.GD.isCustomer&&!d.customer&&(e=!1),a.GD.isLoggedIn&&!d.auth&&(e=!1),a.GD.isLoggedIn||d.unauth||(e=!1),a.GD.isAgent&&d.unauth&&(e=!0),e&&b.removeClass("hidden")}),a.GD.isLoggedIn&&(c.find(".authenticated-menu").removeClass("hidden").children("a").off("click.authHeaderToggle").on("click.authHeaderToggle",b.events.authHeaderToggle).find(".user-first-name").text(a.GD.loginFirstname),$(".authenticated-menu-mobile").removeClass("hidden"))}},events:{authHeaderToggle:function(a){a.preventDefault();var b=$(this).next();b.toggleClass("hidden")}}}}()}(BELONG),function(a){"use strict";a.navMobile=function(){function a(a){a.preventDefault(),f.hasClass("hide")?d():f.hasClass("open")&&c()}function b(){setTimeout(function(){f.removeClass("close"),f.addClass("hide")},250)}function c(){f.removeClass("open"),f.addClass("close"),b()}function d(){f.addClass("open"),f.removeClass("close"),f.removeClass("hide")}var e=$(".nav-toggle"),f=$(".mobile-menu"),g=function(){e.off("click").on("click",a)};return{init:g}}()}(BELONG),function(a){"use strict";a.aboutUs={init:function(){var b=$(".about-us-tab-panel");b.each(function(b,c){var d=$(this).attr("id");ko.applyBindings(new a.belongTabPanel(d),document.getElementById(d))})}}}(BELONG),function(){BELONG.accountLogin=BELONG.accountLogin||{},$.extend(BELONG.accountLogin,function(){var a,b,c=$("#log-in-block");return{init:function(){if(a=this,0===$("#log-in-submit").length)return!1;var b=new a.ViewModel;ko.applyBindings(b,document.getElementById("log-in-block")),BELONG.DEVSWITCH||(a.getContent(),a.showNotification()),a.getUrlParamAndSetInputValue("goto","input[name=goto]"),a.getUrlParamAndSetInputValue("realm","input[name=realm]"),a.forcePasswordLabelShift()},ViewModel:function(){var a=this;a.viewState={isLoading:ko.observable(!1),openAmError:ko.observable(!1)},a.username=ko.observable(""),a.password=ko.observable(""),a.login=function(){return!!BELONG.validation.validateForm(BELONG.loginValidator)&&void c.submit()},a.loginValidation=function(){BELONG.loginValidator=BELONG.validation.setupFormValidation("log-in-block",$("#log-in-block"),{rules:{IDToken1:{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255},IDToken2:{required:!0}}})},a.loginValidation()},getContent:function(){var a,c,d=function(){return a=$(b).find(".thingsToDoModule"),c=$(b).find(".more-info"),!(!a&&!c)&&(a&&$("#things-to-do").append(a).removeClass("hidden"),c&&$("#more-and-contact").append(c).removeClass("hidden"),$(".loader-circle").addClass("hidden"),!0)},e=function(){$(".content-container").addClass("no-content"),$(".loader-circle").addClass("hidden")};$.ajax({url:"/login-content",type:"GET",dataType:"html",timeout:9e3,success:function(a){b=a,d()||e()},error:function(){e()}})},showNotification:function(){var a=$("#notification"),b=$(".notify-user"),c=$(".log-back-in-url a").attr("href");a.text()&&b.html(a.html()).removeClass("hidden"),a.hasClass("success")&&b.removeClass("-error").addClass("-success"),a.hasClass("hide-login")&&($(".ctrl-holders").addClass("hidden"),$(".return-to-login").removeClass("hidden")),c&&$(".return-to-login").attr("href",c)},getUrlParamAndSetInputValue:function(a,b){var c=BELONG.util.getUrlParameterByName(a);return!!c&&void $(b).val(c)},forcePasswordLabelShift:function(){var a=$("#IDToken1"),b=$("#IDToken2");setTimeout(function(){a.val()&&(a.parent().addClass("shift-label"),b.parent().addClass("shift-label"))},50)}}}())}(),function(){BELONG.accountSetup=BELONG.accountSetup||{},$.extend(BELONG.accountSetup,function(){var a,b,c,d,e,f,g,h,i="/bin/belong/auth/customer/setup",j="/bin/belong/auth/customer/setup",k=[];return{init:function(){return 0!==$("#cmp-account-setup").length&&(ko.subscribable.fn.subscribeChanged=function(a,b){var c=this.peek();return this.subscribe(function(d){var e=c;c=d,a.call(b,d,e)})},ko.validation.init({messageTemplate:"customValidationTemplate",decorateInputElement:!0,errorElementClass:"error"},!0),b=new this.ViewModel,c=new BELONG.accountSetup.ContactStepVM,d=new BELONG.accountSetup.ModemDeliveryStepVM,e=new BELONG.accountSetup.NbnStepVM,f=new BELONG.accountSetup.AdslStepVM,g=new BELONG.accountSetup.SurveyStepVM,h=new BELONG.accountSetup.SubmitStepVM,ko.applyBindings(b,document.getElementById("cmp-account-setup")),ko.applyBindings(c,document.getElementById("ctn-contact-step")),ko.applyBindings(d,document.getElementById("ctn-modemdelivery-step")),ko.applyBindings(e,document.getElementById("ctn-nbn-step")),ko.applyBindings(f,document.getElementById("ctn-adsl-step")),ko.applyBindings(g,document.getElementById("ctn-survey-step")),ko.applyBindings(h,document.getElementById("ctn-submit-step")),b.init(),c.init(),d.init(),e.init(),g.init(),void h.init())},getStepByName:function(a,b){var c=ko.utils.arrayFirst(a,function(a){return b===a.name()});return c},getStepByOrder:function(a,b){var c=ko.utils.arrayFirst(a,function(a){return b===a.order()});return c},isOrderSubmitRequired:function(a,b){var c=a-1;return"surveyStep"===b[c+1].name()},submitOrder:function(a,b,c){var d=$.post(j,ko.mapping.toJS(a));return d.then(b,c),d},ViewModel:function(){a=this,a.util=BELONG.util,a.viewState={isLoading:ko.observable(!0),hasServerError:ko.observable(!1),serverErrorMsg:ko.observable("")},a.viewState.defRetrieveErrorMsg=ko.observable(a.util.getCMSMessage("ERROR_DEFAULT",ACCOUNT_SETUP_CMS_DATA.COPY.server_retrieve_errors)),a.accountSetupData=ko.observable({}).publishOn("accountSetupData",!0),a.stepsData=ko.observableArray().publishOn("stepsData",!0),a.summaryData=ko.observableArray().syncWith("summaryData",!1,!0),a.dataModel=ko.observable({}).syncWith("dataModel",!1,!0),a.coolingOff=ko.observable(BELONG.agents.methods.isOutboundAgent()),a.hideNotification=ko.observable(!0),a.computeBroadband=function(){var b=a.accountSetupData().order||{},c="";return"NBN"===b.planType||"DSL"===b.planType?c="Broadband Only":"BUNDLE"===b.planType&&(c="Broadband Bundle"),c},a.computeExtras=function(){var b=a.accountSetupData().order||{},c="";return(b.nbnPlanSpeed&&"12/1"!==b.nbnPlanSpeed||b.voicePlan)&&(c+=" with ",b.nbnPlanSpeed&&"12/1"!==b.nbnPlanSpeed&&(c+=" a <b>"+BELONG.DISPLAY_TEXT.planSpeed[b.nbnPlanSpeed]+" Speed Boost</b>  ",b.voicePlan&&(c+=" and ")),b.voicePlan&&(c+="<b>"+BELONG.DISPLAY_TEXT.voicePlan[b.voicePlan]+"</b>")),c},a.paymentSummary=ko.computed(function(){if(!a.accountSetupData())return{};var b=a.accountSetupData().order||{};return{planSize:b.planSize?BELONG.DISPLAY_TEXT.plan[b.planSize]:"",planSizePrefix:"Unlimited"===b.planSize?"an":"a",contractTerm:b.contractTerm?BELONG.DISPLAY_TEXT.contract[b.contractTerm]:"",bundleType:a.computeBroadband(),extras:a.computeExtras()}}).extend({notify:"always"}),a.currentStep=ko.observable("").syncWith("currentStep",!1,!0),a.editStepShown=ko.computed(function(){var b=BELONG.accountSetup.getStepByName(a.stepsData(),"surveyStep");return!(!b||void 0===typeof b.order())&&a.currentStep()<b.order()}),a.currentStep.subscribeChanged(function(b,c){a.saveDataStore(),$("#account-setup-summary").length&&$("html, body").animate({scrollTop:$("#account-setup-summary").offset().top},"slow");var d=ko.mapping.toJS(a.dataModel()),e=BELONG.accountSetup.getStepByOrder(a.stepsData(),b);d.stepName=e.name(),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupStep",eventCategory:"Account-Setup",eventAction:"Step Change",eventLabel:b>c?"Next Step":"Edit Step",eventData:d})}),a.getUDID=function(){return $.cookie("uniqueIdentifier")?$.cookie("uniqueIdentifier"):""},a.removeExpiredDataStore=function(){for(var a in sessionStorage)(a.indexOf("account-setup")>-1||a.indexOf("-step")>-1)&&sessionStorage.removeItem(a)},a.init=function(){var b=a.getDataStore(),c={ignore:["accountSetupData","dataModel","paymentSummary","editStepShown"]},d=$.parseJSON(b);b?(a.accountSetupData(d.accountSetupData),a.dataModel(d.dataModel),ko.mapping.fromJS(d,c,a)):(a.removeExpiredDataStore(),a.apiRetrieve())},a.apiRetrieve=function(){var b=$.get(i);b.done(function(b){a.parseServiceStatusData(b),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupLoad",eventCategory:"Account-Setup",eventAction:"Load",eventLabel:"Page load",eventData:b})}),b.fail(function(b){var c="",d=b.responseJSON;a.viewState.hasServerError(!0),"timeout"===b.statusText?c="ERROR_TIMEOUT":void 0!==d&&void 0!==d.errors?(a.viewState.serverErrorMsg(d.errors),c=b.responseJSON.errors):(a.viewState.serverErrorMsg([{code:"ERROR_DEFAULT"}]),c="ERROR_DEFAULT"),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupLoad",eventCategory:"Account-Setup",eventAction:"Load",eventLabel:"Page load",eventError:c})}),b.always(function(){a.viewState.isLoading(!1)})},a.getDataStore=function(){var b=sessionStorage.getItem("account-setup-"+a.getUDID());return b},a.saveDataStore=function(){var b=ko.mapping.toJS(a);delete b.util,delete b.paymentSummary,delete b.accountSetupData,delete b.editStepShown,delete b.currentStep,delete b.dataModel,b.accountSetupData=a.accountSetupData(),b.dataModel=a.dataModel(),b.currentStep=a.currentStep(),sessionStorage.setItem("account-setup-"+a.getUDID(),JSON.stringify(b))},a.updateStepsData=function(b){ko.utils.arrayForEach(b,function(b,c){a.stepsData.push({name:ko.observable(b),order:ko.observable(c+1),status:ko.observable("ACTIVE")})})},a.setupSteps=function(){a.hideNotification(!1);var b=a.accountSetupData().order;if(b.preProvisioned===!0?k.push("contactStep"):k.push("modemDeliveryStep"),"BUNDLE"===b.planType)"CHURN_ORDER"!==b.orderType&&k.push("adslStep");else if("NBN"===b.planType)switch(b.nbnServiceClass){case"NBN_SERVICE_CLASS_THREE":case"NBN_SERVICE_CLASS_THIRTEEN":case"NBN_SERVICE_CLASS_TWENTY":case"NBN_SERVICE_CLASS_TWENTY_FOUR":break;default:k.push("nbnStep")}k.push("surveyStep"),k.push("submitStep"),a.updateStepsData(k),a.viewState.isLoading(!1),a.currentStep(1)},a.editStep=function(b){a.summaryData(a.summaryData.slice(0,b)),a.currentStep(b+1),BELONG.forms.applyShiftLabel()},a.parseServiceStatusData=function(b){a.accountSetupData(b),a.setupSteps(),BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect()},a.validateLandlineOnClick=function(){a.validateLandline.isLoading(!1)},a.nbnAppointmentOnClick=function(){$("#nbn-appointment-date").pickadate({onClose:function(){var b=this.get("select","yyyy-mm-dd");b?a.nbnStep.appointmentDate(moment(b).format("dddd, DD MMMM, YYYY")):a.nbnStep.appointmentDate(""),a.validStepHideErrors()}})},a.getSummaryCopy=function(b){var c=a.stepsData()[b].name();return ACCOUNT_SETUP_CMS_DATA.COPY[c].summary},a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$paymentSummary.planSizePrefix$$",replacement:a.paymentSummary().planSizePrefix},{placeholder:"$$paymentSummary.planSize$$",replacement:a.paymentSummary().planSize},{placeholder:"$$paymentSummary.contractTerm$$",replacement:a.paymentSummary().contractTerm},{placeholder:"$$paymentSummary.bundleType$$",replacement:a.paymentSummary().bundleType},{placeholder:"$$paymentSummary.extras$$",replacement:a.paymentSummary().extras},{placeholder:"$$paymentSummary.cost$$",replacement:a.paymentSummary().cost}])},a.afterRender=function(){BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect()}}}}())}(),function(){"use strict";BELONG.accountSetup=BELONG.accountSetup||{},BELONG.accountSetup.AdslStepVM=function(){var a=this,b="/bin/belong/auth/customer/setup/sq";a.util=BELONG.util,a.accountSetupData=ko.observable().subscribeTo("accountSetupData",!0),a.stepsData=ko.observableArray().subscribeTo("stepsData",!0),a.summaryData=ko.observableArray().subscribeTo("summaryData",!0),a.dataModel=ko.observable({}).subscribeTo("dataModel",!0),a.currentStep=ko.observable("").subscribeTo("currentStep",!0),a.adslStep={status:ko.observable(""),title:ko.observable("ADSL Setup"),summary:ko.observable(""),inplace:ko.observable(""),infrastructureType:ko.observable(""),serviceAddressId:ko.observable(""),sq:ko.observable(""),phoneNumber:ko.observable(""),sqLandlineVerified:ko.observable(""),sqLandlineResponse:ko.observable(""),housemateService:ko.observable(""),haveMoveIn:ko.observable(""),moveInDate:ko.observable(""),moveInDateISO:ko.observable(""),connection:ko.observable(""),appointmentDate:ko.observable(""),appointmentTime:ko.observable(""),submitLineAssessment:ko.observable(!1),sendTechnician:ko.observable(""),order:ko.observable(""),isSubmitting:ko.observable(!1),orderSubmitError:ko.observable(!1)},a.adslStep.phoneNumber.subscribe(function(){a.adslStep.sqLandlineVerified("")}),a.adslStep.errors=ko.validation.group(a.adslStep,{deep:!0}),a.sqLandline={isLoading:ko.observable(!1)},a.sqLandlineDone=function(b){"CHURN_ORDER"===b.responseType?a.adslStep.sqLandlineVerified("VALID"):"INVALID_ADDRESS"===b.responseType?a.adslStep.sqLandlineVerified("FAIL"):a.adslStep.sqLandlineVerified("TOLERANT"),a.adslStep.sqLandlineResponse(b.responseType)},a.sqLandlineFail=function(b){"timeout"===b.statusText?a.adslStep.sqLandlineVerified("TOLERANT"):a.adslStep.sqLandlineVerified("TOLERANT"),a.adslStep.sqLandlineResponse("SERVER_FAIL")},a.sqLandlineOnClick=function(){if(!a.adslStep.phoneNumber.isValid())return!1;a.sqLandline.isLoading(!0);var c=$.post(b,{phoneNumber:a.adslStep.phoneNumber()});c.then(a.sqLandlineDone,a.sqLandlineFail),c.always(function(){a.sqLandline.isLoading(!1)})},a.adslMoveInDateOnClick=function(){var b=a.getStartDateForMoveInDatepicker();$("#adsl-movein-date").pickadate({min:moment().add(b,"d").toDate(),onClose:function(){var b=this.get("select","yyyy-mm-dd");b?(a.adslStep.moveInDate(moment(b).format("dddd, DD MMMM, YYYY")),a.adslStep.moveInDateISO(b)):(a.adslStep.moveInDate(""),a.adslStep.moveInDateISO(""))}})},a.getStartDateForMoveInDatepicker=function(){var b=1;return BELONG.agents.methods.isOutboundAgent()&&(b=a.getTenBusinessDaysFromNow()),b},a.getTenBusinessDaysFromNow=function(){for(var a=0,b=0,c=moment();a<11;)b+=1,c.day()>0&&c.day()<6&&a++,c.add(1,"d");return b},a.adslStep.inplaceOrderType=ko.pureComputed(function(){var b="";return"ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace()?"phone-internet"===a.adslStep.sq()||"housemate-has-service"===a.adslStep.sq()?(b="PSTN"!==a.adslStep.infrastructureType()?"NEW_ULL_ORDER":"NEW_ORDER_CONNECT_OUTSTANDING","ADDRESS_NOT_SERVICEABLE"===a.adslStep.sqLandlineResponse()?b="UNABLE_TO_PROCEED_ADDRESS_NOT_SERVICEABLE":"TIAB_ERROR"===a.adslStep.sqLandlineResponse()?b="SETUP_EXCEPTION":"CHURN_ORDER"===a.adslStep.sqLandlineResponse()?b="RE_SQ_CHURN_ORDER":"SERVER_FAIL"===a.adslStep.sqLandlineResponse()&&(b="SETUP_EXCEPTION")):"internet"===a.adslStep.sq()?b="PSTN"!==a.adslStep.infrastructureType()?"NEW_ULL_ORDER":"NEW_ORDER_CONNECT_OUTSTANDING":"no-service"===a.adslStep.sq()&&("yes"===a.adslStep.haveMoveIn()?b="NEW_ORDER_CONNECT_OUTSTANDING":"no"===a.adslStep.haveMoveIn()&&(b="NEW_ORDER_FUTURE_DATED")):"ACTIVE_DATE_AVAILABLE"===a.adslStep.inplace()?b="NEW_ORDER_FUTURE_DATED":"INACTIVE_EXCHANGE_APPT"===a.adslStep.inplace()?"yes"===a.adslStep.connection()?b="NEW_ORDER_EXCHANGE_CONNECTION":"no"===a.adslStep.connection()&&(b="NEW_ORDER_SITE_CONNECTION"):"INACTIVE_SITE_APPT"===a.adslStep.inplace()||"UNAVAILABLE_INACTIVE"===a.adslStep.inplace()?b="NEW_ORDER_SITE_CONNECTION":"INPLACE_WEBSERVICE_EXCEPTION"===a.adslStep.inplace()?b="INPLACE_WEBSERVICE_EXCEPTION":"NO_INPLACE"===a.adslStep.inplace()&&(b="NEW_LINE"),b}),a.summaryMapping=function(){var b="";switch(a.adslStep.inplaceOrderType()){case"NEW_ULL_ORDER":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.newUllOrderSummary;break;case"INPLACE_WEBSERVICE_EXCEPTION":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.setupExceptionSummary;break;case"UNABLE_TO_PROCEED_ADDRESS_NOT_SERVICEABLE":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.setupExceptionSummary;break;case"UNABLE_TO_PROCEED_HOUSEMATE_KEEP_SERVICE ":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.setupExceptionSummary;break;case"SETUP_EXCEPTION ":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.setupExceptionSummary;break;case"RE_SQ_CHURN_ORDER":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.reSqChurnOrderSummary;break;case"NEW_ORDER_CONNECT_OUTSTANDING":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.newOrderConnectOutstandingSummary;break;case"NEW_ORDER_FUTURE_DATED":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.newOrderFutureDatedSummary;break;case"NEW_LINE":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.newOrderNewLineSummary;break;case"NEW_ORDER_EXCHANGE_CONNECTION":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.newOrderExchangeConnectionSummary;break;case"NEW_ORDER_SITE_CONNECTION":b=ACCOUNT_SETUP_CMS_DATA.COPY.adslStep.summary.newOrderSiteConnectionSummary;break;default:b="You have completed ADSL setup"}a.adslStep.summary(b)},a.adslAppointmentOnClick=function(){var b=new Date;$("#adsl-appointment-date").pickadate({min:b,onClose:function(){var b=this.get("select","yyyy-mm-dd");b?a.adslStep.appointmentDate(moment(b).format("dddd, DD MMMM, YYYY")):a.adslStep.appointmentDate("")}})},a.isCurrentStepValid=function(){if(a.currentStep()===a.adslStep.order())return 0===a.adslStep.errors().length},a.submitStep={btnState:ko.computed(function(){var b="";return b=a.adslStep.isSubmitting()?"loading":a.isCurrentStepValid()?"":"disabled"}),btnText:ko.observable("NEXT STEP")},a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$adslStep.moveInDateCopy$$",replacement:function(){return a.adslStep.moveInDate()?"<br /><br />Your move in date is "+a.adslStep.moveInDate()+".":""}}])},a.initValidation=function(){a.adslStep.sq.extend({required:{onlyIf:function(){return"ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace()}}}),a.adslStep.phoneNumber.extend({required:{onlyIf:function(){if(("ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace())&&"PSTN"===a.adslStep.infrastructureType()){if("phone-internet"===a.adslStep.sq())return!0;if("housemate-has-service"===a.adslStep.sq()&&"phone-internet"===a.adslStep.housemateService())return!0}return!1}},australianPhoneNumber:function(){if(("ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace())&&"PSTN"===a.adslStep.infrastructureType()){if("phone-internet"===a.adslStep.sq())return!0;if("housemate-has-service"===a.adslStep.sq()&&"phone-internet"===a.adslStep.housemateService())return!0}return!1},validation:{validator:function(){return"FAIL"!==a.adslStep.sqLandlineVerified()},message:function(){return"INVALID_ADDRESS"===a.adslStep.sqLandlineResponse()?"Your phone number doesnt match the address provided.":"Sorry, an error occured, Please verify it again."}}}),a.adslStep.sqLandlineVerified.extend({required:{onlyIf:function(){return("ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace())&&"PSTN"===a.adslStep.infrastructureType()&&"phone-internet"===a.adslStep.sq()}},validation:{validator:function(a){return"FAIL"!==a}}}),a.adslStep.housemateService.extend({required:{onlyIf:function(){return("ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace())&&"housemate-has-service"===a.adslStep.sq()}}}),a.adslStep.haveMoveIn.extend({required:{onlyIf:function(){if("ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace()){if("no-service"===a.adslStep.sq())return!0}else if("INACTIVE_SITE_APPT"===a.adslStep.inplace()||"UNAVAILABLE_INACTIVE"===a.adslStep.inplace()||"NO_INPLACE"===a.adslStep.inplace())return!0;return!1}}}),a.adslStep.moveInDate.extend({required:{onlyIf:function(){if("ACTIVE_LINE"===a.adslStep.inplace()||"UNAVAILABLE"===a.adslStep.inplace()){if("no-service"===a.adslStep.sq()&&"no"===a.adslStep.haveMoveIn())return!0}else if(("INACTIVE_SITE_APPT"===a.adslStep.inplace()||"UNAVAILABLE_INACTIVE"===a.adslStep.inplace()||"NO_INPLACE"===a.adslStep.inplace())&&"no"===a.adslStep.haveMoveIn())return!0;return!1}}}),a.adslStep.connection.extend({required:{onlyIf:function(){return"INACTIVE_EXCHANGE_APPT"===a.adslStep.inplace()}}})},a.initValidation(),a.saveCurrentStepData=function(){ko.postbox.publish("summaryData",a.summaryData()),ko.postbox.publish("currentStep",a.currentStep()+1)},a.submitADSLFail=function(){a.adslStep.isSubmitting(!1),a.adslStep.orderSubmitError(!0)},a.submitADSLDone=function(){a.adslStep.orderSubmitError(!1),a.adslStep.isSubmitting(!1),a.gotoNextStep(),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupSubmit",eventCategory:"Account-Setup",eventAction:"Button click",eventLabel:"Form submit",eventData:a.dataModel()})},a.updateDataModel=function(){var b=a.dataModel();return b.inplaceOrderType=a.adslStep.inplaceOrderType(),b.moveInDate=a.adslStep.moveInDateISO(),b.fnn=a.adslStep.phoneNumber(),b.ullReturnHousemateApproval="housemate-has-service"===a.adslStep.sq(),b.adslSummary=a.shortCodeDecode(a.adslStep.summary()),ko.postbox.publish("dataModel",b),b},a.gotoNextStep=function(){a.saveStepDataStore(),a.summaryMapping(),a.summaryData.push(a.shortCodeDecode(a.adslStep.summary())),a.saveCurrentStepData()},a.submitStepClick=function(){if("disabled"!==a.submitStep.btnState()&&"loading"!==a.submitStep.btnState()){var b=a.isCurrentStepValid();if(b){a.adslStep.isSubmitting(!0);var c=a.updateDataModel();BELONG.accountSetup.submitOrder(c,a.submitADSLDone,a.submitADSLFail)}}},a.getStepDataStore=function(){var a=sessionStorage.getItem("account-setup_adsl_step");return a},a.saveStepDataStore=function(){var b=ko.mapping.toJS(a);delete b.accountSetupData,delete b.util,delete b.stepsData,delete b.dataModel,delete b.isCurrentStepValid,delete b.submitStep,sessionStorage.setItem("account-setup_adsl_step",JSON.stringify(b))},a.summaryDataFilter=function(b){a.summaryData(a.summaryData.slice(0,b))},a.adslStep.sq.subscribe(function(){a.adslStep.sqLandlineVerified(""),a.adslStep.sqLandlineResponse("")}),a.adslStep.housemateService.subscribe(function(){a.adslStep.sqLandlineVerified(""),a.adslStep.sqLandlineResponse("")}),a.adslStep.haveMoveIn.subscribe(function(){a.adslStep.moveInDate(""),a.adslStep.moveInDateISO("")}),a.stepsData.subscribe(function(b){var c=a.getStepDataStore(),d={ignore:["submitStep","stepsData","dataModel","isCurrentStepValid","adslStep.inplaceOrderType","adslStep.errors"]};if(c)ko.mapping.fromJS($.parseJSON(c),d,a),a.summaryDataFilter(a.currentStep());else{var e=BELONG.accountSetup.getStepByName(b,"adslStep");e&&(a.adslStep.status(e.status()),a.adslStep.order(e.order()))}}),a.accountSetupData.subscribe(function(b){b.inplace&&(a.adslStep.inplace(b.inplace.inplaceType),a.adslStep.infrastructureType(b.inplace.infrastructureType),a.adslStep.serviceAddressId(b.order.serviceAddress.addressId));
}),a.init=function(){a.adslStep.errors=ko.validation.group(a.adslStep,{deep:!0})},a.afterRender=function(){BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect(),$("#adslStep-phoneNumber").on("keypress",function(b){var c=b.which||b.keyCode,d=b.target;return 13!==c||(d.blur(),void a.sqLandlineOnClick())})}}}(),function(){"use strict";BELONG.accountSetup=BELONG.accountSetup||{},BELONG.accountSetup.ContactStepVM=function(){var a=this,b="/bin/belong/auth/customer/setup/otp/request",c="/bin/belong/auth/customer/setup/otp/validate";a.util=BELONG.util,a.accountSetupData=ko.observable().subscribeTo("accountSetupData",!0),a.stepsData=ko.observableArray().subscribeTo("stepsData",!0),a.summaryData=ko.observableArray().subscribeTo("summaryData",!0),a.dataModel=ko.observable({}).subscribeTo("dataModel",!0),a.currentStep=ko.observable("").subscribeTo("currentStep",!0),a.contactStep={status:ko.observable(""),title:ko.observable("Contact"),mobileNumber:ko.observable(""),verifyCode:ko.observable(""),otpPinValid:ko.observable(""),order:ko.observable(""),isSubmitting:ko.observable(!1),orderSubmitError:ko.observable(!1)},a.showVerifyCodeSection=ko.observable(!1),a.contactStep.errors=ko.validation.group(a.contactStep,{deep:!0}),a.sendSMSCode={btnText:ko.observable("Send confirmation SMS"),btnState:ko.observable(""),btnShown:ko.observable(!0),showSuccessMsg:ko.observable(!1),error:ko.observable("")},a.sendSMSCodeDone=function(){a.sendSMSCode.btnShown(!1),a.sendSMSCode.showSuccessMsg(!0),a.sendSMSCode.btnText("Re-send Code"),a.showVerifyCodeSection(!0)},a.sendSMSCodeFail=function(){a.sendSMSCode.btnShown(!0),a.sendSMSCode.error(!0),a.sendSMSCode.btnText("Re-send Code"),a.submitStep.btnState("disabled")},a.validateSMSCode={isLoading:ko.observable(!1)},a.isCurrentStepValid=function(){if(a.currentStep()===a.contactStep.order())return 0===a.contactStep.errors().length},a.submitStep={btnState:ko.computed(function(){var b="";return b=a.contactStep.isSubmitting()?"loading":a.isCurrentStepValid()?"":"disabled"}),btnText:ko.observable("NEXT STEP")},a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$mobileNumber$$",replacement:a.contactStep.mobileNumber()}])},a.sendSMSCodeOnClick=function(){if(a.contactStep.mobileNumber.isValid()){a.showVerifyCodeSection(!1),a.sendSMSCode.btnShown(!0),a.sendSMSCode.btnState("disabled"),a.sendSMSCode.btnText("Sending SMS...");var c=$.post(b,{mobileNumber:a.contactStep.mobileNumber()});c.then(a.sendSMSCodeDone,a.sendSMSCodeFail),c.always(function(){a.sendSMSCode.btnState("")})}},a.validateSMSCodeOnClick=function(){if(!a.contactStep.verifyCode.isValid())return!1;a.validateSMSCode.isLoading(!0);var b=$.post(c,{mobileNumber:a.contactStep.mobileNumber(),otpPin:a.contactStep.verifyCode()});b.then(a.validateSMSCodeDone,a.validateSMSCodeFail),b.always(function(){a.sendSMSCode.btnState(""),a.validateSMSCode.isLoading(!1)})},a.validateSMSCodeDone=function(){a.contactStep.otpPinValid(!0)},a.validateSMSCodeFail=function(){a.contactStep.otpPinValid(!1)},a.initValidation=function(){a.contactStep.mobileNumber.extend({required:!0,australianMobileNumber:!0}),a.contactStep.verifyCode.extend({required:!0,pattern:{message:"Please enter a 6 digit code",params:/^(?!\s*$)[0-9\s]{6}$/},validation:{validator:function(){return a.contactStep.otpPinValid()!==!1},message:"Sorry, an error occured, please click Resend code link for new code."}}),a.contactStep.otpPinValid.extend({required:!0})},a.initValidation(),a.isCurrentStepValid=function(){if(a.currentStep()===a.contactStep.order())return 0===a.contactStep.errors().length},a.validStepHideErrors=function(){var b=a.isCurrentStepValid();b?a.submitStep.btnState(""):a.submitStep.btnState("disabled")},a.validStepOnChange=function(){$("#ctn-modemdelivery-step").find("input").on("keyup, change, blur",function(){})},a.updateDataModel=function(){var b=a.dataModel();return b.mobile=a.contactStep.mobileNumber(),ko.postbox.publish("dataModel",b),b},a.gotoNextStep=function(){a.saveStepDataStore(),a.summaryData.push(a.shortCodeDecode(ACCOUNT_SETUP_CMS_DATA.COPY.contactStep.summary)),ko.postbox.publish("summaryData",a.summaryData()),ko.postbox.publish("currentStep",a.currentStep()+1)},a.submitStepClick=function(){if("disabled"!==a.submitStep.btnState()&&"loading"!==a.submitStep.btnState()){var b=a.isCurrentStepValid();if(b){var c=a.updateDataModel();BELONG.accountSetup.isOrderSubmitRequired(a.currentStep(),a.stepsData())?(a.contactStep.isSubmitting(!0),BELONG.accountSetup.submitOrder(c,a.submitContactDone,a.submitContactFail)):a.gotoNextStep()}}},a.submitContactFail=function(){a.contactStep.isSubmitting(!1),a.contactStep.orderSubmitError(!0)},a.submitContactDone=function(){a.contactStep.isSubmitting(!1),a.contactStep.orderSubmitError(!1),a.gotoNextStep(),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupSubmit",eventCategory:"Account-Setup",eventAction:"Button click",eventLabel:"Form submit",eventData:a.dataModel()})},a.getStepDataStore=function(){var a=sessionStorage.getItem("account-setup_contact_step");return a},a.saveStepDataStore=function(){var b=ko.mapping.toJS(a);delete b.accountSetupData,delete b.util,delete b.stepsData,delete b.dataModel,delete b.isCurrentStepValid,delete b.submitStep,sessionStorage.setItem("account-setup_contact_step",JSON.stringify(b))},a.summaryDataFilter=function(b){a.summaryData(a.summaryData.slice(0,b))},a.accountSetupData.subscribe(function(b){b.order.customerMobile&&a.contactStep.mobileNumber(b.order.customerMobile)}),a.currentStep.subscribe(function(){a.contactStep.otpPinValid("")}),a.contactStep.mobileNumber.subscribe(function(){a.contactStep.otpPinValid("")}),a.stepsData.subscribe(function(b){var c=a.getStepDataStore(),d={ignore:["submitStep","stepsData","isCurrentStepValid","contactStep.otpPinValid","contactStep.deliveryAddressFull","contactStep.errors"]};if(c)ko.mapping.fromJS($.parseJSON(c),d,a),a.summaryDataFilter(a.currentStep());else{var e=BELONG.accountSetup.getStepByName(b,"contactStep");e&&(a.contactStep.status(e.status()),a.contactStep.order(e.order()))}a.validStepOnChange()}),a.init=function(){},a.afterRender=function(){BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect(),$("#mobile-number").on("keypress",function(b){var c=b.which||b.keyCode,d=b.target;return 13!==c||(d.blur(),void a.sendSMSCodeOnClick())}),$("#verify-code").on("keypress",function(b){var c=b.which||b.keyCode,d=b.target;return 13!==c||(d.blur(),void a.validateSMSCodeOnClick())})}}}(),function(){"use strict";BELONG.accountSetup=BELONG.accountSetup||{},BELONG.accountSetup.ModemDeliveryStepVM=function(){var a=this,b="/bin/belong/auth/customer/setup/otp/request",c="/bin/belong/auth/customer/setup/otp/validate";a.util=BELONG.util,a.accountSetupData=ko.observable().subscribeTo("accountSetupData",!0),a.stepsData=ko.observableArray().subscribeTo("stepsData",!0),a.summaryData=ko.observableArray().subscribeTo("summaryData",!0),a.dataModel=ko.observable({}).subscribeTo("dataModel",!0),a.currentStep=ko.observable("").subscribeTo("currentStep",!0),a.modemDeliveryStep={status:ko.observable(""),title:ko.observable("Modem delivery & contact"),selectAddress:ko.observable("current"),defaultDeliveryAddress:ko.observable(""),deliveryAddress1:ko.observable(""),deliveryAddress2:ko.observable(""),deliverySuburb:ko.observable(""),deliveryState:ko.observable(""),deliveryPostcode:ko.observable(""),mobileNumber:ko.observable(""),verifyCode:ko.observable(""),otpPinValid:ko.observable(""),order:ko.observable(""),isSubmitting:ko.observable(!1),orderSubmitError:ko.observable(!1)},a.showVerifyCodeSection=ko.observable(!1),a.modemDeliveryStep.errors=ko.validation.group(a.modemDeliveryStep,{deep:!0}),a.sendSMSCode={btnText:ko.observable("Send confirmation SMS"),btnState:ko.observable(""),btnShown:ko.observable(!0),showSuccessMsg:ko.observable(!1),error:ko.observable("")},a.sendSMSCodeDone=function(){a.sendSMSCode.btnShown(!1),a.sendSMSCode.showSuccessMsg(!0),a.sendSMSCode.btnText("Re-send Code"),a.showVerifyCodeSection(!0)},a.sendSMSCodeFail=function(){a.sendSMSCode.btnShown(!0),a.sendSMSCode.error(!0),a.sendSMSCode.btnText("Re-send Code"),a.submitStep.btnState("disabled")},a.validateSMSCode={isLoading:ko.observable(!1)},a.isCurrentStepValid=function(){if(a.currentStep()===a.modemDeliveryStep.order())return 0===a.modemDeliveryStep.errors().length},a.isOrderSubmitRequired=function(){var b=a.currentStep()-1;return"surveyStep"===a.stepsData()[b+1].name()},a.submitStep={btnState:ko.computed(function(){var b="";return b=a.modemDeliveryStep.isSubmitting()?"loading":a.isCurrentStepValid()?"":"disabled"}),btnText:ko.observable("NEXT STEP")},a.modemDeliveryStep.deliveryAddressFull=ko.pureComputed(function(){return"other"===a.modemDeliveryStep.selectAddress()?a.modemDeliveryStep.deliveryAddress1()+" "+a.modemDeliveryStep.deliveryAddress2()+", "+a.modemDeliveryStep.deliverySuburb()+", "+a.modemDeliveryStep.deliveryPostcode()+" "+a.modemDeliveryStep.deliveryState():"current"===a.modemDeliveryStep.selectAddress()?a.modemDeliveryStep.defaultDeliveryAddress():void 0}),a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$deliveryAddress$$",replacement:a.modemDeliveryStep.deliveryAddressFull()},{placeholder:"$$mobileNumber$$",replacement:a.modemDeliveryStep.mobileNumber()}])},a.sendSMSCodeOnClick=function(){if(a.modemDeliveryStep.mobileNumber.isValid()){a.showVerifyCodeSection(!1),a.sendSMSCode.btnShown(!0),a.sendSMSCode.btnState("disabled"),a.sendSMSCode.btnText("Sending SMS...");var c=$.post(b,{mobileNumber:a.modemDeliveryStep.mobileNumber()});c.then(a.sendSMSCodeDone,a.sendSMSCodeFail),c.always(function(){a.sendSMSCode.btnState("")})}},a.validateSMSCodeOnClick=function(){if(!a.modemDeliveryStep.verifyCode.isValid())return!1;a.validateSMSCode.isLoading(!0);var b=$.post(c,{mobileNumber:a.modemDeliveryStep.mobileNumber(),otpPin:a.modemDeliveryStep.verifyCode()});b.then(a.validateSMSCodeDone,a.validateSMSCodeFail),b.always(function(){a.sendSMSCode.btnState(""),a.validateSMSCode.isLoading(!1)})},a.validateSMSCodeDone=function(){a.modemDeliveryStep.otpPinValid(!0)},a.validateSMSCodeFail=function(){a.modemDeliveryStep.otpPinValid(!1)},a.onKeyPressSMSCode=function(b,c){13===c.keyCode&&a.validateSMSCodeOnClick()},a.initValidation=function(){a.modemDeliveryStep.mobileNumber.extend({required:!0,australianMobileNumber:!0}),a.modemDeliveryStep.verifyCode.extend({required:!0,pattern:{message:"Please enter a 6 digit code",params:/^(?!\s*$)[0-9\s]{6}$/},validation:{validator:function(){return a.modemDeliveryStep.otpPinValid()!==!1},message:"Sorry, an error occured, please click Resend code link for new code."}}),a.modemDeliveryStep.otpPinValid.extend({required:!0}),a.modemDeliveryStep.deliveryAddress1.extend({required:{onlyIf:function(){return"other"===a.modemDeliveryStep.selectAddress()}},maxLength:30}),a.modemDeliveryStep.deliveryAddress2.extend({maxLength:30}),a.modemDeliveryStep.deliverySuburb.extend({required:{onlyIf:function(){return"other"===a.modemDeliveryStep.selectAddress()}}}),a.modemDeliveryStep.deliveryState.extend({required:{onlyIf:function(){return"other"===a.modemDeliveryStep.selectAddress()}}}),a.modemDeliveryStep.deliveryPostcode.extend({required:{onlyIf:function(){return"other"===a.modemDeliveryStep.selectAddress()}},pattern:{params:/^\d{4}$/,message:"Please enter a valid postcode"}})},a.initValidation(),a.validStepHideErrors=function(){var b=a.isCurrentStepValid();b?a.submitStep.btnState(""):a.submitStep.btnState("disabled")},a.validStepOnChange=function(){$("#ctn-modemdelivery-step input, #ctn-modemdelivery-step select").on("keyup, change, blur",function(){a.validStepHideErrors()})},a.updateDataModel=function(){var b=a.dataModel();return"other"===a.modemDeliveryStep.selectAddress()?(b.newModemDeliveryAddress=!0,b.modemDeliveryAddress1=a.modemDeliveryStep.deliveryAddress1(),b.modemDeliveryAddress2=a.modemDeliveryStep.deliveryAddress2(),b.modemDeliverySuburb=a.modemDeliveryStep.deliverySuburb(),b.modemDeliveryState=a.modemDeliveryStep.deliveryState(),b.modemDeliveryPostcode=a.modemDeliveryStep.deliveryPostcode()):b.newModemDeliveryAddress=!1,b.defaultDeliveryAddress=a.modemDeliveryStep.defaultDeliveryAddress(),b.mobile=a.modemDeliveryStep.mobileNumber(),ko.postbox.publish("dataModel",b),b},a.gotoNextStep=function(){a.saveStepDataStore(),a.summaryData.push(a.shortCodeDecode(ACCOUNT_SETUP_CMS_DATA.COPY.modemDeliveryStep.summary)),ko.postbox.publish("summaryData",a.summaryData()),ko.postbox.publish("currentStep",a.currentStep()+1)},a.submitStepClick=function(){if("disabled"!==a.submitStep.btnState()&&"loading"!==a.submitStep.btnState()){var b=a.isCurrentStepValid();if(b){var c=a.updateDataModel();a.saveStepDataStore(),BELONG.accountSetup.isOrderSubmitRequired(a.currentStep(),a.stepsData())?(a.modemDeliveryStep.isSubmitting(!0),BELONG.accountSetup.submitOrder(c,a.submitModemDeliveryDone,a.submitModemDeliveryFail)):a.gotoNextStep()}}},a.submitModemDeliveryFail=function(){a.modemDeliveryStep.isSubmitting(!1),a.modemDeliveryStep.orderSubmitError(!0)},a.submitModemDeliveryDone=function(){a.modemDeliveryStep.isSubmitting(!1),a.modemDeliveryStep.orderSubmitError(!1),a.gotoNextStep(),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupSubmit",eventCategory:"Account-Setup",eventAction:"Button click",eventLabel:"Form submit",eventData:a.dataModel()})},a.getStepDataStore=function(){var a=sessionStorage.getItem("account-setup_modemdelivery_step");return a},a.saveStepDataStore=function(){var b=ko.mapping.toJS(a);delete b.accountSetupData,delete b.util,delete b.stepsData,delete b.dataModel,delete b.isCurrentStepValid,delete b.submitStep,sessionStorage.setItem("account-setup_modemdelivery_step",JSON.stringify(b))},a.summaryDataFilter=function(b){a.summaryData(a.summaryData.slice(0,b))},a.modemDeliveryStep.verifyCode.subscribe(function(){a.modemDeliveryStep.otpPinValid("")}),a.accountSetupData.subscribe(function(b){b.order.serviceAddress&&a.modemDeliveryStep.defaultDeliveryAddress(b.order.serviceAddress.fullAddress),b.order.customerMobile&&a.modemDeliveryStep.mobileNumber(b.order.customerMobile)}),a.modemDeliveryStep.mobileNumber.subscribe(function(){a.modemDeliveryStep.otpPinValid("")}),a.stepsData.subscribe(function(b){var c=a.getStepDataStore(),d={ignore:["submitStep","stepsData","dataModel","isCurrentStepValid","modemDeliveryStep.otpPinValid","modemDeliveryStep.deliveryAddressFull","modemDeliveryStep.errors"]};if(c)ko.mapping.fromJS($.parseJSON(c),d,a),a.summaryDataFilter(a.currentStep());else{var e=BELONG.accountSetup.getStepByName(b,"modemDeliveryStep");e&&(a.modemDeliveryStep.status(e.status()),a.modemDeliveryStep.order(e.order()))}a.validStepOnChange()}),a.init=function(){},a.afterRender=function(){BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect(),$("#mobile-number").on("keypress",function(b){var c=b.which||b.keyCode,d=b.target;return 13!==c||(d.blur(),void a.sendSMSCodeOnClick())}),$("#verify-code").on("keypress",function(b){var c=b.which||b.keyCode,d=b.target;return 13!==c||(d.blur(),void a.validateSMSCodeOnClick())})}}}(),function(){"use strict";BELONG.accountSetup=BELONG.accountSetup||{},BELONG.accountSetup.NbnStepVM=function(){var a,b,c,d,e,f,g,h=this,i=5,j=moment().add(i,"d"),k=6,l=moment().add(k,"M"),m="/bin/belong/auth/customer/appointment/available",n="/bin/belong/auth/customer/appointment";h.util=BELONG.util,h.accountSetupData=ko.observable().subscribeTo("accountSetupData",!0),h.stepsData=ko.observableArray().subscribeTo("stepsData",!0),h.summaryData=ko.observableArray().subscribeTo("summaryData",!0),h.dataModel=ko.observable({}).subscribeTo("dataModel",!0),h.currentStep=ko.observable("").subscribeTo("currentStep",!0),h.nbnStep={status:ko.observable(""),title:ko.observable("NBN Appointment"),appointmentDate:ko.observable("").publishOn("nbnAppointmentDate"),appointmentDateISO:ko.observable(""),appointmentTime:ko.observable("").publishOn("nbnAppointmentTime"),isSubmiting:ko.observable(!1),appointmentDateSelected:ko.observable(!1),order:ko.observable(""),orderSubmitError:ko.observable(!1)},h.nbnStep.order.subscribe(function(a){}),h.appointmentTimeLong=ko.computed(function(){switch(h.nbnStep.appointmentTime()){case"AM":return"8am - 12pm";case"PM":return"1pm - 5pm";default:return""}}),h.nbnStep.errors=ko.validation.group(h.nbnStep,{deep:!0}),h.loadingAvailable=ko.observable(!1),h.loadingAvailableError=ko.observable(!1),h.submitAppointmentError=ko.observable(!1),h.nbnRequestFail=function(b){var c="";g=!1,h.loadingAvailable(!1),h.loadingAvailableError(!0),a.close(),document.activeElement.blur(),c="timeout"===b.statusText?"ERROR_TIMEOUT":b.responseJSON,BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupNBNAppointmentLoadingAvailable",eventCategory:"Account-Setup",eventAction:"Load",eventLabel:"Click",eventError:c})},h.nbnRequestDone=function(a){a.success?(g=!1,h.updateCalendar(a.availableDates),h.loadingAvailable(!1),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupNBNAppointmentLoadingAvailable",eventCategory:"Account-Setup",eventAction:"Load",eventLabel:"Click",eventData:a.availableDates})):(h.nbnRequestFail(a),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupNBNAppointmentLoadingAvailable",eventCategory:"Account-Setup",eventAction:"Load",eventLabel:"Click",eventError:a}))},h.timeSelectDisabled=ko.observable(!1),h.disableAM=ko.observable(!1),h.disablePM=ko.observable(!1),h.setTime=function(a){h.timeSelectDisabled(!1),a.am&&a.pm?(h.nbnStep.appointmentTime(""),h.disablePM(!1),h.disableAM(!1)):a.am&&!a.pm?(h.nbnStep.appointmentTime("AM"),h.timeSelectDisabled(!0),h.disableAM(!1),h.disablePM(!0)):!a.am&&a.pm&&(h.nbnStep.appointmentTime("PM"),h.timeSelectDisabled(!0),h.disableAM(!0),h.disablePM(!1))},h.nbnAppointmentInit=function(){g=!0,$("#nbn-appointment-date").pickadate({min:j.toDate(),max:l.toDate(),onOpen:function(){g&&(h.loadingAvailable(!0),b=$.get(m,{checkAvailable:!0}),b.done(h.nbnRequestDone),b.fail(h.nbnRequestFail))},onClose:function(){var b=this.get("select","yyyy-mm-dd");b?(h.nbnStep.appointmentDate(moment(b).format("dddd, DD MMMM, YYYY")),h.nbnStep.appointmentDateISO(b)):(h.nbnStep.appointmentDate(""),h.nbnStep.appointmentDateISO(""));var d=a.get("select","dd/mm/yyyy"),e=0;if(c)for(e;e<c.length;e+=1)if(d===c[e].date){h.setTime(c[e]);break}}}),a=$("#nbn-appointment-date").pickadate("picker")},h.updateCalendar=function(b){var g,h,k;for(c=b,k=0,d=[],e=[],k;k<b.length;k+=1)d.push(moment(b[k].date,"DD-MM-YYYY").toDate()),k===b.length-1&&(f=moment(b[k].date,"DD-MM-YYYY").add(1,"d"));for(a.set("disable",[{from:f.toDate(),to:l.toDate()}]),k=0,g=f.diff(j,"days")+1,k;k<g;k+=1)h=moment().add(i,"d"),e.push(h.add(k,"d").toDate());a.set("disable",e),a.set("enable",d)},h.shortCodeDecode=function(a){return h.util.stringReplacePlaceholderCopy(a,[{placeholder:"$$nbnStep.appointmentDate$$",replacement:h.nbnStep.appointmentDate()},{placeholder:"$$appointmentTimeLong$$",replacement:h.appointmentTimeLong()}])},h.initValidation=function(){h.nbnStep.appointmentDate.extend({required:!0}),h.nbnStep.appointmentTime.extend({required:!0})},h.initValidation(),h.isCurrentStepValid=function(){if(h.currentStep()===h.nbnStep.order())return 0===h.nbnStep.errors().length},h.submitStep={btnState:ko.computed(function(){var a="";return a=h.nbnStep.isSubmiting()?"loading":h.isCurrentStepValid()?"":"disabled"}),btnText:ko.observable("NEXT STEP")},h.updateDataModel=function(){var a=h.dataModel();return a.appointmentDate=h.nbnStep.appointmentDateISO(),a.appointmentTimeslot=h.nbnStep.appointmentTime(),a.nbnSummary=h.shortCodeDecode(ACCOUNT_SETUP_CMS_DATA.COPY.nbnStep.summary),ko.postbox.publish("dataModel",a),a},h.gotoNextStep=function(){h.saveStepDataStore(),h.summaryData.push(h.shortCodeDecode(ACCOUNT_SETUP_CMS_DATA.COPY.nbnStep.summary)),ko.postbox.publish("summaryData",h.summaryData()),ko.postbox.publish("currentStep",h.currentStep()+1)},h.submitNBNDone=function(){h.nbnStep.orderSubmitError(!1),h.gotoNextStep(),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupSubmit",eventCategory:"Account-Setup",eventAction:"Button click",eventLabel:"Form submit",eventData:h.dataModel()})},h.submitNBNFail=function(){h.nbnStep.isSubmiting(!1),h.nbnStep.orderSubmitError(!0)},h.submitNBNPreferenceDone=function(a){h.submitAppointmentError(!1),h.nbnStep.appointmentDateSelected(!0),h.timeSelectDisabled(!0),h.disableAM(!0),h.disablePM(!0),BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupNBNAppointmentSubmit",eventCategory:"Account-Setup",eventAction:"Submit",eventLabel:"Next Step",eventData:a})},h.submitNBNPreferenceFail=function(a){var b="";h.submitAppointmentError(!0),b="timeout"===a.statusText?"ERROR_TIMEOUT":a.responseJSON,BELONG.adobeAnalytics.customDataEvent({eventType:"accountSetupNBNAppointmentSubmit",eventCategory:"Account-Setup",eventAction:"Submit",eventLabel:"Next Step",eventError:b})},h.submitStepClick=function(){if("disabled"!==h.submitStep.btnState()&&"loading"!==h.submitStep.btnState()){var a=h.isCurrentStepValid();if(a){var b=null;h.nbnStep.appointmentDateSelected()?(h.nbnStep.isSubmiting(!0),h.nbnStep.orderSubmitError(!1),b=BELONG.accountSetup.submitOrder(h.updateDataModel(),h.submitNBNDone,h.submitNBNFail),b.always(function(){h.nbnStep.isSubmiting(!1)})):(h.nbnStep.isSubmiting(!0),b=$.post(n,{date1:h.nbnStep.appointmentDateISO(),time1:h.nbnStep.appointmentTime()}),b.then(h.submitNBNPreferenceDone,h.submitNBNPreferenceFail).then(function(){h.nbnStep.isSubmiting(!0),BELONG.accountSetup.submitOrder(h.updateDataModel(),h.submitNBNDone,h.submitNBNFail)}))}}},h.getStepDataStore=function(){var a=sessionStorage.getItem("account-setup_nbn_step");return a},h.saveStepDataStore=function(){var a=ko.mapping.toJS(h);delete a.accountSetupData,delete a.util,delete a.stepsData,delete a.dataModel,delete a.isCurrentStepValid,delete a.appointmentTimeLong,delete a.submitStep,sessionStorage.setItem("account-setup_nbn_step",JSON.stringify(a))},h.summaryDataFilter=function(a){h.summaryData(h.summaryData.slice(0,a))},h.currentStep.subscribe(function(){}),h.stepsData.subscribe(function(a){var b=h.getStepDataStore(),c={ignore:["appointmentTimeLong","submitStep","stepsData","isCurrentStepValid","nbnStep.isSubmiting","nbnStep.errors","appointmentTimeLong"]};if(b)ko.mapping.fromJS($.parseJSON(b),c,h),h.summaryDataFilter(h.currentStep());else{var d=BELONG.accountSetup.getStepByName(a,"nbnStep");d&&(h.nbnStep.status(d.status()),h.nbnStep.order(d.order()))}}),h.init=function(){h.nbnStep.errors=ko.validation.group(h.nbnStep,{deep:!0})},h.afterRender=function(){h.nbnAppointmentInit()}}}(),function(){"use strict";BELONG.accountSetup=BELONG.accountSetup||{},BELONG.accountSetup.SubmitStepVM=function(){var a=this,b="/bin/belong/auth/customer/setup/submit/survey";a.util=BELONG.util,a.accountSetupData=ko.observable().subscribeTo("accountSetupData",!0),a.stepsData=ko.observableArray().subscribeTo("stepsData",!0),a.summaryData=ko.observableArray().subscribeTo("summaryData",!0),a.dataModel=ko.observable({}).subscribeTo("dataModel",!0),a.isAgent=ko.observable(BELONG.GD.isAgent),a.currentStep=ko.observable("").subscribeTo("currentStep",!0),a.submitStep={status:ko.observable(""),title:ko.observable("Review and Submit"),order:ko.observable(""),isSubmitting:ko.observable(!1)},a.finalSubmitError=ko.observable(!1),a.submitStep.unableProceed=ko.computed(function(){return!(!a.dataModel()||"UNABLE_TO_PROCEED_HOUSEMATE_KEEP_SERVICE"!==a.dataModel().inplaceOrderType&&"UNABLE_TO_PROCEED_ADDRESS_NOT_SERVICEABLE"!==a.dataModel().inplaceOrderType)}),a.submitStep.mobileNumber=ko.computed(function(){return a.dataModel()?a.dataModel().mobile:""}),a.submitStep.deliveryAddress=ko.computed(function(){return a.dataModel()&&a.dataModel().newModemDeliveryAddress?a.dataModel().modemDeliveryAddress1+" "+a.dataModel().modemDeliveryAddress2+", "+a.dataModel().modemDeliverySuburb+" "+a.dataModel().modemDeliveryState+" "+a.dataModel().modemDeliveryPostcode:""}),a.submitStep.appointmentDate=ko.computed(function(){return a.dataModel()?a.dataModel().appointmentDate||"":""}),a.submitStep.appointmentTimeslot=ko.computed(function(){return a.dataModel()?a.dataModel().appointmentTimeslot||"":""}),a.submitStep.moveInDate=ko.computed(function(){return a.dataModel()?a.dataModel().moveInDate||"":""}),a.submitStep.adslSummary=ko.computed(function(){return a.dataModel()?a.dataModel().adslSummary||"":""}),a.submitStep.nbnSummary=ko.computed(function(){return a.dataModel()?a.dataModel().nbnSummary||"":""}),a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$deliveryAddress$$",replacement:a.submitStep.deliveryAddress()},{placeholder:"$$mobile$$",replacement:a.submitStep.mobileNumber()},{placeholder:"$$appointmentDate$$",replacement:a.submitStep.appointmentDate()},{placeholder:"$$appointmentTimeslot$$",replacement:a.submitStep.appointmentTimeslot()},{placeholder:"$$moveInDate$$",replacement:a.submitStep.moveInDate()}])},a.submitButton={btnState:ko.computed(function(){var b="";return a.submitStep.isSubmitting()&&(b="loading"),b}),btnText:ko.observable("FINISH SETUP")},a.submitStepClick=function(){if("disabled"!==a.submitButton.btnState()&&"loading"!==a.submitButton.btnState()){a.submitStep.isSubmitting(!0);var c=a.dataModel();delete c.adslSummary,delete c.nbnSummary;var d=$.post(b,ko.mapping.toJS(c));d.then(a.submitDone,a.submitFail)}},a.submitDone=function(){a.finalSubmitError(!1);for(var b in sessionStorage)(b.indexOf("account-setup")>-1||b.indexOf("-step")>-1)&&sessionStorage.removeItem(b);window.location="/account?setup=complete"},a.submitFail=function(){a.finalSubmitError(!0),a.submitStep.isSubmitting(!1)},a.getStepDataStore=function(){var a=sessionStorage.getItem("account-setup_submit_step");return a},a.saveStepDataStore=function(){var b=ko.mapping.toJS(a);sessionStorage.setItem("account-setup_submit_step",JSON.stringify(b))},a.summaryDataFilter=function(b){a.summaryData(a.summaryData.slice(0,b))},a.stepsData.subscribe(function(b){var c=a.getStepDataStore(),d={ignore:["submitButton","stepsData","dataModel","finalSubmitError","submitStep.errors"]};if(c)ko.mapping.fromJS($.parseJSON(c),d,a),a.summaryDataFilter(a.currentStep());else{var e=BELONG.accountSetup.getStepByName(b,"submitStep");e&&(a.submitStep.status(e.status()),a.submitStep.order(e.order()))}}),a.init=function(){},a.afterRender=function(){BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect()}}}(),function(){"use strict";BELONG.accountSetup=BELONG.accountSetup||{},BELONG.accountSetup.SurveyStepVM=function(){var a=this;a.util=BELONG.util,a.accountSetupData=ko.observable().subscribeTo("accountSetupData",!0),a.stepsData=ko.observableArray().subscribeTo("stepsData",!0),a.summaryData=ko.observableArray().subscribeTo("summaryData",!0),a.dataModel=ko.observable({}).subscribeTo("dataModel",!0),a.currentStep=ko.observable("").subscribeTo("currentStep",!0),a.surveyStep={status:ko.observable(""),title:ko.observable("Customer Survey"),order:ko.observable(""),surveyGroup0:ko.observable(""),surveyGroup1:ko.observable(""),surveyGroup2:ko.observable(""),isSubmitting:ko.observable(!1)},a.surveyStep.errors=ko.validation.group(a.surveyStep,{deep:!0}),a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[])},a.initValidation=function(){a.surveyStep.surveyGroup0.extend({required:!1}),a.surveyStep.surveyGroup1.extend({required:!1}),a.surveyStep.surveyGroup2.extend({required:!1})},a.initValidation(),a.isCurrentStepValid=function(){if(a.currentStep()===a.surveyStep.order())return 0===a.surveyStep.errors().length},a.submitStep={btnState:ko.computed(function(){var b="";return b=a.surveyStep.isSubmitting()?"loading":a.isCurrentStepValid()?"":"disabled"}),btnText:ko.observable("NEXT STEP")},a.submitStepClick=function(){if("disabled"!==a.submitStep.btnState()&&"loading"!==a.submitStep.btnState()){var b=a.isCurrentStepValid(),c=a.dataModel();b&&(a.saveStepDataStore(),c.newCustomerWhyDidYouChoose=a.surveyStep.surveyGroup0(),c.newCustomerSource=a.surveyStep.surveyGroup1(),c.newCustomerPreviousProvider=a.surveyStep.surveyGroup2(),ko.postbox.publish("dataModel",c),a.summaryData.push(a.shortCodeDecode(ACCOUNT_SETUP_CMS_DATA.COPY.surveyStep.summary)),ko.postbox.publish("summaryData",a.summaryData()),ko.postbox.publish("currentStep",a.currentStep()+1))}},a.getStepDataStore=function(){var a=sessionStorage.getItem("account-setup_survey_step");return a},a.saveStepDataStore=function(){var b=ko.mapping.toJS(a);delete b.accountSetupData,delete b.util,delete b.stepsData,delete b.dataModel,delete b.isCurrentStepValid,delete b.submitStep,sessionStorage.setItem("account-setup_survey_step",JSON.stringify(b))},a.summaryDataFilter=function(b){a.summaryData(a.summaryData.slice(0,b))},a.stepsData.subscribe(function(b){var c=a.getStepDataStore(),d={ignore:["submitStep","stepsData","dataModel","isCurrentStepValid","surveyStep.errors"]};if(c)ko.mapping.fromJS($.parseJSON(c),d,a),a.summaryDataFilter(a.currentStep());else{var e=BELONG.accountSetup.getStepByName(b,"surveyStep");e&&(a.surveyStep.status(e.status()),a.surveyStep.order(e.order()))}}),a.init=function(){a.surveyStep.errors=ko.validation.group(a.surveyStep,{deep:!0})},a.afterRender=function(){BELONG.forms.applyShiftLabel(),BELONG.forms.simpleSelect()}}}(),function(a){"use strict";a.agentTermsModal=a.agentTermsModal||{},$.extend(a.agentTermsModal,function(){var b;return{init:function(){if(b=this,0===$("#mdl-agent-terms").length)return!1;var c=new b.ViewModel;ko.applyBindings(c,document.getElementById("mdl-agent-terms")),a.agentTermsVM=ko.contextFor(document.getElementById("mdl-agent-terms")).$data},ViewModel:function(){var b=this;b.productClasses=ko.observable(),b.setupTermsToDisplay=function(a){var c="CHURN_ORDER"===a.sq.orderType&&"DSL"===a.product.planType,d="CHURN_ORDER"===a.sq.orderType&&"BUNDLE"===a.product.planType,e="PORT_ORDER"===a.sq.orderType;b.productClasses({"show-product-nbn":"NBN"===a.product.planType,"show-product-adsl-bundle":"BUNDLE"===a.product.planType,"show-product-adsl-dsl":"DSL"===a.product.planType,"show-contract-12":"SIX_MONTHS"===a.product.contractTerm||"TWELVE_MONTHS"===a.product.contractTerm,"show-m2m":"SIX_MONTHS"!==a.product.contractTerm&&"TWELVE_MONTHS"!==a.product.contractTerm,"show-speedboost-25-5":"25/5"===a.product.planSpeed,"show-speedboost-100-40":"100/40"===a.product.planSpeed,"show-voice-national":"NATIONAL"===a.product.voicePlan,"show-voice-international":"INTERNATIONAL"===a.product.voicePlan,"show-voice-both":"BOTH"===a.product.voicePlan,"show-core-network":!a.sq.extendedNetwork,"show-extended-exchange":a.sq.extendedNetwork,"show-ndc-upfront":a.sq.isNdcAddress&&a.product.ndcUpfrontOption,"show-ndc-monthly":a.sq.isNdcAddress&&!a.product.ndcUpfrontOption,"hide-ndc":!a.sq.isNdcAddress,"show-fttn-fttb":"FTTN"===a.sq.broadbandTechType||"FTTB"===a.sq.broadbandTechType,"show-data-100":"Regular"===a.product.planSize,"show-data-500":"Large"===a.product.planSize,"show-data-1000":"ExtraLarge"===a.product.planSize,"show-data-unlimited":"Unlimited"===a.product.planSize,"show-transfer-dsl":c,"show-transfer-phone":e,"show-transfer-churn-bundle":d,"show-next-steps-adsl-transfer":c||e||d,"show-next-steps-adsl-non-transfer":"NBN"!==a.product.planType&&!c&&!e&&!d,"show-next-steps-nbn":"NBN"===a.product.planType,"show-outbound-agent":BELONG.agents.methods.isOutboundAgent()})},b.acceptTerms=function(b,c){a.join.personal.events.onContinue(c),$.magnificPopup.proto.close.call(this)},b.cancelTerms=function(){$.magnificPopup.proto.close.call(this)}},open:function(b){b.closeCallBack=b.closeCallBack||function(){},b.openCallBack=b.openCallBack||function(){},b.joinModel=b.joinModel||a.agentTermsVM.testModel4,$.magnificPopup.open({items:{src:"#mdl-agent-terms",type:"inline"},alignTop:!0,showCloseBtn:!1,closeOnBgClick:!1,enableEscapeKey:!1,overflowY:"auto",callbacks:{open:function(){a.belongModal.setupAutoResize({modalContainer:$("#mdl-agent-terms"),nameSpace:"modalAutoResizeAgentTerms"}),a.agentTermsVM.setupTermsToDisplay(b.joinModel),
b.openCallBack()},close:function(){b.closeCallBack()}}})}}}())}(BELONG),function(a){"use strict";a.callbackForm={init:function(){return 0!==$("#callback-form").length&&void ko.applyBindings(new a.callbackForm.callbackFormViewModel,document.getElementById("callback-form-container"))}},a.callbackForm.callbackFormViewModel=function(){var b=this;b.prospectName=ko.observable(""),b.emailAddress=ko.observable(""),b.phoneNumber=ko.observable(""),b.callbackTime=ko.observable("AM"),b.showForm=ko.observable(!0),b.showSubmitSuccess=ko.observable(!1),b.showSubmitFail=ko.observable(!1),b.callbackValidator=null,b.setupFormValidation=function(){var c={rules:{"callback-form-propsect-name":{required:!0,disallowedCharacters:!0,maxlength:255},"callback-form-prospect-email-address":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255},"callback-form-prospect-phone-number":{required:!0,australianMobileOrLandlineNumber:!0}}},d="callback-form";b.callbackValidator=a.validation.setupFormValidation(d,$("."+d),c)},b.submit=function(){var c=a.validation.validateForm(b.callbackValidator);if(c!==!1){var d={customerName:b.prospectName(),customerEmail:b.emailAddress(),customerPhoneNumber:b.phoneNumber(),timePreference:b.callbackTime()},e="/bin/belong/customer/callback";BELONG.DEVSWITCH===!0&&(e="/bin/belong/customer/callback?success"),$.post(e,d).done(function(){a.adobeAnalytics.pages.callbackForm.submit(b.callbackTime()),b.showForm(!1),b.showSubmitSuccess(!0)}).fail(function(){b.showForm(!1),b.showSubmitFail(!0)}).always(function(){b.scrollToCallbackContainer()})}},b.scrollToCallbackContainer=function(){var a=$("#callback-form-container").offset().top-200;$("html, body").animate({scrollTop:a},500)},function(){b.setupFormValidation()}()}}(BELONG),function(a){"use strict";a.chatPopup=a.chatPopup||{},$.extend(a.chatPopup,function(){var b,c,d,e,f,g,h,i,j,k,l="prechatForm",m="open",n="bc-blue",o="chat-connected",p=!1,q=null,r="liveagentSessionId",s=1,t=null;return{init:function(){var n;return b=this,0!==$("#chat-popup").length&&("www.belong.com.au"===window.location.host?(c="https%3A%2F%2Fd.la10.salesforceliveagent.com%2Fcontent%2Fs%2Fchat%3Flanguage%3Den_US%23deployment_id%3D57228000000PDu1%26org_id%3D00D280000012oCH%26button_id%3D57328000000PE8Z%26session_id%3D",j="57328000000PE8Z"):(c="https%3A%2F%2Fd.la9cs.salesforceliveagent.com%2Fcontent%2Fs%2Fchat%3Flanguage%3Den_US%23deployment_id%3D572p00000008ORq%26org_id%3D00Dp0000000Cvse%26button_id%3D573p00000008OX0%26session_id%3D",j="573p00000008OX0"),e=document.getElementById("chat-popup"),f=document.getElementById("nav-chat"),g=document.getElementById("header-chat"),d=new b.ViewModel,ko.applyBindings(d,e),n={ignore:"",rules:{"liveagent-first-name":{required:!0,disallowedCharacters:!0,maxlength:255},"liveagent-last-name":{required:!0,disallowedCharacters:!0,maxlength:255},"liveagent-email":{required:!1,backendEmail:!0,disallowedCharacters:!0,maxlength:255}}},k=a.validation.setupFormValidation(l,$("#"+l),n),$(".fn__open-chat-popup").off("click").on("click",function(){b.toggleOpen()}),$(".fn__focus-chat").off("click").on("click",function(){b.focusChat()}),$(".fn__liveagent-change-value").change(function(a){BELONG.adobeAnalytics.pages.liveagentChat.chatFormInputChanged(a.target.id)}),t=sessionStorage.getItem("liveagentChatWindowStatus"),"open"===t&&(h=liveagent.getSid(),i="belong_liveagent"+h,q=window.open("",i),window.focus(),$.isEmptyObject(q.location)?(b.toggleChatConnected(!0),b.setChatWindowInterval()):(q.close(),t="closed",sessionStorage.setItem("liveagentChatWindowStatus",t))),void $(document).on("click",function(a){e.classList.contains(m)&&($(a.target).closest(".fn__open-chat-popup").length||$(a.target).closest("#chat-popup").length||b.toggleOpen())}))},toggleOpen:function(a){var c,h;c="undefined"==typeof a||"boolean"!=typeof a||a,f.classList.toggle(n),g.classList.toggle(n),e.classList.toggle(m),e.classList.contains(m)?(p||(p=!0,b.configureChatForm()),h=d.connected()?"Reopened":"Opened"):h="Closed",c&&BELONG.adobeAnalytics.pages.liveagentChat.toggleChatModal(h)},toggleChatConnected:function(a){f.classList.toggle(o),g.classList.toggle(o),a?(d.connected(!0),BELONG.adobeAnalytics.pages.liveagentChat.toggleChatConnection("Opened")):(d.connected(!1),BELONG.adobeAnalytics.pages.liveagentChat.toggleChatConnection("Closed"))},setChatCookie:function(a){var b,c,d;document.cookie.indexOf(r)===-1&&(b=new Date,c=b.getTime(),d=c+864e5*s,b.setTime(d),document.cookie=r+"="+a+";expires="+b.toGMTString()+";")},setChatWindowInterval:function(){t="open";var a=setInterval(function(){q.closed&&(t="closed",b.toggleChatConnected(!1),clearInterval(a))},200);$(window).unload(function(){sessionStorage.setItem("liveagentChatWindowStatus",t)})},configureChatForm:function(){var e,f;h=liveagent.getSid(),d.sessionId(h),e=decodeURIComponent(c+h),f=document.getElementById("prechatForm"),f.setAttribute("action",e),i="belong_liveagent"+h,f.setAttribute("target",i),$("#prechatForm").submit(function(){var c=a.validation.validateForm(k);c!==!1&&($("#liveagent-chatInitiatedFrom").val(window.location.href),liveagent.startChatWithWindow(j,i),q=window.open("",i),b.toggleOpen(!1),b.toggleChatConnected(!0),b.setChatCookie(h),window.setTimeout(b.setChatWindowInterval(),1e3))})},focusChat:function(){BELONG.adobeAnalytics.pages.liveagentChat.returnToChat(),q.focus()},ViewModel:function(){var a=this;a.connected=ko.observable(!1),a.firstName=ko.observable(""),a.lastName=ko.observable(""),a.email=ko.observable(""),a.sessionId=ko.observable(""),a.belongCustomer=ko.observable(!1),a.belongCustomer.subscribe(function(b){b===!1&&(a.email(""),$("#liveagent-email").blur())}),a.showCallButtonValue=ko.observable(!1),a.showCallButton=function(){a.showCallButtonValue()===!1&&BELONG.adobeAnalytics.pages.liveagentChat.chatPhoneButton("Reveal"),a.showCallButtonValue(!0)},a.callButtonClick=function(){return BELONG.adobeAnalytics.pages.liveagentChat.chatPhoneButton("Call"),!0}}}}())}(BELONG),function(a){"use strict";a.compareModule={init:function(){var b="compare-module";return 0!==$("#"+b).length&&void ko.applyBindings(new a.belongTabPanel(b,!0),document.getElementById(b))}}}(BELONG),function(a){"use strict";a.feedbackForm={init:function(){return 0!==$("#feedback-form-container").length&&(ko.applyBindings(new a.feedbackForm.feedbackViewModel,document.getElementById("feedback-form-container")),a.forms.applyShiftLabel(),void a.forms.applyAutoGrowTextarea())}},a.feedbackForm.feedbackViewModel=function(){var b=this,c=$("#feedback-response-1-label").text(),d=$("#feedback-response-3-label").text();b.feedbackResponse=ko.observable(""),b.feedbackRatingYes=ko.observable(""),b.feedbackRatingNo=ko.observable(""),b.commentYes=ko.observable(""),b.commentNo=ko.observable(""),b.showForm=ko.observable(!0),b.showDetails=ko.observable(""),b.showSubmitInvalid=ko.observable(!1),b.showSubmitSuccess=ko.observable(!1),b.showSubmitFail=ko.observable(!1),b.feedbackResponse.subscribe(function(){b.showSubmitInvalid(!1)}),b.feedbackValidator=null,b.getQueryVariable=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]===a)return e[1]}return!1},b.setupFormValidation=function(){var c={rules:{"feedback-scale1-option":{required:!0},"feedback-scale2-option":{required:!0},"feedback-comment-yes":{required:!0,disallowedCharacters:!0,maxlength:300},"feedback-comment-no":{required:!0,disallowedCharacters:!0,maxlength:300}},messages:{"feedback-comment-yes":{required:"This field is required",maxlength:"Please enter less than 300 characters",disallowedCharacters:"This field cant include some of those characters."},"feedback-comment-no":{required:"This field is required",maxlength:"Please enter less than 300 characters",disallowedCharacters:"This field cant include some of those characters."}}},d="feedback-form";b.feedbackValidator=a.validation.setupFormValidation(d,$("."+d),c)},b.btnState=ko.observable("active"),b.submit=function(){var e=a.validation.validateForm(b.feedbackValidator);if(e===!1)return void b.showSubmitInvalid(!0);var f,g,h,i,j;"1"===b.feedbackResponse()?(g=c,h=b.feedbackRatingYes(),f=b.commentYes()):"3"===b.feedbackResponse()&&(g=d,h=b.feedbackRatingNo(),f=b.commentNo()),i=b.getQueryVariable("trigger"),j=b.getQueryVariable("source"),i||(i=""),j||(j=window.location.href);var k={customerFeedback:g,customerFeedbackRating:h,customerFeedbackComment:f,feedbackTrigger:i,feedbackSource:j},l="/bin/belong/auth/customer/survey/feedback";b.btnState("loading");var m=$.post(l,k);m.always(function(){b.showForm(!1),b.btnState("active")}),m.done(function(){b.showSubmitSuccess(!0),setTimeout(function(){$(".info-title.success").velocity("scroll",{offset:-120})},10)}),m.fail(function(){b.showSubmitFail(!0)})},function(){b.setupFormValidation()}()}}(BELONG),function(a){"use strict";a.genericInformationModal={init:function(){this.findAndBindPageLinks(),this.openModalForUrlHash()},findAndBindPageLinks:function(){var a=$(".generic-information-modal");a.each(function(){var a=$(this),b=a.attr("id"),c=$('[href="#'+b+'"]');c.off("click.genericInformationModal").on("click.genericInformationModal",function(){return BELONG.genericInformationModal.openModal(b),!1})})},openModalForUrlHash:function(){var a=window.location.hash;if(a){a=a.replace("#","");var b=$("#"+a+".generic-information-modal ");b.length>0&&BELONG.genericInformationModal.openModal(a)}},openModal:function(a){$.magnificPopup.open({items:{src:"#"+a,type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,overflowY:"auto",callbacks:{open:function(){BELONG.belongModal.setupAutoResize({modalContainer:$("#"+a),nameSpace:"modalAutoResize"+a});var b=".belong-modal__body";BELONG.modalAnalytics.activate(a,b)},close:function(){BELONG.modalAnalytics.close()}}}),$("#"+a+" .belong-modal__continue-link").off("click.close"+a).on("click.close"+a,function(a){a.preventDefault(),BELONG.modalAnalytics.ctaClicked(),$.magnificPopup.proto.close.call(this)})}}}(BELONG),function(){"use strict";var a="/bin/belong/auth/customer/activity/history",b=12;BELONG.interactionHistory=BELONG.interactionHistory||{},$.extend(BELONG.interactionHistory,function(){return{init:function(){var a=new this.ViewModel;return 0!==$("#cmp-interaction-history").length&&(ko.applyBindings(a,document.getElementById("cmp-interaction-history")),void a.init())},ViewModel:function(){function c(c,f){var g;d.isLoading(!0),g=$.get(a,{offsetNumber:c,size:b,filterTypes:"SMS,Email"}),g.done(function(a){var b,c,g=[];for(e=a.totalSize,a.interactionHistoryList.length<1&&d.isEmpty(!0),b=0;b<a.interactionHistoryList.length;b++)c=a.interactionHistoryList[b],c.description=c.description.replace(/<\/?span[^>]*>/g,"").replace(/<p><br><\/p>/g,""),c.previewDescription=c.description.replace(/<[^>]*>?/g,"").replace(/&nbsp;/g," ").substring(0,100)+"...",g.push(c);d.interactionHistory(d.interactionHistory().concat(g)),f&&f(),d.isLoading(!1)}),g.fail(function(){d.isError(!0)}),g.always(function(){d.isLoading(!1)})}var d=this,e=0;d.interactionHistory=ko.observableArray(),d.detailItem=ko.observable(),d.isLoading=ko.observable(!0),d.isError=ko.observable(!1),d.isEmpty=ko.observable(!1),d.isShowMore=ko.computed(function(){return d.interactionHistory().length<e}),d.init=function(){c(0)},d.showDetail=function(a){d.detailItem(a),BELONG.genericInformationModal.openModal("detailModal")},d.showMoreActivities=function(){c(d.interactionHistory().length)}}}}())}(),function(a){"use strict";a.forms=a.forms||{},a.forms.date=function(){var a,b=new Date,c=b.getFullYear();return{init:function(){a=this,$(".date-dropdown").each(function(){var b=$(this);b.find("select").each(function(){$(this).on("change",a.events.onUpdate)})})},methods:{setYearsForDob:function(a){for(var b=c-17;b>c-100;b-=1)a.append('<option value="'+b+'">'+b+"</option>")},checkLeapYear:function(a){return 0!==a&&(a%4===0&&(a%100!==0||a%400===0))},selectDay:function(a,b){var c=b;1==a.length&&(a="0"+a),c.find('option[value="'+a+'"]').attr("selected","selected").prop("selected",!0),c.closest(".simple-select").find(".simple-label").text(a)}},events:{onUpdate:function(){var a=$(this),b=a.closest(".date-dropdown").find('select[id$="day"]'),c=a.closest(".date-dropdown").find('select[id$="month"]'),d=a.closest(".date-dropdown").find('select[id$="year"]'),e=a.closest(".date-dropdown").find("input"),f=b.find("option:selected").val(),g=c.find("option:selected").val(),h=d.find("option:selected").val(),i=(parseInt(g,10),""!==h?parseInt(d.find("option:selected").val(),10):""),j=f+"/"+g+"/"+i;e.val(j)}}}}()}(BELONG),function(a){"use strict";a.join=a.join||{},a.join.cisModal=function(){var b;return{init:function(){b=this,this.bindCisModalOpenTrigger(),b.bindCustomerTermsModalOpenTrigger()},setJoinModelFromStorage:function(){var b=JSON.parse(sessionStorage.getItem("productModel"));a.join.model.product.planType=b.planType,a.join.model.product.planSize=b.planSize,a.join.model.product.contractTerm=b.contractTerm,a.join.model.product.speedBoost=""!==b.planSpeed,a.join.model.product.planSpeed=b.planSpeed,a.join.model.product.voicePlan=b.voicePlan,a.join.model.product.promotionId=b.promotionId},bindCisModalOpenTrigger:function(){var c=$(".join-cis-modal"),d=c.attr("id"),e=$('[href="#'+d+'"]');e.off("click.cisModal").on("click.cisModal",function(){return""===a.join.model.product.planType&&b.setJoinModelFromStorage(),b.openModal(d,b.configureCisModalContent()),a.adobeAnalytics.pages.join.trackPayment($(this).text()),!1})},bindCustomerTermsModalOpenTrigger:function(){var c=$(".join-customer-terms-modal"),d=c.attr("id"),e=$('[href="#'+d+'"]');e.off("click.customerTermsModal").on("click.customerTermsModal",function(){return b.openModal(d),a.adobeAnalytics.pages.join.trackPayment($(this).text()),!1})},openModal:function(a,b){"function"==typeof b&&b(),$.magnificPopup.open({items:{src:"#"+a,type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,overflowY:"auto",callbacks:{open:function(){BELONG.belongModal.setupAutoResize({modalContainer:$("#"+a),nameSpace:"modalAutoResize"+a})},close:function(){}}}),$("#"+a+" .belong-modal__continue-link").off("click.close"+a).on("click.close"+a,function(a){a.preventDefault(),$.magnificPopup.close();var b=$(".join-form-container");b.animate({scrollTop:$(".join-cis").offset().top-b.offset().top+b.scrollTop()})})},configureCisModalContent:function(){var b=a.join.model.product,c=a.join.model.sq.extendedNetwork;a.join.model.sq.ndc;$("#join-cis-modal-adsl-broadband-standard").addClass("hidden"),$("#join-cis-modal-adsl-broadband-extended").addClass("hidden"),$("#join-cis-modal-adsl-bundle-standard").addClass("hidden"),$("#join-cis-modal-adsl-bundle-extended").addClass("hidden"),$("#join-cis-modal-nbn").addClass("hidden"),$("#join-cis-modal-voice").addClass("hidden"),"DSL"==b.planType?c===!1?$("#join-cis-modal-adsl-broadband-standard").removeClass("hidden"):$("#join-cis-modal-adsl-broadband-extended").removeClass("hidden"):"BUNDLE"===b.planType?c===!1?$("#join-cis-modal-adsl-bundle-standard").removeClass("hidden"):$("#join-cis-modal-adsl-bundle-extended").removeClass("hidden"):"NBN"===b.planType&&$("#join-cis-modal-nbn").removeClass("hidden"),"NATIONAL"!==b.voicePlan&&"INTERNATIONAL"!==b.voicePlan&&"BOTH"!==b.voicePlan||$("#join-cis-modal-voice").removeClass("hidden")}}}()}(BELONG),function(a){"use strict";a.join=a.join||{},a.join.model={sq:{accessType:"",defaultSize:"",phoneNumber:"",serviceAddressId:"",serviceExchange:"",serviceStreetNumber:"",serviceStreet:"",serviceStreetType:"",serviceSuburb:"",serviceState:"",servicePostcode:"",serviceSubAddressDetails:"",isNbn:!1,orderType:"",isPreprovisioned:!1,promotionId:"",broadbandTechType:"",extendedNetwork:!1},product:{planType:"",planSize:"",planSpeed:"",contractTerm:null,voicePlan:"",promotionId:"",promotionStaffId:"",staffPromoSavedInSession:!1},personalDetails:{firstName:"",lastName:"",email:"",password:"",dateOfBirth:"",mobilePhone:"",portCurrentAccountNumber:"",portCurrentProvider:"",portNameOnBill:""},CIS:{agreementChecked:!1,portAgreementChecked:!1},payconfirm:{clientToken:null,paymentType:"CreditCard",paymentDetails:{},nonce:"",agreementChecked:!1,portAgreementChecked:!1},helpers:{getAddressString:function(){var b=a.join.model.sq;return b.serviceSubAddressDetails+" "+b.serviceStreetNumber+" "+b.serviceStreet+" "+b.serviceStreetType+" "+b.serviceSuburb+", "+b.serviceState+", "+b.servicePostcode}}}}(BELONG),function(a){"use strict";a.join=a.join||{},a.join.payconfirm=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n="join-payconfirm",o="join-cis-form",p="payment-form-creditcard",q="join-paypal-container";return{init:function(){return b=this,c=$("#payconfirm-section-header"),d=$("#payconfirm-section-footer"),h=$("#join-payconfirm-submit"),e=$("#"+n),g=$(".cis-section"),f=$(".port-agreement-section"),i=$("#join-cis-acceptChk"),j=$("#join-cis-portChk"),k=$("#GlobalData"),i.off("click.cis").on("click.cis",b.events.checkAgreement),j.off("click.cis").on("click.cis",b.events.checkPortingAgreement),$("#join-payconfirm-zpl-continue").off("click.cis").on("click.cis",b.events.onLogin),l=a.validation.setupFormValidation(o,$("#"+o),{rules:{"credit-card-name":{required:!0,disallowedCharacters:!0,maxlength:255},"join-cis-portChk":{required:!0},"join-cis-acceptChk":{required:!0}},errorPlacement:function(a,b){a.appendTo(b.parent())}}),0!==$("#join-payconfirm").length&&(m=new b.paymentViewModel,ko.applyBindings(m,document.getElementById("join-payconfirm")),void m.init())},paymentViewModel:function(){var c={CREDITCARD:"CREDITCARD",PAYPAL:"PAYPAL"},e=this;e.createOrderError=!1,e.clientToken=ko.observable(),e.selectedPayment=ko.observable(),e.paymentError=ko.observableArray(),e.invalidCardType=ko.observable(),e.invalidCardHolderName=ko.observable(),e.creditCardErrorList=ko.observableArray(),e.cardHolderName=ko.observable(),e.selectedPayment.subscribe(function(a){e.changePayment(a)}),e.cardHolderName.subscribe(function(){e.cardHolderNameValidation()}),e.updateClientToken=function(a){e.clientToken(a),e.init()},e.init=function(){e.clientToken()&&e.selectedPayment(c.CREDITCARD)},e.catchange=function(a,b){var c=$(".credit-card-icon");a?c.each(function(){$(this).hasClass("svg-"+b+"-card")?$(this).addClass("active"):$(this).removeClass("active")}):c.removeClass("active")},e.addCreditCardError=function(a){var b=ko.utils.arrayFirst(e.creditCardErrorList(),function(b){return a.id===b.id});b?e.creditCardErrorList.replace(b,a):e.creditCardErrorList.push(a)},e.removeCreditCardErrorById=function(a){e.creditCardErrorList.remove(function(b){if(b.id===a)return!0})},e.removeCreditCardErrorAll=function(a){return a.removeAll(),a},e.cardHolderNameValidation=function(){var b="";if(void 0===e.cardHolderName()||""===e.cardHolderName()?b=a.responseMessage.getValidationMessage("join-payment-form","credit-card-name","required"):/^[^<>+;\[\]\{\}\"]+$/i.test(e.cardHolderName())||(b=a.responseMessage.getValidationMessage("join-payment-form","credit-card-name","disallowedCharacters")),""!==b){e.invalidCardHolderName(!0);var c={message:b,id:"credit-card-name"};e.addCreditCardError(c)}else e.invalidCardHolderName(!1),e.removeCreditCardErrorById("credit-card-name")},e.onClickChangePayment=function(){var b=!!$('input[name="payment_method_nonce"]').val();if(b){var c=a.responseMessage.getValidationMessage("join-payment-form","nonce","alreadyhas");return $("#payment-paypal-errors").html(c),!1}return!0},e.changePayment=function(b){b===c.PAYPAL?(e.braintreePayPal(),a.join.model.payconfirm.nonce=""):e.braintreeCreditCard(),a.adobeAnalytics.pages.join.trackPayment(b)},e.braintreePayPal=function(){braintree.setup(e.clientToken(),"paypal",{container:q,displayName:"Belong",onPaymentMethodReceived:function(b){$(".join-paypal-message").addClass("hidden"),$("#payment-paypal-errors").html(""),a.join.model.payconfirm.nonce=b.nonce,a.join.model.payconfirm.paymentType=b.type,a.join.model.payconfirm.paymentDetails=b.details,a.adobeAnalytics.pages.join.trackPayment("Paypal payment received")},onReady:function(){$("#join-braintree-loading-paypal").addClass("hidden"),$(".pay-with-paypal-container").removeClass("hidden"),$("#braintree-paypal-button").on("click",function(){a.adobeAnalytics.pages.join.trackPayment("Paypal button clicked")})},onCancelled:function(){$(".join-paypal-message").removeClass("hidden"),$('input[name="payment_method_nonce"]').val(""),$("#payment-paypal-errors").html(""),a.join.model.payconfirm.nonce="",a.adobeAnalytics.pages.join.trackPayment("Paypal payment cancelled")},onError:function(b){a.adobeAnalytics.pages.join.trackPayment("Paypal payment error"),e.resetButtonState()}})},e.braintreeCreditCard=function(){var b={"font-size":"16px","font-family":"source-sans-pro,HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica Neue Regular,Arial,Helvetica,sans-serif","font-weight":"300",color:"#999"};braintree.setup(e.clientToken(),"custom",{id:p,hostedFields:{number:{selector:"#credit-card-number"},cvv:{selector:"#credit-card-security-code"},expirationMonth:{selector:"#credit-card-month",placeholder:"MM"},expirationYear:{selector:"#credit-card-year",placeholder:"YYYY"},styles:{input:{"font-size":"16px","font-family":"source-sans-pro,HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica Neue Regular,Arial,Helvetica,sans-serif","font-weight":"300",color:"#666"},"::-webkit-input-placeholder":b,":-moz-placeholder":b,"::-moz-placeholder":b,":-ms-inpput-placeholder":b,".number":{"font-weight":"300"},".valid":{color:"#666"},".invalid":{color:"#ff7070"}},onFieldEvent:function(b){var c=$(b.target.container),d=c.closest(".ctrl-holder");if("number"===b.target.fieldKey&&null!==b.card){if("visa"!==b.card.type&&"master-card"!==b.card.type){c.removeClass("braintree-hosted-fields-valid"),c.addClass("braintree-hosted-fields-invalid"),e.invalidCardType(!0),e.catchange(!1);var f={message:a.responseMessage.getValidationMessage("join-payment-form","credit-card-number","type"),id:"credit-card-number"};return e.addCreditCardError(f),!1}e.invalidCardType(!1),e.removeCreditCardErrorById("credit-card-number")}else"number"===b.target.fieldKey&&null===b.card&&(e.invalidCardType(!1),e.removeCreditCardErrorById("credit-card-number"));b.isPotentiallyValid&&(null!==b.card?e.catchange(!0,b.card.type):e.catchange(!1)),"blur"===b.type?d.removeClass("shift-focussed"):"focus"===b.type&&d.addClass("shift-focussed"),"number"===b.target.fieldKey&&("blur"===b.type?b.isEmpty&&d.removeClass("shift-label"):"focus"===b.type&&d.addClass("shift-label")),b.card&&e.removeCreditCardErrorById("credit-card-braintree")}},onPaymentMethodReceived:function(b){a.join.model.payconfirm.nonce=b.nonce,a.join.model.payconfirm.paymentType=b.type,a.join.model.payconfirm.paymentDetails=b.details,a.join.model.payconfirm.cardHolderName=e.cardHolderName(),e.cardHolderNameValidation(),e.invalidCardType()?e.resetButtonState():e.invalidCardHolderName()?e.resetButtonState():(e.creditCardErrorList.removeAll(),e.processOrder())},onReady:function(){$("#join-braintree-loading-creditcard").addClass("hidden"),$(".pay-by-credit-card-container").removeClass("hidden")},onError:function(b){e.resetButtonState();var c=b.message;"User did not enter a payment method"===c&&(c=a.responseMessage.getValidationMessage("join-payment-form","credit-card-number-and-expiration","required"));var d={message:c,id:"credit-card-braintree"};e.cardHolderNameValidation(),e.addCreditCardError(d),e.resetButtonState()}})},e.formReady=function(){e.clientToken()&&a.forms.applyShiftLabel()},e.resetButtonState=function(){h.attr("data-state","active");var b=$(".join-form-container .error:visible:first"),c=$(".join-form-container .payment-errors:visible:first"),d=$(".join-form-container .braintree-hosted-fields-invalid:first"),e=b.length>0?b.parent().offset().top-$("#header").height():9999,f=c.length>0?c.parent().offset().top-$("#header").height():9999,g=d.length>0?d.parent().offset().top-$("#header").height():9999;(b.length>0||c.length>0||d.length>0)&&$("html, body").animate({scrollTop:Math.min(e,f,g)},250),a.buttons.enableButton(h)},e.confirmOrder=function(){var b=h.attr("data-state");if("loading"==b)return!1;if(h.attr("data-state","loading"),a.validation.resetCustomMessages(),d.removeClass("error"),e.createOrderError=!1,a.validation.validateForm(l)){if(a.join.model.payconfirm.agreementChecked=!0,a.join.model.payconfirm.portAgreementChecked=!0,e.selectedPayment()===c.CREDITCARD)$("#"+p+" input:submit").click();else if(e.selectedPayment()===c.PAYPAL)if(a.join.model.payconfirm.nonce)e.processOrder();else{var f=a.responseMessage.getValidationMessage("join-payment-form","nonce","paypal-required");$("#payment-paypal-errors").html(f),e.resetButtonState()}}else e.resetButtonState()},e.processOrderDone=function(b){sessionStorage.removeItem("broadbandTechnologyType"),sessionStorage.removeItem("product"),sessionStorage.removeItem("resultCode"),sessionStorage.removeItem("resultStatus"),sessionStorage.removeItem("sqDone"),sessionStorage.removeItem("productModel"),sessionStorage.removeItem("sqModel"),sessionStorage.removeItem("tempProductBuilder");var c="NA";c=b.messages[0].speedBoost?"INACTIVE_CAN_CHANGE":"NA",a.adobeAnalytics.pages.join.confirmYourOrder({serviceClass:b.messages[0].serviceClass,speedBoostStatus:c,promoCode:b.messages[0].promotionId,planType:b.messages[0].planType,planSize:b.messages[0].planSize,withSpeedBoost:b.messages[0].speedboost,withContract:b.messages[0].withContract,orderType:b.messages[0].orderType,userid:b.messages[0].userid,planSpeed:b.messages[0].planSpeed,voicePlan:a.join.model.product.voicePlan}),a.analytics.methods.join.confirmYourOrder(b.messages[0].userid,b.messages[0].serviceClass,c,b.messages[0].promotionId,b.messages[0].planType,b.messages[0].planSize,b.messages[0].speedboost,null!==b.messages[0].contractTerm,b.messages[0].orderType,b.messages[0].planSpeed,a.join.model.product.voicePlan);var d=b.messages[0].userid;a.livePerson.join.confirmOrder(a.join.product.methods.getCurrentFormModel(),d);var e=Math.random()+"",f=1e13*e;$("body").append('<iframe src="https://4503403.fls.doubleclick.net/activityi;src=4503403;type=CONV0001;cat=Conve0;ord='+f+'?" width="1" height="1" frameborder="0" style="display:none"></iframe>')},e.processOrderFail=function(b,c,f){var g=b.responseJSON,h="";if(a.validation.resetCustomMessages(),"timeout"===c)h=a.responseMessage.getApiMessage("join-belong","confirmOrder","timeout");else if(void 0!==g.messages[0]&&void 0!==typeof g.messages[0].userMessage){var i=g.messages[0].userMessage;h=a.responseMessage.getApiMessage("join-belong","confirmOrder",i),""===h&&(h=a.responseMessage.getApiMessage("join-belong","confirmOrder","submit-error"))}else h=a.responseMessage.getApiMessage("join-belong","confirmOrder","submit-error");d.addClass("error"),a.validation.attachCustomMessage("join-payconfirm-submit",h,"error",!0),a.adobeAnalytics.pages.join.errorOrder(h),a.analytics.methods.joinErrors.errorOrder(h),e.createOrderError=!0,e.resetButtonState()},e.performLogin=function(){if(e.createOrderError)return e.createOrderError=!1,!1;var c=b.methods.buildRedirectUrl("/account/?showsuccess=1"),d=b.methods.buildRedirectUrl("/login-confirmation/?showsuccess=1"),f=b.methods.buildRedirectUrl("/account/?showsuccess=1");k.data("isLoggedIn")&&k.data("isAgent")?a.mobo.methods.grantPermissions(a.GD.loginEmail,a.join.model.personalDetails.email).then(function(){window.location.href=c}):a.authenticate.methods.login(a.join.model.personalDetails.email,a.join.model.personalDetails.password,d).then(function(a){a=a.trim();var b=a.substring(a.indexOf("data-logged-in")+16,a.indexOf("data-logged-in")+(a.substring(a.indexOf("data-logged-in"),a.length).indexOf(">")-1));"customer"===b?window.location.href=f:($(".join-payconfirm .join-subfooter").addClass("hidden"),$(".join-zpl-continue-section").removeClass("hidden"))},function(a){window.location.href=c})},e.processOrder=function(){var b="/bin/belong/join/order/confirm",c=document.cookie.replace(/(?:(?:^|.*;\s*)liveagentSessionId\s*\=\s*([^;]*).*$)|^.*$/,"$1"),d={nonce:a.join.model.payconfirm.nonce,agreementChecked:a.join.model.payconfirm.agreementChecked,portAgreementChecked:a.join.model.payconfirm.portAgreementChecked,liveagentSessionId:c,cardHolderName:a.join.model.payconfirm.cardHolderName},f=$.post(b,d);f.then(e.processOrderDone,e.processOrderFail),f.then(e.performLogin)}},events:{checkAgreement:function(){if(i.prop("checked")){var b=a.join.model.product.planSize+"-"+a.join.model.product.planType;a.adobeAnalytics.pages.join.steps("3-Check Agmt","3-check-agmt.html",b),a.analytics.methods.join.joinSteps("3-Check Agmt","3-check-agmt.html",b),$(this).parent().children('label[for="'+this.id+'"]').addClass("checked")}else $(this).parent().children('label[for="'+this.id+'"]').removeClass("checked")},checkPortingAgreement:function(){var b=!!j.prop("checked");if(b){var c=a.join.model.product.planSize+"-"+a.join.model.product.planType;a.adobeAnalytics.pages.join.steps("3-Check Porting Agmt","3-check-porting-agmt.html",c),a.adobeAnalytics.pages.join.steps("3-Check Porting Agmt","3-check-porting-agmt.html",c),a.analytics.methods.join.joinSteps("3-Check Porting Agmt ","3-check-porting-agmt.html",c),$(this).parent().children('label[for="'+this.id+'"]').addClass("checked")}else $(this).parent().children('label[for="'+this.id+'"]').removeClass("checked")},onLogin:function(c){c.preventDefault();var d=a.buttons.disableButton($(this));return!d.alreadyDisabled&&void a.analytics.methods.linkClickWithPageReload(b.methods.buildRedirectUrl("/account/?showsuccess=1"),"Click","Join-Login","No zpl")}},methods:{render:function(){m.updateClientToken(a.join.model.payconfirm.clientToken)},sqUpdateHandler:function(){b.methods.render()},setEdit:function(){e.addClass("edit").removeClass("readonly").removeClass("collapsed").velocity("stop").velocity("scroll",{duration:400,easing:"ease-out",offset:-70})},setReadOnly:function(){e.addClass("readonly").removeClass("edit").removeClass("collapsed")},setCollapsed:function(){e.addClass("collapsed").removeClass("edit").removeClass("readonly")},buildRedirectUrl:function(a){var b=window.location.protocol+"//"+window.location.host+a;return b}}}}()}(BELONG),function(a){"use strict";a.join=a.join||{},a.join.personal=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E="join-personal",F="join-personal-form",G=!1;return{init:function(){b=this,g=$("#join-personal"),c=$("#personal-section-header"),d=$("#personal-section-footer"),h=$("#join-personal-first-name"),i=$("#join-personal-last-name"),j=$("#join-personal-email-address"),k=$("#join-personal-password"),l=$("#join-personal-conf-password"),m=$("#join-personal-dob_day"),n=$("#join-personal-dob_month"),o=$("#join-personal-dob_year"),p=$("#join-personal-dob-input"),q=$("#join-personal-mobile"),r=$("#join-personal-current-accno"),s=$("#join-personal-current-provider"),t=$("#join-personal-nameonbill"),e=$("#join-personal-continue"),f=$("#join-personal-check-email"),u=$("#join-personal-first-name-readonly"),v=$("#join-personal-last-name-readonly"),w=$("#join-personal-email-address-readonly"),x=$("#join-personal-password-readonly"),y=$("#join-personal-dob-readonly"),z=$("#join-personal-mobile-readonly"),A=$("#join-personal-current-accno-readonly"),B=$("#join-personal-current-provider-readonly"),C=$("#join-personal-nameonbill-readonly"),a.forms.date.methods.setYearsForDob(o),$("#mdl-agent-terms").length>0&&a.GD.isAgent?e.off("click.joinPersonal").on("click.joinPersonal",function(b){return b.preventDefault(),!!a.validation.validateForm(D)&&(a.agentTermsModal.open({joinModel:a.join.model}),!1)}):e.off("click.joinPersonal").on("click.joinPersonal",b.events.onContinue),j.off("change.joinPersonal").on("change.joinPersonal",b.events.onEmailChange),m.off("change.joinPersonal").on("change.joinPersonal",b.events.onDobDayChange),n.off("change.joinPersonal").on("change.joinPersonal",b.events.onDobMonthChange),o.off("change.joinPersonal").on("change.joinPersonal",b.events.onDobYearChange),p.off("change.joinPersonal").on("change.joinPersonal",b.events.onDobChange),
$(".join-personal-form").submit(function(a){a.preventDefault()});var E={rules:{"join-personal-first-name":{required:!0,disallowedCharacters:!0,maxlength:255},"join-personal-last-name":{required:!0,disallowedCharacters:!0,maxlength:255},"join-personal-email-address":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255},"join-personal-password":{required:!0,passwordComplexity:!0,disallowedCharacters:!0,badPassword:!0,notEqualToEmail:{emailAddressFieldID:"#join-personal-email-address"},minlength:8,maxlength:30},"join-personal-conf-password":{equalTo:"#join-personal-password"},"join-personal-dob-input":{required:!0,birthDateFormat:!0,validAustralianDateString:!0,overEighteen:{dobFieldID:"#join-personal-dob-input"}},"join-personal-mobile":{required:!0,australianMobileNumber:!0}}};D=a.validation.setupFormValidation(F,$("."+F),E)},methods:{render:function(){a.sqUtil.is.portOrder(a.join.model.sq.orderType)&&g.addClass("port-order")},setEdit:function(b){g.removeClass("readonly").removeClass("collapsed").addClass("edit"),b?$(b).velocity("stop").velocity("scroll",{duration:400,easing:"ease-out",offset:-70}):a.join.methods.fromProductBuilder()||g.velocity("stop").velocity("scroll",{duration:400,easing:"ease-out",offset:-70})},setReadOnly:function(){g.removeClass("edit").removeClass("collapsed").addClass("readonly")},setCollapsed:function(){g.removeClass("edit").removeClass("readonly").addClass("collapsed"),d.removeClass("error")},validateEmail:function(b,c){a.ajax("",{requestType:"checkCustomerUsername",email:b},function(b){var d;if(b.success)G=!0,c(!0);else{a.validation.resetCustomMessages(),G=!1;var e="",f=b.messages;e="undefined"!=typeof f?Object.keys(b.messages[0])[0].toLowerCase():"";var g=!1;switch(e){case"email":d=a.responseMessage.getApiMessage("join-belong","checkCustomerUsername",e),a.validation.attachCustomMessage("join-personal-email-address",d,"error",!0),a.adobeAnalytics.pages.join.errorEmail(e,d),a.analytics.methods.joinErrors.errorEmail(e,d),g=!1;break;case"username":d=a.responseMessage.getApiMessage("join-belong","checkCustomerUsername",e),a.validation.attachCustomMessage("join-personal-email-address",d,"error",!0),a.adobeAnalytics.pages.join.errorEmail(e,d),a.analytics.methods.joinErrors.errorEmail(e,d),g=!1;break;case"certainty":d=a.responseMessage.getApiMessage("join-belong","checkCustomerUsername",e),a.validation.attachCustomMessage("join-personal-email-address",d,"error",!0),a.adobeAnalytics.pages.join.errorEmail(e,d),a.analytics.methods.joinErrors.errorEmail(e,d),g=!1;break;default:d=a.responseMessage.getApiMessage("join-belong","checkCustomerUsername",e),a.validation.attachCustomMessage("join-personal-email-address",d,"error",!0),a.adobeAnalytics.pages.join.errorEmail(e,d),a.analytics.methods.joinErrors.errorEmail(e,d),g=!0}c(g)}},function(a){G=!0,c(!0)})},validateDob:function(){var b=/\d\d\/\d\d\/\d\d\d\d/.exec(p.val());b&&a.validation.validateInput(D,"#join-personal-dob-input")},saveAndContinue:function(){a.join.model.personalDetails.firstName=h.val(),a.join.model.personalDetails.lastName=i.val(),a.join.model.personalDetails.email=j.val(),a.join.model.personalDetails.password=k.val(),a.join.model.personalDetails.dateOfBirth=p.val(),a.join.model.personalDetails.mobilePhone=a.validation.helpers.cleanAustralianPhoneNumber(q.val()),a.join.model.personalDetails.portCurrentAccountNumber=r.val(),a.join.model.personalDetails.portCurrentProvider=s.val(),a.join.model.personalDetails.portNameOnBill=t.val(),b.methods.populateReadOnlyFields(),b.methods.processCustomer()},processCustomer:function(){var c={planType:a.join.model.product.planType,planSize:a.join.model.product.planSize,planSpeed:a.join.model.product.planSpeed,contractTerm:a.join.model.product.contractTerm,voicePlan:a.join.model.product.voicePlan,ndcUpfrontOption:a.join.model.product.ndcUpfrontOption,promotionId:a.join.model.product.promotionId,promotionStaffId:a.join.model.product.promotionStaffId,firstName:a.join.model.personalDetails.firstName,lastName:a.join.model.personalDetails.lastName,email:a.join.model.personalDetails.email,password:a.join.model.personalDetails.password,dateOfBirth:a.join.model.personalDetails.dateOfBirth,mobilePhone:a.join.model.personalDetails.mobilePhone,currentProvider:a.join.model.personalDetails.portCurrentProvider,currentAccountNumber:a.join.model.personalDetails.portCurrentAccountNumber,nameOnCurrentBill:a.join.model.personalDetails.portNameOnBill,agentId:$("#header").data("isAgent")?$("#header").data("userEmail"):"",requestType:"joinFormInitPayment"};$.post("/bin/belong/join/save",c).done(function(c){sessionStorage.setItem("productModel",JSON.stringify(a.join.model.product));var e=a.join.model.product.planSize+"-"+a.join.model.product.planType;a.adobeAnalytics.pages.join.steps("2-Personal Cont.","2-personal-cont.html",e),a.analytics.methods.join.joinSteps("2-Personal Cont.","2-personal-cont.html",e),a.join.model.payconfirm.clientToken=c.messages[0].clientToken,a.join.payconfirm.methods.sqUpdateHandler(),d.removeClass("error"),b.methods.resetButtonState(),b.methods.setReadOnly(),a.join.methods.activateNextModule(E)}).fail(function(c,e){var f="";if("timeout"==e)f=a.responseMessage.getApiMessage("join-belong","personalDetails","timeout");else{var g=c.responseJSON;if(void 0!==g.messages[0]&&void 0!==typeof g.messages[0].userMessage){var h=g.messages[0].userMessage;f=a.responseMessage.getApiMessage("join-belong","personalDetails",h),""===f&&(f=a.responseMessage.getApiMessage("join-belong","personalDetails","default"))}else f=a.responseMessage.getApiMessage("join-belong","personalDetails","default")}d.addClass("error"),a.validation.resetCustomMessages(),a.validation.attachCustomMessage("join-personal-continue",f,"error",!0),a.adobeAnalytics.pages.join.errorPersonalDetails(f),a.analytics.methods.joinErrors.errorPersonalDetails(f),b.methods.resetButtonState()})},prefill:function(){a.forms.setInputValue(h,a.join.model.personalDetails.firstName),a.forms.setInputValue(i,a.join.model.personalDetails.lastName),a.forms.setInputValue(j,a.join.model.personalDetails.email),a.forms.setInputValue(k,a.join.model.personalDetails.password),a.forms.setInputValue(l,a.join.model.personalDetails.password),a.forms.setInputValue(p,a.join.model.personalDetails.dateOfBirth),a.forms.setInputValue(q,a.join.model.personalDetails.mobilePhone),a.forms.setInputValue(r,a.join.model.personalDetails.portCurrentAccountNumber),a.forms.setInputValue(s,a.join.model.personalDetails.portCurrentProvider),a.forms.setInputValue(t,a.join.model.personalDetails.portNameOnBill),b.methods.populateReadOnlyFields(),b.methods.render()},populateReadOnlyFields:function(){u.text(a.join.model.personalDetails.firstName),v.text(a.join.model.personalDetails.lastName),w.text(a.join.model.personalDetails.email),x.text("* * * * * * * *"),y.text(a.join.model.personalDetails.dateOfBirth),z.text(a.join.model.personalDetails.mobilePhone),A.text(a.join.model.personalDetails.portCurrentAccountNumber),B.text(a.join.model.personalDetails.portCurrentProvider),C.text(a.join.model.personalDetails.portNameOnBill)},sqUpdateHandler:function(){b.methods.render()},resetButtonState:function(){e.attr("data-state","loading"),$(".join-form-container .error:visible:first").length>0&&$("html, body").animate({scrollTop:$(".join-form-container .error:visible:first").parent().offset().top-$("#header").height()},250),e.attr("data-state","active")}},events:{onContinue:function(c){c.preventDefault();var d=e.attr("data-state");return"loading"!=d&&(e.attr("data-state","loading"),a.validation.validateForm(D)?G?(b.methods.saveAndContinue(),!1):void b.methods.validateEmail(j.val(),function(a){return 1==a?b.methods.saveAndContinue():b.methods.resetButtonState(),!1}):(b.methods.resetButtonState(),!1))},onEmailChange:function(){a.validation.resetCustomMessages(),G=!1},onDobDayChange:function(){b.methods.validateDob()},onDobMonthChange:function(){b.methods.validateDob()},onDobYearChange:function(){b.methods.validateDob()},onDobChange:function(){var a=p.val().split("/");m.val(a[0]),m.prev("span").text(m.find("option:selected").text()),n.val(a[1]),n.prev("span").text(n.find("option:selected").text()),o.val(a[2]),o.prev("span").text(o.find("option:selected").text())}}}}()}(BELONG),function(a){"use strict";a.join=a.join||{};var b=function(){function b(a){for(var b=0;b<h.displayedProducts().length;b++)for(var c=h.displayedProducts()[b],d=0;d<c.plans.length;d++){var e=c.plans[d],f=a(c,e);if(f)return f}}function c(){var a=d(h.selectedPlanId()).planType,c={};return b(function(b,d){d.productSize===i.EXTRA&&a===d.planType&&(c=d)}),c}function d(a){var c={};return b(function(b,d){d.planId===a&&(c=d)}),c}function e(a){var c={};return b(function(b,d){d.planId===a&&(c=b)}),c}function f(a){return $.extend(!0,{},a)}function g(a){var b=[];return $.each(a,function(a,c){b.push(f(c))}),b}var h=this,i={REGULAR:"Regular",LARGE:"Large",EXTRA:"ExtraLarge"},j={NBN:"NBN",ADSL:"ADSL"},k={BUNDLE:"BUNDLE"};h.selectedPlanId=ko.observable(""),h.extraLargePlanSelected=ko.observable(!1),h.displayedProducts=ko.observableArray([]),h.largePlanSelected=ko.computed(function(){return e(h.selectedPlanId()).productSize===i.LARGE}),h.technologyType=ko.computed(function(){var a=h.displayedProducts();return a.length>0?h.displayedProducts()[0].technologyType:""}),h.extendedNetwork=ko.observable(!1),h.selectedProductAndPlan=ko.computed(function(){var a=h.selectedPlanId();h.extraLargePlanSelected()&&(a=c(a).planId);var b=d(a),g=e(a);return b=f(b),g=f(g),$.isEmptyObject(b)?g.plans=[]:g.plans=[b],g}),h.selectedPlanId.subscribe(function(b){var e=d(h.selectedPlanId());h.extraLargePlanSelected()&&e.productSize===i.REGULAR&&h.extraLargePlanSelected(!1);var f=h.extraLargePlanSelected()?c():d(b);a.join.product.events.updateProductSelectionHandler(f.planId,f.productSize,f.planType,h.technologyType())}),h.extraLargePlanSelected.subscribe(function(e){if(e&&h.selectedPlanId()){var f=d(h.selectedPlanId());f.productSize!==i.LARGE&&b(function(a,b){b.planType===f.planType&&b.productSize===i.LARGE&&h.selectedPlanId(b.planId)})}else e&&!h.selectedPlanId()&&b(function(a,b){b.productSize===i.LARGE&&(a.productType===j.ADSL&&b.planType===k.BUNDLE?h.selectedPlanId(b.planId):a.productType===j.NBN&&h.selectedPlanId(b.planId))});var g=h.extraLargePlanSelected()?c():d(h.selectedPlanId());a.join.product.events.updateProductSelectionHandler(g.planId,g.productSize,g.planType,h.technologyType())}),h.initDisplayedProducts=function(){var b=a.sqUtil.is.nbnOrder(a.join.model.sq.broadbandTechType),c=a.sqUtil.is.churnOrder(a.join.model.sq.orderType);h.extendedNetwork(a.join.model.sq.extendedNetwork);var d=JOIN_PRODUCT_STRUCTURE.products.filter(function(a){return a.productType===(b?j.NBN:j.ADSL)});d=g(d),$.each(d,function(b,d){var e=[];$.each(d.plans,function(b,d){d.technologyType===a.join.model.sq.broadbandTechType&&(c?"DSL"===d.planType||"BUNDLE"===d.planType:"DSL"!==d.planType)&&e.push(d)}),d.plans=e}),a.join.model.sq.extendedNetwork&&$.each(d,function(a,b){$.each(b.plans,function(a,b){b.monthlyPrice=parseInt(b.monthlyPrice)+JOIN_PRODUCT_STRUCTURE.extendedNetworkSurcharge,b.monthlyContractPrice=parseInt(b.monthlyContractPrice)+JOIN_PRODUCT_STRUCTURE.extendedNetworkSurcharge})}),h.displayedProducts(h.convertProductStructureToDisplayModel(d)),a.tooltip()},h.convertProductStructureToDisplayModel=function(a){return $.each(a,function(a,b){var c=b.productSize;delete b.productSize,b.technologyType=b.plans.length>0?b.plans[0].technologyType:"",b.technologyDisplayName=b.plans.length>0?b.plans[0].technologyDisplayName:"",$.each(b.plans,function(a,b){delete b.technologyType,delete b.technologyDisplayName,b.productSize=c})}),a},h.mapIncoming=function(a){var c=d(a.html_plan_id);c.productSize===i.EXTRA?(b(function(a,b){b.planType===c.planType&&b.productSize===i.LARGE&&h.selectedPlanId(b.planId)}),h.extraLargePlanSelected(!0)):h.selectedPlanId(a.html_plan_id)},h.mapOutgoing=function(a){return a.html_plan_id=h.selectedPlanId(),a}};a.join.product=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z="join-products",A="join-product-form",B={products:{},charges:{},belongTrial:!1},C=["NATIONAL","BOTH"],D=["INTERNATIONAL","BOTH"],E={},F=!1,G=[];return{init:function(){c=this,d=$("#join-product-continue"),e=$('.join-product input[name="product-selection-input"]'),f=$('.join-product input[name="chk-join-speedboost"]'),g=$('.join-product input[name="chk-join-contract"]'),h=$('.join-product input[name="chk-join-belong-voice-national"]'),i=$('.join-product input[name="chk-join-belong-voice-international"]'),j=$('.voice-options input[type="checkbox"]'),k=$(".voice-options"),l=$(".join-product .promo-apply"),n=$(".join-product-banner"),s=$("#txtpromocode"),t=$(".join-product-promocode"),u=$("#PromoSectionState"),m=$(".product-option-wrapper"),o=$("#join-product-charges"),r=$(".join-product-options"),v=$(".charges-row.first-month-free"),p=$(".belong-voice-charge-national"),q=$(".belong-voice-charge-international"),x=a.validation.setupFormValidation(A,$("."+A),{ignore:"",rules:{"product-selection-input":{required:!0}}}),c.initKnockout(),d.off("click.onContinue").on("click.onContinue",c.events.onContinue),f.off("click.speedboostHandler").on("click.speedboostHandler",c.events.speedboostHandler),g.off("click.contractHandler").on("click.contractHandler",c.events.contractHandler),j.off("click.belongVoiceHandler").on("click.belongVoiceHandler",c.events.belongVoiceHandler),l.off("click.applyPromotionHandler").on("click.applyPromotionHandler",c.events.applyPromotionHandler),s.off("keyup.changePromoHandler").on("keyup.changePromoHandler",c.events.changePromoHandler),s.on("keyup.promoApplyButton",c.display.promoApplyButton),$(".join-product-form").submit(function(a){a.preventDefault()}),k.find(".tooltip").off("click.voiceTooltipHandler").on("click.voiceTooltipHandler",c.events.voiceTooltipHandler),c.methods.setupProductSelectionItemClasses(),c.hide.promoApplyButton(),c.methods.setupCmsData(),E=c.methods.getDefaultModel(),c.methods.setupPromoSectionExpandedIfRequired()},initKnockout:function(){y=new b,ko.applyBindings(y,document.getElementById("join-products"))},getViewModel:function(){return y},methods:{getCurrentFormModel:function(){return E},setupProductSelectionItemClasses:function(){for(var a,b=$(".join-product .product-selection-item"),c=0;c<b.length;c++)a=c%2===0?"odd":"even",$(b[c]).closest(".content-column").addClass(a)},resetPromoIdWithStoredPromoCode:function(){return a.join.model.product.promotionId=(a.join.model.product.promotionId||localStorage.getItem("promocode")||"").trim(),a.join.model.product.promotionId},setupPromoSectionExpandedIfRequired:function(){var b=u.val();"expanded"===b.toLowerCase()&&a.collapsibles.methods.toggleCollapsibleContainer(t,"expand")},getDefaultModel:function(){var a={planType:"",speedboost:!1,planSize:"",planSpeed:"",fttb:!1,fttn:!1,withContract:c.methods.getDefaultWithContractOption(),promotionId:c.methods.resetPromoIdWithStoredPromoCode(),voicePlan:"",voice_national:!1,voice_international:!1,promotionStaffId:"",activation_fee:B.charges.activation_fee,modem_fee:B.charges.modem_fee,total_minimum_cost:0,monthly_total_cost:0,speed_boost_fee:0,contract_months:1,plan_id:"",html_plan_id:"",monthly_price:0,speedboostAvailable:!1,monthlyNDCCost:0,upfrontNDCCost:0,promotion_success:!1,charges_title:"",promotion:{}};return a},getDefaultWithContractOption:function(){switch(a.join.model.product.contractTerm){case"MONTH_BY_MONTH":return!1;default:return!0}},prefill:function(){E=c.methods.getDefaultModel(),E.planType=a.join.model.product.planType,E.speedboost=!!a.join.model.product.planSpeed,E.planSpeed=a.join.model.product.planSpeed,E.planSize=a.join.model.product.planSize,E.voicePlan=a.join.model.product.voicePlan,E.promotionId=a.join.model.product.promotionId,E.promotionStaffId=a.join.model.product.promotionStaffId,E.technologyType=a.join.model.sq.broadbandTechType,E.promotion=null,E.calculatedMTC=a.join.model.product.calculatedMTC;var b="true"===a.util.loadPageVar("productbuilder");b&&(E.withContract=null!==a.join.model.product.contractTerm),E.voice_national=$.inArray(E.voicePlan,C)!==-1,E.voice_international=$.inArray(E.voicePlan,D)!==-1,E.planSize&&E.planType?E.plan_id=E.planSize+"-"+E.planType+"-"+E.technologyType:E.plan_id=null,c.methods.updateViewBasedOnSq(!0),c.methods.updateModel(),c.methods.render(),c.getViewModel().mapIncoming(E),a.join.common.updateAccessType(E.planType)},getDefaultPlan:function(b){var c;c=a.sqUtil.is.nbnOrder(b)?"NBN":"BUNDLE";var d={planType:c,planSize:"Regular",plan_id:null,technologyType:b.toUpperCase()};return d.plan_id=d.planSize+"-"+d.planType+"-"+d.technologyType,d},isSpeedBoostAvailableForCurrentPlansDisplayed:function(){return!!a.sqUtil.is.nbnOrder(a.join.model.sq.broadbandTechType)},render:function(){c.methods.renderSummary(),c.methods.showPromotionalSpeedboostElementsIfRequired();var b=a.join.model.sq.isPreprovisioned;if(c.methods.renderNoPlanSelected($('input[name="chk-join-speedboost"]:checked:visible').length>0),"NBN"===E.planType?$(".bc-dark-green").removeClass("hidden"):($(".bc-lime").last().css("border-radius","0 0 5px 5px"),$(".bc-dark-green").addClass("hidden")),c.methods.isSpeedBoostAvailableForCurrentPlansDisplayed()?$(".b-speedboost").removeClass("hidden"):$(".b-speedboost").addClass("hidden"),E.speedboostAvailable&&E.speedboost)switch($(".charges-body .speed-boost-fee").removeClass("hidden"),E.planSpeed){case"25/5":$(".charges-body .speed-boost-fee").removeClass("hidden").find(".charges-cost").text("$"+(b?0:B.charges.speed_boost_fee_1)),$.each($('input[name="chk-join-speedboost"]'),function(){"1"===$(this).val()&&($("#speed-boost-variation-3").hasClass("hidden")||($("#speed-boost-variation-3 .is-collapsed a").trigger("open.expandcollapse"),setTimeout(function(){$("#chk-join-speedboost_3_1").prop("checked","checked")},1)),$(this).prop("checked","checked"),$(this).closest("li").addClass("checked").closest(".ctrl-holder").addClass("join-readonly"))});break;case"100/40":$(".charges-body .speed-boost-fee").removeClass("hidden").find(".charges-cost").text("$"+(b?0:B.charges.speed_boost_fee_2)),$.each($('input[name="chk-join-speedboost"]'),function(){"2"===$(this).val()&&($("#speed-boost-variation-3").hasClass("hidden")||($("#speed-boost-variation-3 .is-collapsed a").trigger("open.expandcollapse"),setTimeout(function(){$("#chk-join-speedboost_3_2").prop("checked","checked")},1)),$(this).prop("checked","checked"),$(this).closest("li").addClass("checked").closest(".ctrl-holder").addClass("join-readonly"))})}else $(".charges-body .speed-boost-fee").addClass("hidden");if("fttb"===a.join.model.sq.broadbandTechType.toLowerCase()||"fttn"===a.join.model.sq.broadbandTechType.toLowerCase()?($(".nbn-fttb").removeClass("hidden"),$(".nbn-all").addClass("hidden")):($(".nbn-fttb").addClass("hidden"),$(".nbn-all").removeClass("hidden")),c.methods.renderContractAndDslElements(),!!E.withContract&&g.prop("checked",!0),!!E.voice_national&&h.prop("checked",!0),!!E.voice_international&&i.prop("checked",!0),E.speedboost||E.withContract||E.voice_national||E.voice_international?$(".join-product-options").closest(".join-content").addClass("join-readonly"):$(".join-product-options").closest(".join-content").removeClass("join-readonly"),$("#"+z).hasClass("edit")?(f.removeAttr("disabled"),g.removeAttr("disabled"),j.removeAttr("disabled")):(f.attr("disabled","disabled"),g.attr("disabled","disabled"),j.attr("disabled","disabled")),E.plan_id){$(".join-product-charges").removeClass("hidden").closest(".join-edit").addClass("join-readonly"),$(".join-product-options").removeClass("hidden"),$(".join-product-promocode").removeClass("hidden"),E.speedboost?$('input[name="chk-join-speedboost"]:visible:checked').closest("li").addClass("checked").closest(".ctrl-holder").addClass("join-readonly"):$('input[name="chk-join-speedboost"]:visible:checked').closest("li").addClass("checked").closest(".ctrl-holder").removeClass("join-readonly"),E.withContract?g.closest("li").addClass("checked").closest(".checkbox-holder").addClass("join-readonly"):g.closest("li").addClass("checked").closest(".checkbox-holder").removeClass("join-readonly"),E.voice_national?h.closest("li").addClass("checked").closest(".ctrl-holder").addClass("join-readonly"):h.closest("li").addClass("checked").closest(".ctrl-holder").removeClass("join-readonly"),E.voice_international?i.closest("li").addClass("checked").closest(".ctrl-holder").addClass("join-readonly"):i.closest("li").addClass("checked").closest(".ctrl-holder").removeClass("join-readonly"),k.find(".tooltip-btn button").addClass("join-edit"),k.find(".tooltip-btn button").off("click.toggleTooltip").on("click.toggleTooltip",function(){var a=$(this).closest(".expandcollapse-content");$.each(a.find(".radio-holder"),function(a,b){$(b).removeClass("foreground")}),$(this).closest(".radio-holder").addClass("foreground")});var d=E.charges_title;a.sqUtil.is.adsl1Order(a.join.model.sq.broadbandTechType)&&(d=d.replace("ADSL2+","ADSL")),$(".charges-body .monthly-price .charges-name").html(d),b?$(".charges-body .monthly-price .charges-cost").html("$0"):E.withContract?$(".charges-body .monthly-price .charges-cost").html("$"+E.contract_price):$(".charges-body .monthly-price .charges-cost").html("$"+E.monthly_price),$(".charges-body .col-total .total-min-cost").html(c.methods.formatCurrency(E.total_minimum_cost)),b?(p.find(".charges-cost").text("$0"),q.find(".charges-cost").text("$0")):(p.find(".charges-cost").text("$"+E.voice_national_cost),q.find(".charges-cost").text("$"+E.voice_international_cost)),E.voice_national?p.removeClass("hidden"):p.addClass("hidden"),E.voice_international?q.removeClass("hidden"):q.addClass("hidden"),B.charges.modem_rebate_fee<=0&&$(".charges-body .modem-rebate").addClass("hidden"),"DSL"===E.planType?$(".charges-body .col-total .phone-line-text").removeClass("hidden"):$(".charges-body .col-total .phone-line-text").addClass("hidden"),$("#join-product-charges .activation-fee .charges-cost").text("$"+c.methods.formatCurrency(E.activation_fee)),$("#join-product-charges .modem-fee .charges-cost").text("$"+c.methods.formatCurrency(E.modem_fee)),$("#txtpromocode").val(E.promotionId),E.promotionId||($(".charges-body .special").addClass("hidden"),c.methods.updatePromoView("",".default")),c.methods.renderPromo()}},renderSummary:function(){var b=E.charges_title,d="",e=E.monthly_total_cost,f="",g="",h=E.withContract?E.contract_price:E.monthly_price;E.withContract===!0?(b+=" on "+E.contract_months+" month contract",f="Min cost over "+E.contract_months+" months: $"+E.total_minimum_cost):f="Min cost: $"+E.total_minimum_cost,E.speedboost===!0&&(b+=" with "+E.planSpeed+" Speed Boost");var i=0;if(E.voice_national!==!0&&E.voice_international!==!0||(E.voice_national===!0&&E.voice_international===!0?(d="Belong Voice National &amp; International",i=E.voice_national_cost+E.voice_international_cost):E.voice_national===!0?(d="Belong Voice National",i=E.voice_national_cost):E.voice_international===!0&&(d="Belong Voice International",i=E.voice_international_cost)),g="",h%1>0&&(h=h.toFixed(2)),g=E.withContract===!0?"Min cost over "+E.contract_months+" months: $"+h+" broadband charge x "+E.contract_months+" months":"Min cost: $"+h+" broadband charge",E.speedboost===!0)if(E.withContract===!0){var j=E.contract_months;a.join.model.product.isPromotionalSpeedboost&&(j-=3),g+=" + $"+E.speed_boost_fee+" Speed Boost x "+j+" months"}else a.join.model.product.isPromotionalSpeedboost||(g+=" + $"+E.speed_boost_fee+" Speed Boost x 1 month");if(E.voice_national!==!0&&E.voice_international!==!0||(g+=E.withContract===!0?" + $"+i+" Belong Voice x "+E.contract_months+" months":" + $"+i+" Belong Voice x 1 month"),0!==E.monthlyNDCCost?g+=E.monthlyNDCCost%1>0?" + $"+E.monthlyNDCCost.toFixed(2)+" NBN connection charge x "+E.contract_months+" months":" + $"+E.monthlyNDCCost+" NBN connection charge x "+E.contract_months+" months":0!==E.upfrontNDCCost&&(g+=" + $"+E.upfrontNDCCost+" NBN connection charge"),0!==E.modem_fee&&(g+=" + $"+E.modem_fee+" modem"),0!==E.activation_fee&&(g+=" + $"+E.activation_fee+" activation fee"),g+=". ",a.join.model.product.campaignCode&&a.join.model.product.promotionId){var k=a.join.model.product.campaignCode,l=c.methods.getPromoMessage(k);""!=k&&($(".join-product-summary__promo-code .promo-code-chip__msg").html(l),$(".join-product-summary__promo-code").removeClass("hidden"))}$(".join-product-summary__inclusions-plan").html(b),""!=d&&$(".join-product-summary__inclusions-voice").html(d).removeClass("hidden"),e%1>0&&(e=e.toFixed(2)),a.join.model.product.isPromotionalSpeedboost&&(e+=E.speed_boost_fee*-1),$(".join-product-summary__monthly-amount-value").html(e),f%1>0?$(".join-product-summary__min-cost").html(f.toFixed(2)):$(".join-product-summary__min-cost").html(f),$(".join-product-summary__min-cost-breakdown").html(g);var m="",n=$("#join-product-access-types p").not(".hidden");if(n.length>0||a.join.common.updateAccessType(E.planType),n=$("#join-product-access-types p").not(".hidden"),n.length>0){m=n.html();var o=m.replace(/\<br\>/g,"");m=o}if(E.modem_fee>0&&(m="You'll be billed for your modem today. "+m),0!==E.upfrontNDCCost){var p=m.indexOf("billed for your");p!==-1?(p+="billed for your".length,m=m.slice(0,p)+" NBN connection charge and "+m.slice(p)):m="You'll be billed for your NBN connection charge today. "+m}if(E.withContract){var q=$("#join-products p.contract");q.length>0&&(m=m+"<p> The "+E.contract_months+" Month Contract starts when you activate your Belong service. An Early Termination Charge applies ",0!==E.monthlyNDCCost&&(m+="for your service and your NBN connection charge "),m=m+"if you dont stay with Belong for "+E.contract_months+" months.</p>")}$(".join-product-summary__fine-print").html(m)},showPromotionalSpeedboostElementsIfRequired:function(){a.join.model.product.isPromotionalSpeedboost&&$(".show-for-promotional-speedboost").removeClass("hidden")},getPromoMessage:function(b){return a.util.getCMSMessage(b,CMS_PROMOCODE.appliedPromoMessages)},renderContractAndDslElements:function(){E.withContract?($(".b-contract").removeClass("hidden"),$(".non-contract").addClass("hidden")):($(".b-contract").addClass("hidden"),$(".non-contract").removeClass("hidden"))},formatCurrency:function(a){return a&&a.toString().indexOf(".")!=-1?parseFloat(a).toFixed(2):a},renderNoPlanSelected:function(a){a=a||!1,f.closest("li").removeClass("checked"),g.closest("li").removeClass("checked"),j.closest("li").removeClass("checked"),$("#join-product-charges").addClass("hidden"),a||(f.closest("li").removeClass("checked"),f.removeAttr("checked"),f.removeAttr("disabled")),g.removeAttr("checked"),g.removeAttr("disabled"),j.removeAttr("checked").removeAttr("disabled")},sqUpdateHandler:function(a){c.methods.updateViewBasedOnSq(),c.methods.resetForm(),c.getViewModel().mapIncoming(E)},handlePreProvisionedRender:function(){var b=g.closest(".ctrl-holder");a.join.model.sq.isPreprovisioned?(b.addClass("hidden"),$(".join-product-options > .join-title-subsection").addClass("hidden"),n.addClass("hidden"),null!==a.join.model.sq.promotionId&&""!==a.join.model.sq.promotionId?(s.prop("disabled",!0),s.addClass("manual-enable"),l.closest(".btn-col").addClass("hidden")):(s.prop("disabled",!1),l.closest(".btn-col").removeClass("hidden"))):($(".join-product-options > .join-title-subsection").removeClass("hidden"),b.removeClass("hidden"),n.removeClass("hidden"),s.prop("disabled",!1),l.closest(".btn-col").removeClass("hidden"))},renderChargesForPreprovisioned:function(){},updateViewBasedOnSq:function(){if(a.sqUtil.is.nbnOrder(a.join.model.sq.broadbandTechType));else if(a.sqUtil.is.adsl1Order(a.join.model.sq.broadbandTechType)){var b="";b+="#join-product-access-types #atype-ADSL2_BUNDLE, #join-product-access-types #atype-ADSL2_BROADBAND";var d=$(b);d.length>0&&d.each(function(){var a=$(this).html();a=a.replace("ADSL2+","ADSL"),$(this).html(a)})}$(".join-product-access-types").removeClass("hidden"),$(".access-type").addClass("hidden"),c.methods.handlePreProvisionedRender(),a.join.common.switchContractOption(E.withContract),y.initDisplayedProducts()},updateModel:function(){var b=!1;if(a.sqUtil.is.nbnOrder(a.join.model.sq.broadbandTechType)?"NBN"!==E.planType&&(b=!0):"NBN"===E.planType&&(b=!0),b===!0&&(E.planType="",E.planSize="",E.plan_id=""),null===E.plan_id||""===E.plan_id){var d=c.methods.getDefaultPlan(a.join.model.sq.broadbandTechType);E.planType=d.planType,E.planSize=d.planSize,E.plan_id=d.plan_id,a.adobeAnalytics.pages.join.productPreSelection(E.plan_id),a.analytics.methods.join.productPreSelection(E.plan_id)}if(E.plan_id){if(E.planType=B.products[E.plan_id].plan_type,E.planSize=B.products[E.plan_id].plan_size,E.html_plan_id=B.products[E.plan_id].html_plan_id,E.monthly_price=B.products[E.plan_id].monthly_price,E.contract_price=B.products[E.plan_id].contract_price,E.speedboostAvailable=B.products[E.plan_id].speedboost,a.join.model.sq.extendedNetwork&&(E.monthly_price=parseInt(E.monthly_price)+JOIN_PRODUCT_STRUCTURE.extendedNetworkSurcharge,E.contract_price=parseInt(E.contract_price)+JOIN_PRODUCT_STRUCTURE.extendedNetworkSurcharge),"undefined"!=typeof a.join.model.product.NDCCost){var e=a.join.model.product.NDCCost;e<300?E.monthlyNDCCost=e:E.upfrontNDCCost=e}if("undefined"!=a.join.model.product.contractTerm){var f,g=a.join.model.product.contractTerm;switch(g){case"TWELVE_MONTHS":f=12;break;case"MONTH_BY_MONTH":f=1;break;default:f=1}E.contract_months=f}E.promotionId&&!E.changingPromo?c.methods.hasPromoBeenApplied()||c.methods.getPromotion(E.promotionId):c.methods.resetOnceOffFees();var h,i=E.withContract?E.contract_price:E.monthly_price;if(E.speedboost)switch(E.planSpeed.toString()){case"25/5":h=parseFloat(B.charges.speed_boost_fee_1);break;case"100/40":h=parseFloat(B.charges.speed_boost_fee_2)}else h=0;var j=0;E.voice_national_cost=0,E.voice_international_cost=0,B.belongTrial||(E.voice_national&&(E.voice_national_cost=B.charges.voice_national,j+=parseFloat(B.charges.voice_national)),E.voice_international&&(E.voice_international_cost=B.charges.voice_international,j+=parseFloat(B.charges.voice_international))),c.methods.updateVoicePlan(E.voice_national,E.voice_international);var k=(E.withContract?B.charges.modem_rebate_fee:0,E.withContract?E.contract_months:1);E.activation_fee=B.charges.activation_fee;var l=E.promotion&&E.promotion.success&&E.promotion.promotion&&E.promotion.promotion.promotion||!1;if(l&&l[c.methods.getPromoOrderType()]&&(E.activation_fee=l[c.methods.getPromoOrderType()]),E.modem_fee=c.methods.getBaseModemFee(),E.withContract){if(E.promotion&&c.methods.isPromoAppliedSuccessful()){var m=E.promotion.promotion.modemCostContract;"undefined"!=typeof m&&""!==m&&m>=0&&m<=E.modem_fee&&(E.modem_fee=m);var n=E.promotion.promotion.modemDiscountContract;"undefined"!=typeof n&&""!==n&&n>=0&&(E.modem_fee=parseFloat(E.modem_fee-E.modem_fee*n).toFixed(2))}}else{if(E.promotion&&c.methods.isPromoAppliedSuccessful()){var o=E.promotion.promotion.modemCostNonContract;"undefined"!=typeof o&&""!==o&&o>=0&&(E.modem_fee=o);var p=E.promotion.promotion.modemDiscountNonContract;"undefined"!=typeof p&&""!==p&&p>=0&&(E.modem_fee=parseFloat(E.modem_fee-E.modem_fee*p).toFixed(2))}"RAPID"===E.promotionId&&(E.modem_fee=0)}var q=0;a.join.model.sq.isPreprovisioned&&(q=i+h+j),E.calculatedMTC?E.total_minimum_cost=E.calculatedMTC:E.total_minimum_cost=(i+h-q+j+E.monthlyNDCCost)*k+parseFloat(E.activation_fee)+parseFloat(E.modem_fee)+E.upfrontNDCCost,E.speed_boost_fee=h,E.monthly_total_cost=i+h+j+E.monthlyNDCCost,E.charges_title=B.products[E.plan_id].title_incl_size}},updateVoicePlan:function(b,c){b&&c?(E.voicePlan="BOTH",a.adobeAnalytics.pages.join.addVoice(E.voicePlan),a.analytics.methods.join.addVoice(E.voicePlan)):b?(E.voicePlan="NATIONAL",a.adobeAnalytics.pages.join.addVoice(E.voicePlan),a.analytics.methods.join.addVoice(E.voicePlan)):c?(E.voicePlan="INTERNATIONAL",a.adobeAnalytics.pages.join.addVoice(E.voicePlan),a.analytics.methods.join.addVoice(E.voicePlan)):E.voicePlan=""},renderPromo:function(){if(a.validation.resetCustomMessages(w),
$(".promo-input-wrapper .error").removeClass("error"),$(".charges-row.modem-fee .special").addClass("hidden"),$("#txtpromocode").val(E.promotionId),c.methods.hasPromoBeenApplied())if(E.promotion&&E.promotion.success)if(c.methods.isCurrentPromoForContractAndNonContract())c.methods.updatePromoView("."+E.promotion.promotion.campaignType,".applied"),c.methods.isCurrentPromoAModemPromo()&&$(".charges-row.modem-fee .special").removeClass("hidden"),c.methods.isCurrentPromoAnActivationPromo()&&$("#join-product-charges .activation-fee .special").removeClass("hidden");else{var b;c.methods.isCurrentPromoContract()&&E.withContract?(c.methods.updatePromoView("."+E.promotion.promotion.campaignType,".applied"),c.methods.isCurrentPromoAModemPromo()&&$(".charges-row.modem-fee .special").removeClass("hidden")):c.methods.isCurrentPromoContract()&&!E.withContract?(c.methods.resetPromotion(),b=a.responseMessage.getApiMessage("join-belong","validatePromotion","ONLY_CONTRACT"),w=a.validation.attachCustomMessage("txtpromocode",b,"error",!0),$("#txtpromocode").addClass("error")):c.methods.isCurrentPromoNonContract()&&E.withContract?(b=a.responseMessage.getApiMessage("join-belong","validatePromotion","ONLY_NONCONTRACT"),w=a.validation.attachCustomMessage("txtpromocode",b,"error",!0),$("#txtpromocode").addClass("error")):c.methods.isCurrentPromoNonContract()&&!E.withContract&&(c.methods.updatePromoView("."+E.promotion.promotion.campaignType,".applied"),c.methods.isCurrentPromoAModemPromo()&&$(".charges-row.modem-fee .special").removeClass("hidden")),"HALO5"!==BELONG.join.model.promotionId||E.withContract||(b=a.responseMessage.getApiMessage("join-belong","validatePromotion","ONLY_CONTRACT"),w=a.validation.attachCustomMessage("txtpromocode",b,"error",!0),$("#txtpromocode").addClass("error"))}else{var d=""!==E.promotion.errorType&&void 0!==E.promotion.errorType?E.promotion.errorType:"ERROR_DEFAULT",e=a.responseMessage.getApiMessage("join-belong","validatePromotion",d);w=a.validation.attachCustomMessage("txtpromocode",e,"error",!0)}},hasPromoBeenApplied:function(){return E.promotion&&Object.keys(E.promotion).length>0},isCurrentPromoForContractAndNonContract:function(){if(E.promotion){if(E.promotion.promotion.promotion||E.promotion.promotion.discount>0)return!0;if(c.methods.isCurrentPromoContract()&&c.methods.isCurrentPromoNonContract()||!c.methods.isCurrentPromoContract()&&!c.methods.isCurrentPromoNonContract())return!0}return!1},isCurrentPromoContract:function(){if(E.promotion.promotion){var a=E.promotion.promotion.modemCostContract,b=E.promotion.promotion.modemDiscountContract,d="undefined"!=typeof a&&""!==a&&a>=0&&a<=c.methods.getBaseModemFee(),e="undefined"!=typeof b&&""!==b&&b>=0;return d||e}return!1},isCurrentPromoNonContract:function(){if(E.promotion.promotion){var a=E.promotion.promotion.modemCostNonContract,b=E.promotion.promotion.modemDiscountNonContract,c="undefined"!=typeof a&&""!==a&&a>=0,d="undefined"!=typeof b&&""!==b&&b>=0;return c||d}return!1},isCurrentPromoAModemPromo:function(){return c.methods.isCurrentPromoContract()&&E.withContract||c.methods.isCurrentPromoNonContract()&&!E.withContract},getPromoOrderType:function(){return a.sqUtil.is.nbnOrder(a.join.model.sq.broadbandTechType)?"NEW_ORDER":a.join.model.sq.orderType},isCurrentPromoAnActivationPromo:function(){var a=E.promotion&&E.promotion.success&&E.promotion.promotion&&E.promotion.promotion.promotion||!1;return!(!a||!a[c.methods.getPromoOrderType()])},isPromoAppliedSuccessful:function(){return E.promotion&&E.promotion.success},getBaseModemFee:function(){var a=B.charges.modem_fee;return B.charges.modem_contract_rebate>=0&&E.withContract&&(a=B.charges.modem_contract_rebate),a},setupCmsData:function(){B.charges={activation_fee:o.data("activation-fee"),modem_fee:o.data("modem-fee"),speed_boost_fee_1:o.data("speedBoostFeeOne"),speed_boost_fee_2:o.data("speedBoostFeeTwo"),modem_rebate_fee:o.data("modem-rebate"),contract_length:o.data("contract-length"),modem_contract_rebate:o.data("modem-contract-rebate"),voice_national:o.data("voice-national"),voice_international:o.data("voice-international")},$.each(JOIN_PRODUCT_STRUCTURE.products,function(a,b){$.each(b.plans,function(a,c){var d=b.productSize+"-"+c.planType+"-"+c.technologyType;B.products[d]={html_plan_id:c.planId,plan_size:b.productSize,data_allowance:b.dataAllowance,speedboost:"NBN"===b.productType,plan_type:c.planType,monthly_price:parseInt(c.monthlyPrice),contract_price:parseInt(c.monthlyContractPrice),title_incl_size:c.chargesDisplayName,technologyType:c.technologyType,technologyDisplayName:c.technologyDisplayName}})}),B.charges.modem_rebate_fee>0&&$(this).find(".monthly-price .value .b-contract").html(parseFloat($(this).data("monthly-price"))-parseFloat(B.charges.modem_rebate_fee)),B.belongTrial=k.data("trial")},getPromotion:function(a){"RAPID"===a.toUpperCase()?($("#atype-NBNSC3_pre_provisioning").removeClass("hidden"),$("#atype-NBNSC3").addClass("hidden").addClass("rapid"),$(".bc-dark-green").hide(),$(".product-selection-item.bc-lime").last().css("border-radius","0 0 5px 5px")):$("#atype-NBNSC3").hasClass("rapid")&&($("#atype-NBNSC3_pre_provisioning").addClass("hidden"),$("#atype-NBNSC3").removeClass("hidden").remove("rapid"))},resetPromotion:function(){s.attr("placeholder",""),t.find(".promo-msg").addClass("hidden"),t.find(".promo-apply span").addClass("hidden"),t.find(".promo-apply .default").removeClass("hidden"),$("#join-product-charges .special").addClass("hidden"),$("#"+z).removeClass("promo-applied"),w&&a.validation.removeCustomMessage(w),c.methods.resetOnceOffFees(),c.methods.updatePromoView("",".default")},clearPromoFields:function(){E.promotion=null,E.promotionId="",E.promotionStaffId="",w&&a.validation.removeCustomMessage(w),$(".promo-input-wrapper .error").removeClass("error")},updatePromoView:function(a,b){t.find(".promo-msg").addClass("hidden"),a&&t.find(".promo-msg"+a).removeClass("hidden"),t.find(".promo-apply span").addClass("hidden"),b&&t.find(".promo-apply "+b).removeClass("hidden")},populateStaffPromoTandC:function(a){$.ajax("/apps/belong/promotion/termsAndConditions."+a+".html",{dataType:"text"}).then(function(a){$(".join-staff-promo-tc-content").html(a)})},displayStaffPromoModal:function(a,b){F=!1,$.magnificPopup.open({items:{src:"#join-staff-promo-tc",type:"inline"},showCloseBtn:!0,closeOnBgClick:!1,enableEscapeKey:!1,overflowY:"hidden"}),$("#btn-staff-promo-tc").off("click").on("click",{result:a,code:b},c.events.staffPromoClose),$.magnificPopup.instance.close=function(){F||(c.methods.resetPromotion(),c.methods.clearPromoFields()),$.magnificPopup.proto.close.call(this)}},validateStaffPromoPopup:function(b){G.forEach(function(b){a.validation.removeCustomMessage(b)});var c=!0;if(!$("#staff-id").val()){var d=a.responseMessage.getValidationMessage(A,"product","staff-promo-staff-id-input-required");G.push(a.validation.attachCustomMessage("staff-id",d,"error",!0)),c=!1}if(!$("#chk-staff-promo-tc").prop("checked")){var d=a.responseMessage.getValidationMessage(A,"product","staff-promo-tc-input-required");G.push(a.validation.attachCustomMessage("label-staff-promo-tc",d,"error",!0)),c=!1}return c},resetOnceOffFees:function(){E.activation_fee=B.charges.activation_fee,E.modem_fee=B.charges.modem_fee},setEdit:function(a){$("#"+z).addClass("edit").removeClass("readonly").removeClass("collapsed"),a?$(a).velocity("stop").velocity("scroll",{duration:400,easing:"ease-out",offset:-70}):$("#"+z).velocity("stop").velocity("scroll",{duration:400,easing:"ease-out",offset:-70}),$("#"+z+" input:not(.manual-enable)").removeAttr("disabled"),c.methods.render()},setReadOnly:function(){$("#"+z).addClass("readonly").removeClass("edit").removeClass("collapsed"),$("#"+z+" input").attr("disabled","disabled")},setCollapsed:function(){$("#"+z).addClass("collapsed").removeClass("edit").removeClass("readonly")},resetForm:function(){a.join.model.product.planType="",a.join.model.product.planSize="",a.join.model.product.contractTerm="",a.join.model.product.promotionId=a.join.model.sq.promotionId,a.join.model.product.promotionStaffId="",a.join.model.product.planSpeed="",a.join.model.product.voicePlan="",E=c.methods.getDefaultModel(),c.methods.updateModel(),c.methods.render(),a.join.common.updateAccessType()}},display:{promoApplyButton:function(){$(".promo-apply").removeClass("hidden")}},hide:{promoApplyButton:function(){$(".promo-apply").addClass("hidden")}},events:{onContinue:function(b){if(b.preventDefault(),a.validation.validateForm(x)){c.methods.hasPromoBeenApplied()&&c.methods.isPromoAppliedSuccessful()?c.methods.isCurrentPromoForContractAndNonContract()||(c.methods.isCurrentPromoContract()&&!E.withContract||c.methods.isCurrentPromoNonContract()&&E.withContract)&&c.methods.clearPromoFields():c.methods.clearPromoFields(),$("#join-products .join-section-footer").removeClass("error"),c.methods.setReadOnly(),a.join.model.product={planType:E.planType,speedboost:!!E.speedboost&&E.speedboost,planSize:E.planSize,planSpeed:E.planSpeed,contractTerm:a.join.common.getDefaultContractTerm(E.withContract),promotionId:E.promotionId,promotionStaffId:E.promotionStaffId,voicePlan:E.voicePlan},a.adobeAnalytics.pages.join.steps("1-Product Cont.","1-product-cont.html",E.plan_id),a.analytics.methods.join.joinSteps("1-Product Cont.","1-product-cont.html",E.plan_id);var d=E.planType,e=E.planSize,f=E.total_minimum_cost,g=E.withContract;a.livePerson.join.productContinue(d,e,f,g),a.join.methods.activateNextModule(z),a.join.payconfirm.methods.sqUpdateHandler()}else $("#product-selection-input-error").length>0&&($("#join-products .join-section-footer").addClass("error"),$("#product-section-footer").append($("#product-selection-input-error")),a.adobeAnalytics.pages.join.errorProductSelection($("#product-selection-input-error").text()),a.analytics.methods.joinErrors.errorProductSelection($("#product-selection-input-error").text()));return!1},updateModelHandler:function(a){c.methods.updateModel(),c.methods.render()},updateProductSelectionHandler:function(b,d,e,f){d&&e&&f&&(E.plan_id=d+"-"+e+"-"+f,a.adobeAnalytics.pages.join.productSelection(E.plan_id),a.analytics.methods.join.productSelection(E.plan_id)),c.methods.updateModel(),c.methods.render(),a.join.common.updateAccessType(e),E.plan_id&&$("#"+z+" .join-section-footer").removeClass("error")},contractHandler:function(b){E.withContract=!!g.prop("checked"),E.withContract&&(a.adobeAnalytics.pages.join.checkContract(),a.analytics.methods.join.checkContract()),a.join.common.switchContractOption(E.withContract),c.methods.updateModel(),c.methods.render()},belongVoiceHandler:function(a){"NATIONAL"===$(this).val()&&(E.voice_national=$(this).prop("checked")),"INTERNATIONAL"===$(this).val()&&(E.voice_international=$(this).prop("checked")),c.methods.updateModel(),c.methods.render()},voiceTooltipHandler:function(a){return!1},speedboostHandler:function(b){switch("1"===$(this).val()&&"25/5"===E.planSpeed?(E.planSpeed="",E.speedboost=!1,$(this).prop("checked","")):"2"===$(this).val()&&"100/40"===E.planSpeed?(E.planSpeed="",E.speedboost=!1,$(this).prop("checked","")):($('input[name="chk-join-speedboost"].checkbox:checked:visible').length>0?"1"===$('input[name="chk-join-speedboost"].checkbox:checked:visible').val()?E.planSpeed="25/5":"2"===$('input[name="chk-join-speedboost"].checkbox:checked:visible').val()&&(E.planSpeed="100/40"):"1"===$('input[name="chk-join-speedboost"].radio:checked:visible').val()?E.planSpeed="25/5":"2"===$('input[name="chk-join-speedboost"].radio:checked:visible').val()&&(E.planSpeed="100/40"),E.speedboost=!0),E.planSpeed){case"25/5":a.adobeAnalytics.pages.join.addSpeedBoost25(),a.analytics.methods.join.addSpeedBoost25();break;case"100/40":a.adobeAnalytics.pages.join.addSpeedBoost100(),a.analytics.methods.join.addSpeedBoost100()}c.methods.updateModel(),c.methods.render()},applyPromotionHandler:function(a){return a.preventDefault(),E.promotionId=$("#txtpromocode").val(),E.promotion=null,E.changingPromo=!1,c.methods.updateModel(),c.methods.render(),!1},changePromoHandler:function(a){if($("#txtpromocode").val()!=E.promotionId){E.changingPromo=!0;var b=$("#txtpromocode").val();E.promotion=null,c.methods.resetPromotion(),E.promotionId=b,c.methods.updateModel(),c.methods.render()}},staffPromoClose:function(b){b.preventDefault(),a.join.product.methods.validateStaffPromoPopup()&&(E.promotionStaffId=$("#staff-id").val(),c.methods.setPromotion(b.data.result,b.data.code),a.adobeAnalytics.pages.join.promoAppliedStaffDiscount(E.promotionId),a.analytics.methods.join.promoAppliedStaffDiscount(E.promotionId),F=!0,$.magnificPopup.close())}}}}()}(BELONG),function(a){"use strict";a.join=a.join||{},a.join.sectionFooter=function(){var a;return{init:function(){a=this},methods:{setEdit:function(a){},setReadOnly:function(a){}},events:{}}}()}(BELONG),function(a){"use strict";a.join=a.join||{},a.join.sectionHeader=function(){var b;return{init:function(){b=this},methods:{},events:{onChangeClick:function(b){for(var c=($(".join-submodule.edit").attr("id"),$(this).closest(".join-submodule")),d=c.attr("id"),e=a.join.methods.getNextModules(d),f=0;f<e.length;f++)a.join.methods.collapseModule(e[f]);return a.join.methods.activateModule(d),!1}}}}()}(BELONG),function(a){"use strict";a.join=a.join||{},$.extend(a.join,function(){var b,c=!1,d={products:"join-products",personal:"join-personal",payconfirm:"join-payconfirm",productCharges:"join-product-charges",personalCharges:"join-personal-charges"},e=[d.products,d.personal,d.payconfirm],f={TWELVE_MONTHS:"TWELVE_MONTHS",SIX_MONTHS:"SIX_MONTHS"};return{init:function(){b=this,$("#join-belong").each(function(){b.methods.fromProductBuilder()?($("#join-personal .join-section-header .step").html("1"),$("#join-payconfirm .join-section-header .step").html("2")):$(".join-product-details").removeClass("hidden"),a.join.product.init(),a.join.personal.init(),a.join.payconfirm.init(),b.methods.fromProductBuilder()===!1&&b.methods.collapseModule(d.products),b.methods.collapseModule(d.personal),b.methods.collapseModule(d.payconfirm);var e=sessionStorage.getItem("productModel"),f={};e&&(f=JSON.parse(e)),"true"===sessionStorage.getItem("sqDone")&&$.get("/bin/belong/join/retrieve").then(function(a){b.methods.handleExistingSqSession(a,f)},function(a){b.methods.handleExistingSqSession(a.responseJSON,f)}),c="true"===a.util.loadPageVar("promo"),$(".change-link").off("click.sectionHeader").on("click.sectionHeader",a.join.sectionHeader.events.onChangeClick)})},methods:{fromProductBuilder:function(){return"true"===a.util.loadPageVar("productbuilder")},activateModule:function(b){switch(b){case d.products:a.join.product.methods.setEdit();break;case d.personal:a.join.personal.methods.setEdit();break;case d.payconfirm:a.join.payconfirm.methods.setEdit();break;case d.productCharges:a.join.product.methods.setEdit();break;case d.personalCharges:a.join.personal.methods.setEdit()}},activateNextModule:function(a){var c=e[e.indexOf(a)+1];b.methods.activateModule(c)},collapseModule:function(b){switch(b){case d.products:a.join.product.methods.setCollapsed();break;case d.personal:a.join.personal.methods.setCollapsed();break;case d.payconfirm:a.join.payconfirm.methods.setCollapsed()}},setModuleToReadonly:function(b){switch(b){case d.products:a.join.product.methods.setReadOnly();break;case d.personal:a.join.personal.methods.setReadOnly();break;case d.payconfirm:a.join.payconfirm.methods.setReadOnly()}},isPrevious:function(a,c){return b.methods.getModuleOrderNumber(a)<b.methods.getModuleOrderNumber(c)},getModuleOrderNumber:function(a){for(var b=0;b<e.length;b++)if(a===e[b])return b;return-1},getNextModules:function(a){return e.slice(b.methods.getModuleOrderNumber(a)+1)},handleApiErrors:function(a){$(".top").append('<div class="rest-error error-banner">'+a+"</div>")},handleExistingSqSession:function(e,f){if(e.success){var g=f.planType||"",h=f.planSize||"";if(a.livePerson.join.pageEntry(g,h),$.isEmptyObject(f)){var i=e.broadbandTechType;"FTTN"===i||"FTTB"===i||"FTTP"===i?window.location.pathname="/nbn":"ADSL1"!==i&&"ADSL2"!==i||(window.location.pathname="/adsl")}a.join.model.sq.phoneNumber=e.homePhone,a.join.model.sq.serviceStreetNumber=e.serviceStreetNumber,a.join.model.sq.serviceStreet=e.serviceStreet,a.join.model.sq.serviceStreetType=e.serviceStreetType,a.join.model.sq.serviceExchange=e.serviceExchange,a.join.model.sq.serviceSubAddressDetails=e.serviceSubAddressDetails,a.join.model.sq.serviceSuburb=e.serviceSuburb,a.join.model.sq.serviceState=e.serviceState,a.join.model.sq.servicePostcode=e.servicePostcode,a.join.model.sq.serviceAddressId=e.serviceAddressId,a.join.model.sq.isNbn="NBN"===e.sqType,a.join.model.sq.orderType="undefined"!=typeof e.serviceClass&&null!==e.serviceClass&&""!==e.serviceClass?e.serviceClass:e.orderType,a.join.model.sq.broadbandTechType=e.broadbandTechType,a.join.model.sq.isPreprovisioned=e.preProvisioned,a.join.model.sq.extendedNetwork=e.extendedNetwork,a.join.model.sq.isNdcAddress=f.isNdcAddress,a.join.model.sq.promotionId=a.join.model.sq.isPreprovisioned?e.promotionId:"",a.join.model.product.planType=f.planType?f.planType:e.planType,a.join.model.product.planSize=f.planSize?f.planSize:e.planSize,a.join.model.product.planSpeed=f.planSpeed?f.planSpeed:e.planSpeed,a.join.model.product.ndcUpfrontOption=f.ndcUpfrontOption,a.join.model.product.promotionId=f.promotionId?f.promotionId:e.promotionId,a.join.model.product.campaignCode=f.campaignCode?f.campaignCode:"",a.join.model.product.promotionStaffId=f.promotionStaffId?f.promotionStaffId:e.promotionStaffId,a.join.model.product.staffPromoSavedInSession=!!a.join.model.product.promotionStaffId,a.join.model.product.isPromotionalSpeedboost=f.isPromotionalSpeedboost,a.join.model.product.contractTerm=f.contractTerm?f.contractTerm:e.contractTerm,a.join.model.product.calculatedMTC=f.calculatedMTC,a.join.model.product.voicePlan=f.voicePlan?f.voicePlan:e.voicePlan,a.join.model.product.NDCCost=f.NDCCost?f.NDCCost:e.NDCCost,a.join.model.personalDetails.firstName=e.firstName,a.join.model.personalDetails.lastName=e.lastName,a.join.model.personalDetails.email=e.email,a.join.model.personalDetails.password=e.password,a.join.model.personalDetails.dateOfBirth=e.dateOfBirth,a.join.model.personalDetails.mobilePhone=e.mobilePhone,a.join.model.personalDetails.portCurrentAccountNumber=e.currentAccountNumber,a.join.model.personalDetails.portCurrentProvider=e.currentProvider,a.join.model.personalDetails.portNameOnBill=e.nameOnCurrentBill,a.join.product.methods.prefill(),a.join.personal.methods.prefill(),b.methods.fromProductBuilder()?($(".join-product-summary").removeClass("hidden"),$("#join-products").removeClass("collapsed").addClass("readonly"),b.methods.activateModule(d.personalCharges)):c&&!$.isEmptyObject(f)?b.methods.activateModule(d.productCharges):c||$.isEmptyObject(f)?b.methods.activateModule(d.products):(b.methods.setModuleToReadonly(d.products),b.methods.activateModule(d.personalCharges))}else if("undefined"!=typeof e.messages[0].userMessage){var j=e.messages[0].userMessage,k=a.responseMessage.getApiMessage("join-belong","sqSession",j);""!==k&&b.methods.handleApiErrors(k)}}},common:{getDefaultContractTerm:function(a){return"undefined"!==a?a?f.TWELVE_MONTHS:null:f.TWELVE_MONTHS},getAccessTypeFromOrderType:function(b){if("CHURN_ORDER"===a.join.model.sq.orderType){if("DSL"===b)return"ADSL2_BROADBAND";if("BUNDLE"===b)return"ADSL2_BUNDLE"}var c={NBN_SERVICE_CLASS_ONE:"NBNSC1_2",NBN_SERVICE_CLASS_TWO:"NBNSC1_2",NBN_SERVICE_CLASS_THREE:"NBNSC3",NBN_SERVICE_CLASS_ELEVEN:"NBNSC11",NBN_SERVICE_CLASS_TWELVE:"NBNSC12",NBN_SERVICE_CLASS_THIRTEEN:"NBNSC13",NBN_SERVICE_CLASS_TWENTY_ONE:"NBNSC21",NBN_SERVICE_CLASS_TWENTY_TWO:"NBNSC22",NBN_SERVICE_CLASS_TWENTY_THREE:"NBNSC23",NBN_SERVICE_CLASS_TWENTY_FOUR:"NBNSC24",NEW_ORDER:"ADSL2_BUNDLE",PORT_ORDER:"ADSL2_BUNDLE",CHURN_ORDER:"ADSL2_BROADBAND"};return c.hasOwnProperty(a.join.model.sq.orderType)?c[a.join.model.sq.orderType]:""},switchContractOption:function(a){a?($(".contract").removeClass("hidden"),$(".non-contract").addClass("hidden")):($(".contract").addClass("hidden"),$(".non-contract").removeClass("hidden"))},updateAccessType:function(c){if($(".join-product-access-types").addClass("hidden"),$(".access-type").addClass("hidden"),a.join.common.getAccessTypeFromOrderType()){var d=b.common.getAccessTypeFromOrderType(c).toLowerCase();$("."+d).each(function(){if(""!==$.trim($(this).text())){$(this).removeClass("hidden");var a=$(this).parent();a.hasClass("join-product-access-types")&&a.removeClass("hidden")}else $(this).addClass("hidden")}),a.join.model.sq.isPreprovisioned&&""!==a.join.model.sq.promotionId&&null!==a.join.model.sq.promotionId&&($("#atype-NBNSC3_pre_provisioning").removeClass("hidden"),$("#atype-NBNSC3").addClass("hidden"))}}}}}())}(BELONG);var moveDatePicker;!function(a){"use strict";a.leadGenerationForm={init:function(){if(0===$("#lead-generation-form-container").length)return!1;if($.fn.pickadate){var b=$("#lead-generation-form-move-date-select");moveDatePicker=b.pickadate({weekdaysShort:["S","M","T","W","T","F","S"],closeOnClear:!1,format:"dddd, dd mmmm yyyy",formatSubmit:"yyyy-mm-dd",min:new Date((new Date).getTime()+864e5)})}var c=new a.leadGenerationForm.leadGenerationFormViewModel;ko.applyBindings(c,document.getElementById("lead-generation-form-container"))}},a.leadGenerationForm.leadGenerationFormViewModel=function(){var b=this;b.prospectFirstName=ko.observable(),b.prospectLastName=ko.observable(),b.emailAddress=ko.observable(),b.moveDate=ko.observable(),b.leadType=$("#lead-generation-form-lead-type").val(),b.showForm=ko.observable(!0),b.showSubmitSuccess=ko.observable(!1),b.showSubmitFail=ko.observable(!1),b.leadGenerationValidator=null,b.setupFormValidation=function(){var c={ignore:"",rules:{"lead-generation-form-prospect-first-name":{required:!0,disallowedCharacters:!0,maxlength:255},"lead-generation-form-prospect-last-name":{required:!0,disallowedCharacters:!0,maxlength:255},"lead-generation-form-prospect-email-address":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255}}};"moves"===b.leadType&&(c.rules["lead-generation-form-move-date"]={required:!0});var d="lead-generation-form";b.leadGenerationValidator=a.validation.setupFormValidation(d,$("#"+d),c)},b.submit=function(){var c=a.validation.validateForm(b.leadGenerationValidator);if(c!==!1){var d={firstName:b.prospectFirstName(),lastName:b.prospectLastName(),email:b.emailAddress(),leadType:b.leadType,moveDate:""};"EOI - Move"===b.leadType&&(d.moveDate=moment(b.moveDate()).format("YYYY-MM-DD"));var e="/bin/belong/salesforce/lead/create";BELONG.DEVSWITCH===!0&&(e="/bin/belong/salesforce/lead/create?success"),$.post(e,d).done(function(c){c.success?(a.adobeAnalytics.pages.leadGenerationForm.submit(d),b.showForm(!1),b.showSubmitSuccess(!0)):(b.showForm(!1),b.showSubmitFail(!0))}).fail(function(a,c,d){b.showForm(!1),b.showSubmitFail(!0)}).always(function(){b.scrollToLeadGenerationContainer()})}},b.scrollToLeadGenerationContainer=function(){var a=$("#lead-generation-form-container").offset().top-200;$("html, body").animate({scrollTop:a},500)},function(){var a=$("#lead-generation-form-move-date-select").pickadate(),c=a.pickadate("picker");c&&c.on({close:function(){var a=this.get("select","yyyy-mm-dd");b.moveDate(a),$("#lead-generation-form-move-date").val(a),$("#lead-generation-form-move-date").valid()}}),b.setupFormValidation()}()}}(BELONG),function(a){"use strict";a.leadGenModal=a.leadGenModal||{},$.extend(a.leadGenModal,function(){var b;return{init:function(){return b=this,0!==$("#lead-generation-modal-container").length&&(ko.applyBindings(new a.leadGenModal.leadGenerationModalViewModel,document.getElementById("mdl-lead-gen")),a.leadGenModalVM=ko.contextFor(document.getElementById("mdl-lead-gen")).$data,void $(".fn_open-lead-gen-mdl").off("click").on("click",function(){return b.open(),!1}))},open:function(b){b=b||{},b.closeCallBack=b.closeCallBack||function(){},b.openCallBack=b.openCallBack||function(){},a.sqModal.ADDRESS_CHECK_SUPPRESSED=!1,$.magnificPopup.open({items:{src:"#mdl-lead-gen",type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,enableEscapeKey:!1,overflowY:"auto",fixedContentPos:"auto",callbacks:{open:function(){a.belongModal.setupAutoResize({modalContainer:$("#mdl-lead-gen"),nameSpace:"modalAutoResizeLeadGen",noShadow:!0}),b.openCallBack()},close:function(){b.closeCallBack()}}})},close:function(){},leadGenerationModalViewModel:function(){var b=this;b.prospectFirstName=ko.observable(""),b.prospectLastName=ko.observable(""),b.emailAddress=ko.observable(""),b.moveDate=ko.observable(""),b.leadType=$("#lead-generation-modal-lead-type").val(),b.showForm=ko.observable(!0),b.showSubmitSuccess=ko.observable(!1),b.showSubmitFail=ko.observable(!1),b.leadGenerationValidator=null,$("#lead-generation-modal-move-date-select").pickadate({weekdaysShort:["S","M","T","W","T","F","S"],closeOnClear:!1,format:"dddd, dd mmmm yyyy",formatSubmit:"yyyy-mm-dd",min:new Date((new Date).getTime()+864e5)}),b.closeModal=function(){$.magnificPopup.proto.close.call(this)},b.setupFormValidation=function(){var c={ignore:"",rules:{"lead-generation-modal-prospect-first-name":{required:!0,disallowedCharacters:!0,maxlength:255},"lead-generation-modal-prospect-last-name":{required:!0,disallowedCharacters:!0,maxlength:255},"lead-generation-modal-prospect-email-address":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255}}};"EOI - Move"===b.leadType&&(c.rules["lead-generation-modal-move-date"]={required:!0});var d="lead-generation-modal";b.leadGenerationValidator=a.validation.setupFormValidation(d,$("#"+d),c)},b.submit=function(){var c=a.validation.validateForm(b.leadGenerationValidator);if(c!==!1){var d={firstName:b.prospectFirstName(),lastName:b.prospectLastName(),email:b.emailAddress(),leadType:b.leadType,moveDate:""};"EOI - Move"===b.leadType&&(d.moveDate=moment(b.moveDate()).format("YYYY-MM-DD"));var e="/bin/belong/salesforce/lead/create";BELONG.DEVSWITCH===!0&&(e="/bin/belong/salesforce/lead/create?success"),$.post(e,d).done(function(c){c.success?(a.adobeAnalytics.pages.leadGenerationForm.submit(d),b.showForm(!1),b.showSubmitSuccess(!0)):(b.showForm(!1),b.showSubmitFail(!0))}).fail(function(){b.showForm(!1),b.showSubmitFail(!0)}).always(function(){setTimeout(function(){a.belongModal.setHeights({modalContainer:$("#mdl-lead-gen"),noShadow:!0})},10),b.scrollToLeadGenerationContainer()})}},b.scrollToLeadGenerationContainer=function(){var a=$("#lead-generation-modal-container").offset().top-200;$("html, body").animate({scrollTop:a},500)},b.setupFormValidation()}}}())}(BELONG),function(a){"use strict";a.managePayment=a.managePayment||{},a.managePayment.invoiceCardVM=function(){var b=this;a.koComponents.tileButtonSlider.init(),b.util=a.util,b.isLoading=ko.observable(!0),b.serverError=ko.observableArray([]),b.downloadUrl="",b.downloadDate="",b.statementData=ko.observable(),b.emptyStatements=ko.observable(!0),b.monthSliderRef=null,b.init=function(){b.retrieveStatements()},b.retry=function(){b.isLoading(!0),b.serverError([]),b.retrieveStatements()},b.retrieveStatements=function(){var a=$.get("/bin/belong/auth/customer/payment/statements");a.done(function(a){b.statementData(a),b.initMonthSlider(a)}),a.fail(function(a){var c=a.responseJSON;"timeout"===a.statusText?b.serverError([{code:"ERROR_TIMEOUT"}]):void 0!==c&&void 0!==c.errors?b.serverError(c.errors):b.serverError([{code:"ERROR_DEFAULT"}])}),a.always(function(){b.isLoading(!1)})},b.downloadClicked=function(){if(""!==b.downloadUrl){var a;a=navigator.userAgent.match(/Android/)?b.downloadUrl.replace(".pdf",".pdfBelongComAu"):b.downloadUrl;var c=b.downloadDate;BELONG.adobeAnalytics.pages.managePayment.managePaymentDownloadInvoice(c),window.open(a,"_blank")}},b.monthSliderScopeCallback=function(a){b.monthSliderRef=a},b.sliderClicked=function(a){b.downloadUrl=a.downloadUrl,b.downloadDate=a.primaryLabel+" "+a.secondaryLabel},b.initMonthSlider=function(a){var c=[],d=0;d=a.latestStatement&&a.latestStatement.dateIssued?moment(a.latestStatement.dateIssued):a.allStatements&&a.allStatements.length>0?moment(a.allStatements[a.allStatements.length-1].dateIssued):0,$.each(a.allStatements,function(a,b){var e=moment(b.dateIssued),f=Number(d)==Number(e);"#"!==b.downloadPDFUrl&&c.push({primaryLabel:e.format("MMM").toUpperCase(),secondaryLabel:e.format("YYYY"),downloadUrl:b.downloadPDFUrl,initSelected:f})}),c.length&&(b.emptyStatements(!1),b.monthSliderRef.init(c),b.monthSliderRef.applyFlexSlider())}}}(BELONG),function(a){"use strict";a.managePayment=a.managePayment||{},a.managePayment.makePaymentVM=function(){var b=this;b.states={success:ko.observable(""),accountStatus:ko.observable(""),currentBalance:ko.observable(""),directDebitMethod:ko.observable(""),dueDate:ko.observable(""),paymentType:ko.observable(""),paypalCustomerId:ko.observable(""),creditCardLast4:ko.observable(""),creditCardType:ko.observable(""),nextPaymentDate:ko.observable(""),amountPaid:ko.observable(""),amountToPrepay:ko.observable(""),amountPrepaid:ko.observable(""),errorCode:ko.observable(""),serverError:ko.observableArray([]),processPaymentError:ko.observableArray([]),billingInProgress:ko.observable(""),paymentDetailsAvailableDateTime:ko.observable("")},b.paymentMethodMissing=ko.computed(function(){return"BT"===b.states.directDebitMethod()&&null===b.states.paymentType()}),b.PAYMENT_CARD_VIEWS=a.managePayment.paymentCardViews,b.PAYMENT_TYPES=a.managePayment.paymentTypes,b.PAYMENT_CARD_TYPES=a.managePayment.paymentCardTypes,b.util=a.util,b.currentView=ko.observable(b.PAYMENT_CARD_VIEWS.MAKE_PAYMENT).syncWith("currentView"),b.customAnimation=ko.observable(!1),b.currentView.subscribe(function(a){a===b.PAYMENT_CARD_VIEWS.MAKE_PAYMENT?b.init():b.customAnimation(!0)}),b.paymentProcessing=ko.observable(!1),b.isLoading=ko.observable(!0),b.paidTempState=ko.observable(!1),b.prepayView=ko.observable(!1),b.prepayState=ko.observable("DEFAULT"),b.defRetrieveErrorMsg=ko.observable(b.util.getCMSMessage("ERROR_DEFAULT",CMS_PAYMENT_CARD.paymentRetrieveServerErrors)),b.defPayProcessErrorMsg=ko.observable(b.util.getCMSMessage("ERROR_DEFAULT",CMS_PAYMENT_CARD.paymentProcessErrors)),b.states.paidMonth=ko.computed(function(){return b.states.dueDate()?moment(b.states.dueDate()).format("MMMM"):b.states.nextPaymentDate()?moment(b.states.nextPaymentDate()).subtract(1,"month").format("MMMM"):void 0}),b.states.prepaidMonth=ko.computed(function(){if(b.states.nextPaymentDate())return moment(b.states.nextPaymentDate()).format("MMMM")}),b.states.creditAmount=ko.computed(function(){return b.states.currentBalance()<0?-b.states.currentBalance():0}),b.payMethodHeading=ko.computed(function(){var a="";return a=b.states.errorCode()||b.states.processPaymentError().length?"Payment Unsuccessful:":"Payment method:","BT"!==b.states.directDebitMethod()&&(a=b.states.currentBalance()>0?"Payment Unsuccessful":""),a}),b.states.currentPayMethod=ko.computed(function(){var a=b.states.paymentType(),c="",d="";return"BT"!==b.states.directDebitMethod()?"":a===b.PAYMENT_TYPES.PAYPAL?(c="paypal",d=b.states.paypalCustomerId(),'<span class="svg-'+c+' payment-method-icon">PayPal</span><span>('+d+")</span>"):a===b.PAYMENT_TYPES.CREDITCARD?("Visa"===b.states.creditCardType()?c="visa":"MasterCard"===b.states.creditCardType()&&(c="master-card"),d="xxxx xxxx xxxx "+b.states.creditCardLast4(),'<span class="svg-'+c+'-card payment-method-icon">'+b.states.creditCardType()+"</span><span>("+d+")</span>"):void 0}),b.init=function(){b.retrieveData()},b.donePayment=function(){b.paidTempState(!1),b.retrieveData()},b.donePrepayPayment=function(){b.prepayView(!1),b.retrieveData()},b.cancelPrepayPayment=function(){b.prepayView(!1)},b.retrieveData=function(){b.isLoading(!0);var a=$.get("/bin/belong/auth/customer/payment/current");a.done(function(a){b.states.success(a.success),b.states.accountStatus(a.accountStatus),b.states.currentBalance(a.currentBalance),b.states.dueDate(a.dueDate),b.states.paymentType(a.paymentType),b.states.paypalCustomerId(a.paypalCustomerId),b.states.creditCardLast4(a.creditCardLast4),b.states.creditCardType(a.creditCardType),
b.states.nextPaymentDate(a.nextPaymentDate),b.states.amountPaid(a.amountPaid),b.states.amountToPrepay(a.amountToPrepay),b.states.amountPrepaid(a.amountPrepaid),b.states.errorCode(a.errorCode),b.states.directDebitMethod(a.directDebitMethod),b.states.billingInProgress(a.billingInProgress),b.states.serverError([]),b.states.billingInProgress()&&b.states.paymentDetailsAvailableDateTime(moment(a.paymentDetailsAvailableDateTime).format("h:mmA DD/MM/YYYY"))}),a.fail(function(a){var c=a.responseJSON;"timeout"===a.statusText?b.states.serverError([{code:"ERROR_TIMEOUT"}]):void 0!==c&&void 0!==c.errors?b.states.serverError(c.errors):b.states.serverError([{code:"ERROR_DEFAULT"}])}),a.always(function(){b.isLoading(!1)})},b.processPaymentDone=function(c){b.states.amountPaid(b.states.currentBalance()),b.states.currentBalance(0),b.paymentProcessing(!1),b.states.processPaymentError([]),b.paidTempState(!0),b.isLoading(!1),a.adobeAnalytics.pages.managePayment.retryPayment(!0,!1)},b.processPaymentFail=function(c){var d=c.responseJSON;"timeout"===c.statusText?b.states.processPaymentError([{code:"ERROR_TIMEOUT"}]):void 0!==d&&void 0!==d.errors?b.states.processPaymentError(d.errors):b.states.processPaymentError([{code:"ERROR_DEFAULT"}]);var e=b.states.processPaymentError()[0].code;a.adobeAnalytics.pages.managePayment.retryPayment(!1,e),b.paymentProcessing(!1),b.isLoading(!1)},b.processPayment=function(){b.paymentProcessing(!0);var a={},c=$.post("/bin/belong/auth/customer/payment/current",a);return c.then(b.processPaymentDone,b.processPaymentFail),!1},b.processPaymentRetry=function(){b.isLoading(!0);var a={},c=$.post("/bin/belong/auth/customer/payment/current",a);return c.then(b.processPaymentDone,b.processPaymentFail),!1},b.processPrePayDone=function(c){b.paymentProcessing(!1),b.prepayState("PAIDTEMP"),b.isLoading(!1),a.adobeAnalytics.pages.managePayment.prepaid(!0,!1)},b.processPrePayFail=function(c){var d=c.responseJSON;"timeout"===c.statusText?b.states.processPaymentError([{code:"ERROR_TIMEOUT"}]):void 0!==d&&void 0!==d.errors?b.states.processPaymentError(d.errors):b.states.processPaymentError([{code:"ERROR_DEFAULT"}]);var e=b.states.processPaymentError()[0].code;a.adobeAnalytics.pages.managePayment.prepaid(!1,e),b.paymentProcessing(!1),b.isLoading(!1)},b.processPrepayRetry=function(){b.isLoading(!0);var a={},c=$.post("/bin/belong/auth/customer/payment/next",a);return c.then(b.processPrePayDone,b.processPrePayFail),!1},b.processPrepay=function(){b.isLoading(!0);var a={},c=$.post("/bin/belong/auth/customer/payment/next",a);c.then(b.processPrePayDone,b.processPrePayFail)},b.selectPayMethod=function(){b.currentView(b.PAYMENT_CARD_VIEWS.SELECT_PAYMETHOD)},b.modifyPayMethod=function(){b.currentView(b.PAYMENT_CARD_VIEWS.MODIFY_PAYMETHOD)},b.prePayNextMonth=function(){b.prepayView(!0),b.prepayState("DEFAULT")}}}(BELONG),function(a){"use strict";a.managePayment=a.managePayment||{},$.extend(a.managePayment,function(){var b;return{init:function(){if(b=this,0===$("#cmp-manage-payment").length)return!1;var c=new a.managePayment.paymentCardVM,d=new a.managePayment.invoiceCardVM;ko.applyBindings(c,document.getElementById("ctn-payment-card")),ko.applyBindings(d,document.getElementById("ctn-invoice-card")),c.init(),d.init(),setTimeout(function(){a.adobeAnalytics.pages.managePayment.display()},400)},paymentCardViews:{MAKE_PAYMENT:"make_payment",MODIFY_PAYMETHOD:"modify_paymethod",SELECT_PAYMETHOD:"select_paymethod"},paymentCardTypes:{VISA:"visa",MASTERCARD:"master-card"},paymentTypes:{PAYPAL:"paypal",CREDITCARD:"credit_card"},modifyPayMethodRoutes:{DEFAULT:"DEFAULT",UPDATE:"UPDATE",SUCCESS:"SUCCESS"}}}())}(BELONG),function(a){"use strict";a.managePayment=a.managePayment||{},a.managePayment.modifyPayMethodVM=function(){var b=this,c="edit-form-creditcard",d="paypal-container";b.PAYMENT_CARD_VIEWS=a.managePayment.paymentCardViews,b.PAYMENT_TYPES=a.managePayment.paymentTypes,b.util=a.util,b.currentView=ko.observable().syncWith("currentView",!0),b.isLoading=ko.observable(!0),b.customAnimation=ko.observable(!0),b.clientToken=ko.observable("eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiIyZDc5OTUzYWRiYzQ4MmExMmM5MTQ5YmFkZGJkYjBmMTcxZGY4YzlmNzk3ODc0NDBlMDc5YTJkZjE2NThhOTcxfGNyZWF0ZWRfYXQ9MjAxNS0xMC0yNlQwNDo1OTozOS42OTY2MTA4MzgrMDAwMFx1MDAyNmN1c3RvbWVyX2lkPTIyNTU3MzQ4XHUwMDI2bWVyY2hhbnRfaWQ9cWc4eXlxdG5wcDZtc2s3eVx1MDAyNnB1YmxpY19rZXk9a2Z4NXhwNHJmaGNza2ozNSIsImNvbmZpZ1VybCI6Imh0dHBzOi8vYXBpLnNhbmRib3guYnJhaW50cmVlZ2F0ZXdheS5jb206NDQzL21lcmNoYW50cy9xZzh5eXF0bnBwNm1zazd5L2NsaWVudF9hcGkvdjEvY29uZmlndXJhdGlvbiIsImNoYWxsZW5nZXMiOlsiY3Z2Il0sImVudmlyb25tZW50Ijoic2FuZGJveCIsImNsaWVudEFwaVVybCI6Imh0dHBzOi8vYXBpLnNhbmRib3guYnJhaW50cmVlZ2F0ZXdheS5jb206NDQzL21lcmNoYW50cy9xZzh5eXF0bnBwNm1zazd5L2NsaWVudF9hcGkiLCJhc3NldHNVcmwiOiJodHRwczovL2Fzc2V0cy5icmFpbnRyZWVnYXRld2F5LmNvbSIsImF1dGhVcmwiOiJodHRwczovL2F1dGgudmVubW8uc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbSIsImFuYWx5dGljcyI6eyJ1cmwiOiJodHRwczovL2NsaWVudC1hbmFseXRpY3Muc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbSJ9LCJ0aHJlZURTZWN1cmVFbmFibGVkIjpmYWxzZSwicGF5cGFsRW5hYmxlZCI6dHJ1ZSwicGF5cGFsIjp7ImRpc3BsYXlOYW1lIjoiT2JqZWN0IENvbnN1bHRpbmciLCJjbGllbnRJZCI6bnVsbCwicHJpdmFjeVVybCI6Imh0dHA6Ly9leGFtcGxlLmNvbS9wcCIsInVzZXJBZ3JlZW1lbnRVcmwiOiJodHRwOi8vZXhhbXBsZS5jb20vdG9zIiwiYmFzZVVybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXNzZXRzVXJsIjoiaHR0cHM6Ly9jaGVja291dC5wYXlwYWwuY29tIiwiZGlyZWN0QmFzZVVybCI6bnVsbCwiYWxsb3dIdHRwIjp0cnVlLCJlbnZpcm9ubWVudE5vTmV0d29yayI6dHJ1ZSwiZW52aXJvbm1lbnQiOiJvZmZsaW5lIiwidW52ZXR0ZWRNZXJjaGFudCI6ZmFsc2UsImJyYWludHJlZUNsaWVudElkIjoibWFzdGVyY2xpZW50MyIsImJpbGxpbmdBZ3JlZW1lbnRzRW5hYmxlZCI6ZmFsc2UsIm1lcmNoYW50QWNjb3VudElkIjoiQmVsb25nQVVEIiwiY3VycmVuY3lJc29Db2RlIjoiQVVEIn0sImNvaW5iYXNlRW5hYmxlZCI6ZmFsc2UsIm1lcmNoYW50SWQiOiJxZzh5eXF0bnBwNm1zazd5IiwidmVubW8iOiJvZmYifQ"),b.updatePayMethodError=!1,b.invalidCardType=ko.observable(),b.invalidCardHolderName=ko.observable(),b.creditCardErrorList=ko.observableArray(),b.payPalError=ko.observable(""),b.showPayPalMsg=ko.observable(!1),b.cardHolderName=ko.observable(),b.isBraintreeReady=ko.observable(!1),b.nonce=ko.observable(""),b.defClientTokenErrorMsg=ko.observable(b.util.getCMSMessage("ERROR_DEFAULT",CMS_PAYMENT_CARD.clientTokenErrors)),b.defMethodSavErrorMsg=ko.observable(b.util.getCMSMessage("ERROR_DEFAULT",CMS_PAYMENT_CARD.methodSaveErrors)),b.currentView.subscribe(function(a){a===b.PAYMENT_CARD_VIEWS.MODIFY_PAYMETHOD&&b.init()}),b.states={choosenPaymethod:ko.observable(""),status:ko.observable("DEFAULT"),serverError:ko.observableArray([]),methodSaveError:ko.observableArray([]),paymentType:ko.observable(""),paypalCustomerId:ko.observable(""),creditCardType:ko.observable(""),creditCardLast4:ko.observable("")},b.states.choosenPaymethod.subscribe(function(a){b.changePayment(a)}),b.init=function(){b.retrieveData()},b.retrieveData=function(){b.isLoading(!0);var a=$.get("/bin/belong/auth/customer/payment/token");a.done(function(a){b.clientToken(a.clientToken),b.states.serverError([]),b.states.status("DEFAULT"),b.states.choosenPaymethod("")}),a.fail(function(a){var c=a.responseJSON;"timeout"===a.statusText?b.states.serverError([{code:"ERROR_TIMEOUT"}]):void 0!==c&&void 0!==c.errors?b.states.serverError(c.errors):b.states.serverError([{code:"ERROR_DEFAULT"}])}),a.always(function(){b.isLoading(!1)})},b.states.currentPayMethod=ko.computed(function(){var a=b.states.paymentType(),c="",d="";return a===b.PAYMENT_TYPES.PAYPAL?(c="paypal",d=b.states.paypalCustomerId()):a===b.PAYMENT_TYPES.CREDITCARD&&("Visa"===b.states.creditCardType()?c="visa":"MasterCard"===b.states.creditCardType()&&(c="master-card"),d="xxxx xxxx xxxx "+b.states.creditCardLast4()),'<p><span class="svg-'+c+'-full payment-card-icon"></span></p><p>'+d+"</p>"}),b.onClickChangePayment=function(){var b=!!$('input[name="payment_method_nonce"]').val();if(b){var c=a.responseMessage.getValidationMessage("join-payment-form","nonce","alreadyhas");return $("#payment-paypal-errors").html(c),!1}return!0},b.changePayment=function(a){b.isLoading(!0),b.nonce(""),a===b.PAYMENT_TYPES.PAYPAL?b.braintreePayPal():a===b.PAYMENT_TYPES.CREDITCARD?b.braintreeCreditCard():b.isLoading(!1)},b.catchange=function(a,b){var c=$(".credit-card-icon");a?c.each(function(){$(this).hasClass("svg-"+b+"-card")?$(this).addClass("active"):$(this).removeClass("active")}):c.removeClass("active")},b.addCreditCardError=function(a){var c=ko.utils.arrayFirst(b.creditCardErrorList(),function(b){return a.id===b.id});c?b.creditCardErrorList.replace(c,a):b.creditCardErrorList.push(a)},b.removeCreditCardErrorById=function(a){b.creditCardErrorList.remove(function(b){if(b.id===a)return!0})},b.cardHolderNameValidation=function(){var a="";if(void 0===b.cardHolderName()||""===b.cardHolderName()?a=b.util.getCMSMessage("credit-card-name-required",CMS_PAYMENT_CARD.cardValidation):/^[^<>+;\[\]\{\}\"]+$/i.test(b.cardHolderName())||(a=b.util.getCMSMessage("credit-card-name-disallowedCharacters",CMS_PAYMENT_CARD.cardValidation)),""!==a){b.invalidCardHolderName(!0);var c={message:a,id:"credit-card-name"};b.addCreditCardError(c)}else b.invalidCardHolderName(!1),b.removeCreditCardErrorById("credit-card-name")},b.formReady=function(){b.clientToken()&&a.forms.applyShiftLabel()},b.braintreePayPal=function(){braintree.setup(b.clientToken(),"paypal",{container:d,displayName:"Belong",onPaymentMethodReceived:function(a){b.nonce(a.nonce),b.payPalError(""),b.showPayPalMsg(!1)},onReady:function(){b.isLoading(!1),b.showPayPalMsg(!0)},onCancelled:function(){b.payPalError(""),b.nonce(""),b.showPayPalMsg(!0)},onError:function(a){b.nonce("")}})},b.braintreeCreditCard=function(){var a={"font-size":"16px","font-family":"source-sans-pro,HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica Neue Regular,Arial,Helvetica,sans-serif","font-weight":"300",color:"#999"};braintree.setup(b.clientToken(),"custom",{id:c,hostedFields:{number:{selector:"#credit-card-number"},cvv:{selector:"#credit-card-security-code",placeholder:"CVV"},expirationMonth:{selector:"#credit-card-month",placeholder:"MM"},expirationYear:{selector:"#credit-card-year",placeholder:"YYYY"},styles:{input:{"font-size":"16px","font-family":"source-sans-pro,HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica Neue Regular,Arial,Helvetica,sans-serif","font-weight":"300",color:"#666"},"::-webkit-input-placeholder":a,":-moz-placeholder":a,"::-moz-placeholder":a,":-ms-inpput-placeholder":a,".number":{"font-weight":"300"},".valid":{color:"#666"},".invalid":{color:"#ff7070"}},onFieldEvent:function(a){var c=$(a.target.container),d=c.closest(".ctrl-holder");if("number"===a.target.fieldKey&&null!==a.card){if("visa"!==a.card.type&&"master-card"!==a.card.type){c.removeClass("braintree-hosted-fields-valid"),c.addClass("braintree-hosted-fields-invalid"),b.invalidCardType(!0),b.catchange(!1);var e={message:b.util.getCMSMessage("credit-card-number-type",CMS_PAYMENT_CARD.cardValidation),id:"credit-card-number"};return b.addCreditCardError(e),!1}b.invalidCardType(!1),b.removeCreditCardErrorById("credit-card-number")}else"number"===a.target.fieldKey&&null===a.card&&(b.invalidCardType(!1),b.removeCreditCardErrorById("credit-card-number"));a.isPotentiallyValid&&(null!==a.card?b.catchange(!0,a.card.type):b.catchange(!1)),"blur"===a.type?d.removeClass("shift-focussed"):"focus"===a.type&&d.addClass("shift-focussed"),"number"===a.target.fieldKey&&("blur"===a.type?a.isEmpty&&d.removeClass("shift-label"):"focus"===a.type&&d.addClass("shift-label")),a.card&&b.removeCreditCardErrorById("credit-card-braintree")}},onPaymentMethodReceived:function(a){b.nonce(a.nonce),b.cardHolderNameValidation(),b.invalidCardType()?b.isLoading(!1):b.invalidCardHolderName()?b.isLoading(!1):(b.creditCardErrorList.removeAll(),b.savePaymentMethod())},onReady:function(){b.isLoading(!1)},onError:function(a){var c=b.util.getCMSMessage(a.message,CMS_PAYMENT_CARD.braintreeValidation)?b.util.getCMSMessage(a.message,CMS_PAYMENT_CARD.braintreeValidation):a.message,d={message:c,id:"credit-card-braintree"};b.cardHolderNameValidation(),b.addCreditCardError(d),b.isLoading(!1)}})},b.savePayPalOnClick=function(){b.isLoading(!0),""!==b.nonce()?b.savePaymentMethod():(b.isLoading(!1),b.payPalError(b.util.getCMSMessage("paypal-required",CMS_PAYMENT_CARD.paypalValidation)))},b.saveCreditCardOnClick=function(){b.isLoading(!0),b.states.methodSaveError([]),$("#"+c+" input:submit").click()},b.savePaymentMethod=function(){var a={nonce:b.nonce()},c=$.post("/bin/belong/auth/customer/payment/method",a);c.then(b.savePaymentMethodDone,b.savePaymentMethodFail)},b.savePaymentMethodDone=function(c){b.states.status("SUCCESS"),b.isLoading(!1),b.states.methodSaveError([]),b.states.paymentType(c.paymentType),b.states.paypalCustomerId(c.paypalCustomerId),b.states.creditCardLast4(c.creditCardLast4),b.states.creditCardType(c.creditCardType),a.adobeAnalytics.pages.managePayment.updatePayment(!0,!1)},b.savePaymentMethodFail=function(c){b.isLoading(!1);var d=c.responseJSON;"timeout"===c.statusText?b.states.methodSaveError([{code:"ERROR_TIMEOUT"}]):void 0!==d&&void 0!==d.errors?b.states.methodSaveError(d.errors):b.states.methodSaveError([{code:"ERROR_DEFAULT"}]);var e=b.states.methodSaveError()[0].code;a.adobeAnalytics.pages.managePayment.updatePayment(!0,e)},b.doneUpdate=function(){b.states.choosenPaymethod(""),b.states.status("DEFAULT"),b.currentView(b.PAYMENT_CARD_VIEWS.MAKE_PAYMENT)},b.cancelUpdate=function(){b.states.choosenPaymethod(""),b.payPalError(""),b.states.methodSaveError([]),b.creditCardErrorList.removeAll()}}}(BELONG),function(a){"use strict";a.managePayment=a.managePayment||{},a.managePayment.paymentCardVM=function(){var b=this;b.init=function(){var b=new a.managePayment.makePaymentVM,c=new a.managePayment.modifyPayMethodVM;ko.applyBindings(b,document.getElementById("ctn-make-payment")),ko.applyBindings(c,document.getElementById("ctn-modify-paymethod")),b.init()}}}(BELONG),function(a){"use strict";a.managePayment=a.managePayment||{},a.managePayment.selectPayMethodVM=function(){var b=this;b.PAYMENT_CARD_VIEWS=a.managePayment.paymentCardViews,b.currentView=ko.observable().syncWith("currentView",!0),b.isLoading=ko.observable(!0),b.customAnimation=ko.observable(!0),b.currentView.subscribe(function(a){a===b.PAYMENT_CARD_VIEWS.SELECT_PAYMETHOD&&b.init()}),b.init=function(){b.retrieveData()},b.retrieveData=function(){b.isLoading(!0);var a=$.get("/bin/belong/auth/customer/payment/current");a.done(function(a){}),a.fail(function(a){}),a.always(function(){b.isLoading(!1)})},b.doneUpdate=function(){b.currentView(b.PAYMENT_CARD_VIEWS.MAKE_PAYMENT)}}}(BELONG),function(){BELONG.manageService=BELONG.manageService||{},$.extend(BELONG.manageService,function(){var a,b,c="/bin/belong/auth/customer/service",d={MONTH_BY_MONTH:0,SIX_MONTHS:6,TWELVE_MONTHS:12,TWENTY_FOUR_MONTHS:24,SIX_MONTHS_BTL:6,TWELVE_MONTHS_TEN_DOLLAR_CREDIT:12,TWENTY_FOUR_MONTHS_TEN_DOLLAR_CREDIT:24};return{init:function(){return 0!==$("#cmp-manage-service").length&&(b=new this.ViewModel,ko.applyBindings(b,document.getElementById("cmp-manage-service")),void b.init())},OldService:{canChangePlan:void 0,canRecontract:void 0,contractOption:void 0,currentPlan:{id:void 0,planSize:void 0,planSpeed:void 0,planType:void 0,broadbandTechType:void 0,planCost:void 0,planGigabytes:void 0,speedBoostCost:void 0,contractCost:void 0,extendedNetwork:void 0,expired:void 0,ndcCost:0,recurringChargeList:[{recurringChargeType:"BASE_PRICE",price:0},{recurringChargeType:"CONTRACT_CREDIT",price:0,contractOption:"MONTH_BY_MONTH"},{recurringChargeType:"SPEEDBOOST_COST",price:0},{recurringChargeType:"EXTENDED_NETWORK_PREMIUM",price:0},{recurringChargeType:"NDC_COST",price:0},{recurringChargeType:"BELONG_VOICE_COST",price:0}],recurringCharges:{BASE_PRICE:{price:0},CONTRACT_CREDIT:{price:0,contractOption:"MONTH_BY_MONTH"},SPEEDBOOST_COST:{price:0},EXTENDED_NETWORK_PREMIUM:{price:0},NDC_COST:{price:0},BELONG_VOICE_COST:{price:0}}},availablePlans:void 0},VisibleServices:{contracts:[],sizes:[],speedBoosts:[]},SelectedService:{term:"MONTH_BY_MONTH",current:void 0,contractCost:void 0,sizes:{id:void 0,planGigabytes:void 0,speedBoosts:{id:void 0,speed:void 0},extendCost:void 0}},UpdateState:{dataState:"NO_CHANGE",speedboostState:"NO_CHANGE"},SummaryLineItem:function(){this.type="",this.price=0,this.description="",this.warnings=[],this.changed=!1,this.sortOrder=function(){var a=999;switch(this.type){case"CONTRACT_CREDIT":a=1;break;case"BASE_PRICE":a=2;break;case"SPEEDBOOST_COST":a=3;break;case"EXTENDED_NETWORK_PREMIUM":a=4;break;case"NDC_COST":a=5;break;case"BELONG_VOICE_COST":a=6;break;default:a=999}return a}},ViewModel:function(){a=this,a.viewState={isLoading:ko.observable(!0),serverError:ko.observable(!1)},a.oldService=ko.observable(BELONG.manageService.OldService),a.visibleServices=ko.observable(BELONG.manageService.VisibleServices),a.selectedService=ko.observable(BELONG.manageService.SelectedService),a.updateState=ko.observable(BELONG.manageService.UpdateState),a.availablePromotions=ko.observable([]),a.allServices=ko.observable(),a.init=function(){a.apiRetrieve(),a.serviceSummarySection.setStickySummary(),a.fireAnalytics.manageServiceDisplay()},a.apiRetrieve=function(){$.get(c).done(function(b){a.parseApiData(b)}).fail(function(b){a.viewState.serverError(!0),"timeout"===b.statusText?BELONG.adobeAnalytics.pages.orderTracking.display(!1,!1,"TIMEOUT_ERROR"):BELONG.adobeAnalytics.pages.orderTracking.display(!1,!1,"SERVER_ERROR")}).always(function(){a.viewState.isLoading(!1)})},a.parseApiData=function(b){var c;a.allServices(b.manageService.availablePlans.terms),a.availablePromotions(b.manageService.availablePromotions),a.initSelectedServiceAndVisibleServices(),c=b.manageService,b.updateState&&(a.updateState(b.updateState),delete c.updateState),delete c.availablePlans,delete c.availablePromotions,a.oldService(c),a.initialiseCardsStatus()},a.initSelectedServiceAndVisibleServices=function(){var b,c,d,e,f,g;b=JSON.parse(JSON.stringify(a.allServices())),c=a.findCurrent(b),d=c.sizes,e=a.findCurrent(d),f=e.speedBoosts,g=a.findCurrent(f),a.changeSelectedService({contractTerm:c.term,dataSize:e.planSize,speedboost:g.speed})},a.findCurrent=function(a){var b;return $.each(a,function(a,c){if(c.existing)return b=c,!1}),b},a.setVisibleServices=function(){var b,c,d=JSON.parse(JSON.stringify(a.allServices())),e={};$.each(d,function(e,f){f.term===a.selectedService().term?(b=f.sizes,$.each(b,function(d,e){e.id===a.selectedService().sizes.id?(c=e.speedBoosts,b[d].speedBoosts=[]):b[d].speedBoosts=[]}),d[e].sizes=[]):d[e].sizes=[]}),e.contracts=d,e.sizes=b,e.speedBoosts=c,a.visibleServices(e)},a.initialiseCardsStatus=function(){a.updateState().contractState&&"NO_CHANGE"!==a.updateState().contractState?a.changeContractCard.status("SUCCESS"):a.oldService().canRecontract?a.changeContractCard.status("EDIT"):a.changeContractCard.status("READONLY"),a.updateState().dataState&&"NO_CHANGE"!==a.updateState().dataState?a.changeDataCard.status("SUCCESS"):a.oldService().canChangePlan?a.changeDataCard.status("EDIT"):a.changeDataCard.status("READONLY"),a.updateState().speedboostState&&"NO_CHANGE"!==a.updateState().speedboostState?a.changeSpeedBoostCard.status("SUCCESS"):a.changeSpeedBoostCard.canChange()?a.changeSpeedBoostCard.status("EDIT"):a.changeSpeedBoostCard.status("READONLY")},a.changeSelectedService=function(b){var c=b.contractTerm||a.selectedService().term,d=b.dataSize||a.selectedService().sizes.planSize,e=b.speedboost||a.selectedService().sizes.speedBoosts.speed;a.setSelectedService(c,d,e)},a.setSelectedService=function(b,c,d){var e=a.getContractByName(b),f=a.getPlanBySize(e.sizes,c),g=a.getSpeedBoostBySpeed(f.speedBoosts,d),h=e;h.sizes=f,h.sizes.speedBoosts=g,a.selectedService(h),a.setVisibleServices()},a.getContractByName=function(b){var c,d=JSON.parse(JSON.stringify(a.allServices()));return $.each(d,function(a,d){if(d.term===b)return c=d,!1}),c},a.getPlanBySize=function(a,b){var c;return $.each(a,function(a,d){d.planSize===b&&(c=d)}),!c&&a[0]&&(c=a[0]),c},a.getSpeedBoostBySpeed=function(a,b){var c;return $.each(a,function(a,d){d.speed===b&&(c=d)}),!c&&a[0]&&(c=a[0]),c},a.updateService=function(){$.magnificPopup.open({items:{src:"#mdl-manage-service-confirm",type:"inline"},showCloseBtn:!0,closeOnBgClick:!0,overflowY:"auto",callbacks:{close:a.resetUpdateModal}}),a.fireAnalytics.manageServiceReview()},a.getRecurringChargesByType=function(b){return a.oldService().currentPlan.recurringChargeList.filter(function(a){return a.recurringChargeType===b})},a.getRecurringChargeByType=function(b){var c,d=a.getRecurringChargesByType(b);return c=1===d.length?d[0]:d.length>1&&d},a.availablePromotionsForSelectedService=ko.computed(function(){var b=[],c=a.selectedService().sizes.speedBoosts.id;return a.serviceSummarySection&&a.serviceSummarySection.changed()?(a.availablePromotions().forEach(function(d){var e=d.planIds.indexOf(c)!==-1,f=!d.contractOption||d.contractOption===a.selectedService().term;e&&f&&b.push(d)}),b):b}),a.hasSelectedPromotion=ko.computed(function(){return a.availablePromotionsForSelectedService().length>0}),a.anyCardChanged=function(){return!!(a.changeContractCard.changed()||a.changeDataCard.changed()||a.changeSpeedBoostCard.changed())},a.checkIfChanged=function(a,b){var c;return c=a!==b},a.changeContractCard={status:ko.observable("EDIT"),changed:ko.computed(function(){return a.checkIfChanged(a.selectedService().term,a.oldService().contractOption)}),isOnContract:ko.computed(function(){return"MONTH_BY_MONTH"!==a.oldService().contractOption}),isBelowTheLine:ko.computed(function(){return"SIX_MONTHS_BTL"===a.oldService().contractOption})},a.changeDataCard={status:ko.observable("EDIT"),changed:ko.computed(function(){return a.checkIfChanged(a.selectedService().sizes.planSize,a.oldService().currentPlan.planSize)}),getDataDisplaySize:function(a,b){var c=MANAGE_SERVICE_CMS_DATA.dataOptions[a].displayName;return c||b||""},canGetUnlimited:ko.computed(function(){var b=!1;return $.each(a.visibleServices().sizes,function(a,c){if("Unlimited"===c.planGigabytes)return b=!0,!1}),b})},a.changeSpeedBoostCard={status:ko.observable("READONLY"),changed:ko.computed(function(){return a.checkIfChanged(a.selectedService().sizes.speedBoosts.speed,a.oldService().currentPlan.planSpeed)}),getSpeedPostFix:function(a){var b;return b=MANAGE_SERVICE_CMS_DATA.speedboostOptions[a].displayPostfix,b||""},getSpeedDisplayName:function(b){var c;return b=b||a.selectedService().sizes.speedBoosts.speed,b&&(c=MANAGE_SERVICE_CMS_DATA.speedboostOptions[b].displaySpeed),c||b||""},canChange:ko.computed(function(){var b=a.oldService().canChangePlan;return b&&1===a.visibleServices().speedBoosts.length&&(b=!1),b}),clickChange:function(){a.changeSpeedBoostCard.status("EDIT")},onPromotion:ko.computed(function(){return a.getRecurringChargesByType("PROMOTION").length>0}),onHundredOverForty:ko.computed(function(){return"100/40"===a.selectedService().sizes.speedBoosts.speed})},a.serviceSummarySection={changed:ko.computed(function(){var b=!1;return a.changeContractCard.changed()?b=!0:a.changeDataCard.changed()?b=!0:a.changeSpeedBoostCard.changed()&&(b=!0),b}),stickySummary:ko.observable(!1),setStickySummary:function(){var b=70,c=$("#ctn-service-summary").offset().top,d=c+b-$(window).height()-$(window).scrollTop()<0;a.serviceSummarySection.stickySummary(!d)},stickyScroll:function(){$("#ctn-service-summary").velocity("scroll",{offset:-70})},selectedContract:function(){return"MONTH_BY_MONTH"!==a.selectedService().term},selectedContractLength:ko.computed(function(){return d[a.selectedService().term]}),showRecontractWarning:ko.computed(function(){var b=!1,c=0;return a.getRecurringChargeByType("CONTRACT_CREDIT")&&(c=a.getRecurringChargeByType("CONTRACT_CREDIT").price),b="TWELVE_MONTHS"!==a.selectedService().term&&"MONTH_BY_MONTH"===a.oldService().contractOption&&0!==c&&(a.changeDataCard.changed()||a.changeSpeedBoostCard.changed())}),getRecurringChargePriceForDisplay:function(a){var b=0,c=0,d="";return b=parseFloat(a),c=Math.abs(b),b%1>0&&(b=b.toFixed(2),c=c.toFixed(2)),b<0&&(d+="- "),d+="$"+c+" /month"},contractCost:function(){var b=0;return b=a.selectedService().contractCost,a.getRecurringChargeByType("CONTRACT_CREDIT")?(a.changeContractCard.isOnContract()?b=a.getRecurringChargeByType("CONTRACT_CREDIT").price:a.anyCardChanged()||(b=a.getRecurringChargeByType("CONTRACT_CREDIT").price),b):b},applyPromotions:function(){var b=0;return a.availablePromotionsForSelectedService().forEach(function(a){b+=a.price}),b},monthlyCharges:function(){var b=0;return b+=a.getSelectedService.planCost(),b+=a.selectedService().sizes.speedBoosts.speedBoostCost,b+=a.serviceSummarySection.contractCost(),b+=a.serviceSummarySection.applyPromotions(),a.getRecurringChargeByType("NDC_COST")&&(b+=a.getRecurringChargeByType("NDC_COST").price),a.getRecurringChargeByType("BELONG_VOICE_COST")&&(b+=a.getRecurringChargeByType("BELONG_VOICE_COST").price),a.getRecurringChargeByType("PROMOTION")&&(b+=a.getRecurringChargeByType("PROMOTION").price),b%1>0?b.toFixed(2):b},totalMinCost:function(){var b=a.serviceSummarySection.monthlyCharges();return"MONTH_BY_MONTH"!==a.selectedService().term&&(b*=d[a.selectedService().term]),b}},a.serviceSummaryLineItems={getLineItems:function(){var b=[],c=function(a,b){return a.sortOrder()-b.sortOrder()};return Array.prototype.push.apply(b,a.serviceSummaryLineItems.getPromotionalLineItems()),b.length>0&&b.sort(c),b},getRecurringChargesAsLineItems:function(b){var c,d=[];return a.oldService().currentPlan.recurringChargeList?(c=b?a.getRecurringChargesByType(b):a.oldService().currentPlan.recurringChargeList,c.forEach(function(b){var c=a.serviceSummaryLineItems.mapRecurringChargeToLineItem(b);d.push(c)}),d):d},mapRecurringChargeToLineItem:function(b,c){var d=new BELONG.manageService.SummaryLineItem;return d.type=b.recurringChargeType,d.description=b.description||a.serviceSummaryLineItems.getDescriptionFromRecurringChargeType(b.recurringChargeType),d.price=a.serviceSummarySection.getRecurringChargePriceForDisplay(b.price),d.changed=c||!1,d},updateLineItemsWithSelectedService:function(a){return a},getPromotionalLineItems:function(){var b=[],c=[],d=[];return c=a.serviceSummaryLineItems.getRecurringChargesAsLineItems("PROMOTION"),Array.prototype.push.apply(b,c),d=a.serviceSummaryLineItems.getMatchedPromotionsForSelectedPlan(),Array.prototype.push.apply(b,d),b},getMatchedPromotionsForSelectedPlan:function(){var b,c=[];return a.availablePromotionsForSelectedService().forEach(function(d){b=a.serviceSummaryLineItems.mapRecurringChargeToLineItem(d,!0),c.push(b)}),c},getDescriptionFromRecurringChargeType:function(b){var c="";switch(b){case"BASE_PRICE":c=a.selectedService().sizes.planGigabytes+" Data allowance";break;case"SPEEDBOOST_COST":c=a.changeSpeedBoostCard.getSpeedDisplayName()+" Speed Boost";break;default:c=b}return c}},a.summaryLineItems=ko.computed(a.serviceSummaryLineItems.getLineItems),a.confirmChangesModal={buttonState:ko.observable("active"),updateServerError:ko.observable(!1),confirmUpdateService:function(){var b,d={},e=void 0;a.confirmChangesModal.buttonState("loading"),a.confirmChangesModal.updateServerError(!1),a.changeContractCard.changed()&&(e=a.selectedService().term),d={planId:a.selectedService().sizes.speedBoosts.id,recontractOption:e},b=$.post(c,d),b.done(function(b){return b.success?void a.confirmChangesModal.updateSuccessful(b):(a.confirmChangesModal.updateServerError(!0),!1)}),b.fail(function(b){a.confirmChangesModal.updateServerError(!0)}),b.always(function(){a.confirmChangesModal.buttonState("active")})},updateSuccessful:function(b){a.fireAnalytics.manageServiceUpdate(a.oldService(),b.manageService.currentPlan),a.parseApiData(b),$.magnificPopup.close(),a.confirmChangesModal.scrollToCards()},confirmCancel:function(){$.magnificPopup.close()},scrollToCards:function(){$("#ctn-parent-view").velocity("stop").velocity("scroll",{duration:400,asing:"ease-out",offset:-70})}},a.currentPlan={displayName:ko.computed(function(){var b,c=a.oldService().currentPlan.planType;return c&&(b=MANAGE_SERVICE_CMS_DATA.planDisplayNames[c].displayName),b||""}),contractName:ko.computed(function(){var b,c=a.oldService().contractOption;return c&&(b=MANAGE_SERVICE_CMS_DATA.contracts[c].displayName),b||""}),recurringChargeContractName:ko.computed(function(){var b,c,d;return!!a.getRecurringChargeByType("CONTRACT_CREDIT")&&(c=a.getRecurringChargeByType("CONTRACT_CREDIT").description,b=a.getRecurringChargeByType("CONTRACT_CREDIT").contractOption,c?d=c:b&&(d=MANAGE_SERVICE_CMS_DATA.contracts[b].displayName),d||"")}),recurringChargeContractCost:ko.computed(function(){var b="",c=a.getRecurringChargeByType("CONTRACT_CREDIT");return c&&(b="$"+Math.abs(c.price)+" /month"),b||""}),dataSize:ko.computed(function(){var b,c=a.oldService().currentPlan.planSize;return c&&(b=MANAGE_SERVICE_CMS_DATA.dataOptions[c].displayName),b||""}),isNbn:ko.computed(function(){var b=!1,c=["HFC","FTTP","FTTB","FTTN"],d=a.oldService().currentPlan.broadbandTechType;return $.each(c,function(a,c){c===d&&(b=!0)}),b})},a.getSelectedService={planCost:ko.computed(function(){var b=0;return b+=a.selectedService().sizes.planCost,a.getRecurringChargeByType("EXTENDED_NETWORK_PREMIUM")&&(b+=a.selectedService().sizes.extendCost),b})},a.moreInformation={open:function(){var a=$(event.target).closest(".b-card");a.addClass("expanded"),a.find(".information").hasClass("slider-activated")?(a.find(".information").removeClass("invisible"),a.find(".information").flexslider(0),a.find(".information").flexslider("pause")):a.find(".information").flexslider({animation:"slide",animationLoop:!1,slideShow:!1,start:function(b){a.find(".information").addClass("slider-activated").addClass("slider-count-"+b.count).removeClass("invisible"),a.find(".information").flexslider("pause")}})},close:function(){var a=$(event.target).closest(".b-card");a.removeClass("expanded"),a.find(".information").addClass("invisible")}},a.shortCodeDecode=function(b){return BELONG.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$contractCost$$",replacement:a.currentPlan.recurringChargeContractCost()||""}])},a.monthByMonthHasContractCredit=ko.computed(function(){return a.currentPlan.recurringChargeContractName()&&!a.serviceSummarySection.selectedContract()&&!a.changeDataCard.changed()&&!a.changeSpeedBoostCard.changed()}),$(window).off("scroll.stickySummary").on("scroll.stickySummary",function(){a.serviceSummarySection.setStickySummary()}),a.fireAnalytics={manageServiceDisplay:function(){BELONG.adobeAnalytics.pages.manageService.display({oldPlan:a.oldService().currentPlan})},manageServiceReview:function(){var b={originalPlanSize:a.oldService().currentPlan.planSize,originalPlanSpeed:a.oldService().currentPlan.planSpeed,originalContractOption:a.oldService().contractOption,newContractOption:a.selectedService().term,newPlanSize:a.selectedService().sizes.planSize,newPlanSpeed:a.selectedService().sizes.speedBoosts.speed};BELONG.adobeAnalytics.pages.manageService.review({updateAction:b,oldPlan:a.oldService()})},manageServiceUpdate:function(a,b){BELONG.adobeAnalytics.pages.manageService.update({oldPlan:a,newPlan:b})}}}}}())}(),function(){"use strict";BELONG.offers=BELONG.offers||{},$.extend(BELONG.offers,function(){var a;return{init:function(){a=this;var b=new a.ViewModel;return 0!==$("#cmp-offers").length&&(ko.applyBindings(b,document.getElementById("cmp-offers")),void b.init())},ViewModel:function(){var b=this,c="/apps/telstraEveServlet",d="/bin/belong/auth/customer/personal",e=BELONG.offers.helpers,f=$("#offersEmail"),g=$("#emailSubject"),h=$("#emailBody"),i=$(".tweetTxt"),j=$(".shareUrl"),k=$(".fbRedirectUrl");b.promoCode=ko.observable(""),b.isLoading=ko.observable(!0),b.serverError=ko.observable(!1),b.init=function(){b.retrievePromoCode()},b.retrievePromoCode=function(){var d={requestType:"retrieveServiceInformation"},e=$.post(c,d);e.done(function(c){if(c.success){var d=c.referrerPromoCode;if(d&&"undefined"!=typeof d&&""!==d){var e="$$IAF_PROMOCODE$$";b.promoCode(d),b.retrieveFirstName(),BELONG.util.replacePlaceholderCopyHtml(h,d,e),BELONG.util.replacePlaceholderCopyHtml(i,d,e),
BELONG.util.replacePlaceholderCopyHtml(j,d,e)}else a.methods.showErrorMsg()}else b.serverError(!0)}),e.fail(function(a){b.serverError(!0)}),e.always(function(){b.isLoading(!1)})},b.retrieveFirstName=function(){var a=$.get(d);a.done(function(a){if(a.success){var c=a.firstName,d="$$FIRSTNAME$$";BELONG.util.replacePlaceholderCopyHtml(h,c,d)}else b.serverError(!0)}),a.fail(function(a){b.serverError(!0)}),a.always(function(){b.isLoading(!1)})},b.faceBookClick=function(){var a="https://www.facebook.com/dialog/share?app_id=1598311447085917&display=popup",c="&href="+encodeURIComponent(j.text().trim()),d="&redirect_uri="+encodeURIComponent(k.text().trim());b.fireAnalytics("Share-via-facebook",$("span.promo-code").text()),window.open(a+c+d,"","height=400,width=550")},b.twitterClick=function(){var a="https://twitter.com/intent/tweet?text="+i.text().trim();b.fireAnalytics("Share-via-twitter",$("span.promo-code").text()),window.open(a,"","height=500,width=400")},b.shareEventHandler=function(){BELONG.util&&"function"==typeof BELONG.util.scrollPageTo&&(f.removeClass("hidden"),BELONG.util.scrollPageTo(f.offset().top-50)),b.fireAnalytics("Send-via-email",$("span.promo-code").text());var a=g.text().trim(),c=e.formatEmailBody(h.text().trim());window.location.href="mailto:?subject="+a+"&body="+escape(c)},b.fireAnalytics=function(a,b){BELONG.adobeAnalytics.events.shareOffer(a,b)}},helpers:{formatEmailBody:function(a){if(a&&"string"==typeof a){var b=a.replace(/\s*\n\s*/g,"\n\n");return b=a.replace(/<a><\/a>/g,"")}return""}}}}())}(),function(a){"use strict";a.onlineMoves=a.onlineMoves||{},a.onlineMoves.connectionDateVM=function(){var a=this,b=5,c=moment().add(6,"M").toDate();a.productType=ko.observable("").subscribeTo("productType",!0),a.serviceClass=ko.observable("").subscribeTo("serviceClass",!0),a.isVisible=ko.computed(function(){if("ADSL"===a.productType()||"BUNDLE"===a.productType())return!0;if(null!==a.serviceClass()&&""!==a.serviceClass())switch(a.serviceClass()){case"NBN_SERVICE_CLASS_THREE":case"NBN_SERVICE_CLASS_THIRTEEN":case"NBN_SERVICE_CLASS_TWENTY":case"NBN_SERVICE_CLASS_TWENTY_FOUR":return!0;default:return!1}return!1}).publishOn("connectionDateVisible"),a.connectionDate=ko.observable("").publishOn("connectionDate"),$("#connection-input").pickadate({weekdaysShort:["S","M","T","W","T","F","S"],closeOnClear:!1,min:b,max:c,format:"dddd, dd mmmm, yyyy",formatSubmit:"yyyy-mm-dd"})}}(BELONG),function(a){"use strict";a.onlineMoves=a.onlineMoves||{},a.onlineMoves.disconnectionDateVM=function(){var a,b,c,d=this,e=5,f=moment().add(6,"M").toDate();d.nbnAppointmentDate=ko.observable("").subscribeTo("nbnAppointmentDate"),d.connectionDate=ko.observable("").subscribeTo("connectionDate"),d.disconnectionDate=ko.observable("").publishOn("disconnectionDate"),a=$("#disconnection-input").pickadate({weekdaysShort:["S","M","T","W","T","F","S"],closeOnClear:!1,min:e,max:f,format:"dddd, dd mmmm, yyyy",formatSubmit:"yyyy-mm-dd"}),b=a.pickadate("picker"),d.moveInDate=ko.computed(function(){c=null,""!==d.nbnAppointmentDate()?c=moment(d.nbnAppointmentDate()):""!==d.connectionDate()&&(c=moment(d.connectionDate())),null!==c&&(moment(d.disconnectionDate()).isAfter(c)===!0&&(b.set("select",c.toDate()),b.clear()),b.set("enable",!0),b.set("disable",[{from:c.add(1,"d").toDate(),to:f}]))}),d.connectionItemValid=ko.observable().subscribeTo("connectionItemValid",!0),d.buttonState=ko.computed(function(){return d.connectionItemValid()===!0?"":"disabled"}),d.connectionItemChecked=ko.observable(!1).syncWith("connectionItemChecked"),d.connectionItemCheck=function(){"disabled"!==$("#connection-item-check").attr("data-state")&&d.connectionItemChecked(!0)}}}(BELONG),function(a){"use strict";a.onlineMoves=a.onlineMoves||{},a.onlineMoves.modemAddressVM=function(){var a=this;a.currentAddress=ko.observable("").subscribeTo("currentAddress",!0),a.newAddress=ko.observable("").subscribeTo("sqAddress",!0),a.hardwareRequired=ko.observable().subscribeTo("hardwareRequired",!0),a.customAddress={deliveryAddress1:ko.observable("").publishOn("deliveryAddress1"),deliveryAddress2:ko.observable("").publishOn("deliveryAddress2"),deliverySuburb:ko.observable("").publishOn("deliverySuburb"),deliveryState:ko.observable("").publishOn("deliveryState"),deliveryPostcode:ko.observable("").publishOn("deliveryPostcode")},a.customAddress.errors=ko.validation.group(a.customAddress,{deep:!0}),a.otherAddress=ko.computed(function(){var b=a.customAddress.deliveryAddress1()+(""!==a.customAddress.deliveryAddress2()?" "+a.customAddress.deliveryAddress2():"")+", "+a.customAddress.deliverySuburb()+" "+a.customAddress.deliveryState()+" "+a.customAddress.deliveryPostcode();return b}),a.modemSelection=ko.observable("").publishOn("modemSelection"),a.modemAddress=ko.computed(function(){switch(a.modemSelection()){case"CURRENT_ADDRESS":return a.currentAddress();case"NEW_ADDRESS":return a.newAddress();case"OTHER_ADDRESS":return a.otherAddress();default:return""}}).publishOn("modemAddress"),a.initValidation=function(){a.customAddress.deliveryAddress1.extend({required:{onlyIf:function(){return"OTHER_ADDRESS"===a.modemSelection()}},maxLength:30}),a.customAddress.deliveryAddress2.extend({maxLength:30}),a.customAddress.deliverySuburb.extend({required:{onlyIf:function(){return"OTHER_ADDRESS"===a.modemSelection()}}}),a.customAddress.deliveryState.extend({required:{onlyIf:function(){return"OTHER_ADDRESS"===a.modemSelection()}}}),a.customAddress.deliveryPostcode.extend({required:{onlyIf:function(){return"OTHER_ADDRESS"===a.modemSelection()}},pattern:{params:/^\d{4}$/,message:"Please enter a valid postcode"}})},a.initValidation(),a.isCurrentStepValid=function(){return 0===a.customAddress.errors().length},a.buttonState=ko.computed(function(){if("OTHER_ADDRESS"===a.modemSelection()){if(a.isCurrentStepValid())return""}else if(""!==a.modemSelection())return"";return"disabled"}),a.modemItemChecked=ko.observable(!1).syncWith("modemItemChecked"),a.modemItemCheck=function(){"disabled"!==$("#modem-item-check").attr("data-state")&&a.modemItemChecked(!0)}}}(BELONG),function(a){"use strict";a.onlineMoves=a.onlineMoves||{},a.onlineMoves.nbnAppointmentVM=function(){var a,b,c,d,e,f,g,h,i=this,j=5,k=moment().add(j,"d"),l=6,m=moment().add(l,"M"),n=!0;i.loading=ko.observable(!1),i.loadingError=ko.observable(!1),i.productType=ko.observable("").subscribeTo("productType",!0),i.serviceClass=ko.observable("").subscribeTo("serviceClass",!0),i.isVisible=ko.computed(function(){if("NBN"===i.productType()){if(null!==i.serviceClass()&&""!==i.serviceClass())switch(i.serviceClass()){case"NBN_SERVICE_CLASS_THREE":case"NBN_SERVICE_CLASS_THIRTEEN":case"NBN_SERVICE_CLASS_TWENTY":case"NBN_SERVICE_CLASS_TWENTY_FOUR":return!1;default:return!0}return!0}return!1}).publishOn("nbnAppointmentDateVisible"),i.nbnAppointmentDate=ko.observable("").publishOn("nbnAppointmentDate"),i.nbnAppointmentTime=ko.observable("").publishOn("nbnAppointmentTime"),i.requestFail=function(){n=!1,i.loading(!1),i.loadingError(!0),b.close(),document.activeElement.blur()},i.requestDone=function(a){a.success?(n=!1,e(a.availableDates),i.loading(!1)):i.requestFail(a)},i.timeSelectDisabled=ko.observable(!1),i.disableAM=ko.observable(!1),i.disablePM=ko.observable(!1),i.setTime=function(a){i.timeSelectDisabled(!1),a.am&&a.pm?(i.nbnAppointmentTime(""),i.disablePM(!1),i.disableAM(!1)):a.am&&!a.pm?(i.nbnAppointmentTime("8am-12pm"),i.timeSelectDisabled(!0),i.disableAM(!1),i.disablePM(!0)):!a.am&&a.pm&&(i.nbnAppointmentTime("1-5pm"),i.timeSelectDisabled(!0),i.disableAM(!0),i.disablePM(!1))},a=$("#appointment-input").pickadate({weekdaysShort:["S","M","T","W","T","F","S"],closeOnClear:!1,min:k.toDate(),max:m.toDate(),format:"dddd, dd mmmm, yyyy",formatSubmit:"yyyy-mm-dd",onOpen:function(){n&&(i.loading(!0),c=$.get("/bin/belong/nbn/appointments/moves"),c.done(i.requestDone),c.fail(i.requestFail))},onClose:function(){var a=b.get("select","dd/mm/yyyy"),c=0;for(c;c<d.length;c+=1)if(a===d[c].date){i.setTime(d[c]);break}}}),b=a.pickadate("picker"),e=function(a){var c,e,i;for(d=a,i=0,f=[],g=[],i;i<a.length;i+=1)f.push(moment(a[i].date,"DD-MM-YYYY").toDate()),i===a.length-1&&(h=moment(a[i].date,"DD-MM-YYYY").add(1,"d"));for(b.set("disable",[{from:h.toDate(),to:m.toDate()}]),i=0,c=h.diff(k,"days")+1,i;i<c;i+=1)e=moment().add(j,"d"),g.push(e.add(i,"d").toDate());b.set("disable",g),b.set("enable",f)}}}(BELONG),function(){"use strict";BELONG.onlineMoves=BELONG.onlineMoves||{},BELONG.onlineMoves.NavigationVM=function(){var a=this,b=$("#online-moves-summary .belong-selection-item");a.util=BELONG.util,a.orderTrackingData=ko.observable().subscribeTo("orderTrackingData",!0),a.productType=ko.observable("").subscribeTo("productType",!0),a.bundleType=ko.computed(function(){return"ADSL"===a.productType()?"Broadband Bundle":"Broadband Only"}),a.sqAddress=ko.observable("").subscribeTo("sqAddress",!0),a.sqAddress.subscribe(function(a){}),a.sqNDCAddress=ko.observable().subscribeTo("sqNDCAddress",!0),a.NDCCost=ko.observable().subscribeTo("NDCCost",!0),a.hardwareRequired=ko.observable().subscribeTo("hardwareRequired",!0),a.productModel=ko.observable({}),a.serviceType=ko.observable(""),a.currentStep=ko.observable(1).publishOn("currentStep"),a.addressItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Your new address"),subtitle:ko.observable(""),order:ko.observable(1)},a.serviceItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Your plan"),subtitle:ko.observable(""),order:ko.observable(2),planSize:ko.computed(function(){return BELONG.DISPLAY_TEXT.plan[a.productModel().planSize]}),contractType:ko.computed(function(){switch(a.productModel().contractTerm){case null:return BELONG.DISPLAY_TEXT.contract.MONTH_BY_MONTH;default:return BELONG.DISPLAY_TEXT.contract[a.productModel().contractTerm]}}),extras:ko.computed(function(){var b="";if(a.productModel().planSpeed||a.productModel().voicePlan)return b+="with ",null!==a.productModel().planSpeed&&""!==a.productModel().planSpeed&&"12/1"!==a.productModel().planSpeed&&(b+=" a <b>"+BELONG.DISPLAY_TEXT.planSpeed[a.productModel().planSpeed]+" Speed Boost</b>  ",null!==a.productModel().voicePlan&&(b+=" and ")),null!==a.productModel().voicePlan&&(b+="<b>"+BELONG.DISPLAY_TEXT.voicePlan[a.productModel().voicePlan]+"</b>"),b}),mpc:ko.observable(0).subscribeTo("monthlyProductCost",!0),mtc:ko.observable(0).subscribeTo("monthlyCost",!0),tmc:ko.observable(0).subscribeTo("tmc",!0),contractDuration:ko.observable().subscribeTo("selectedContractDuration",!0)},a.connectionItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Your move details"),subtitle:ko.observable(""),order:ko.observable(3),nbnAppointmentDate:ko.observable("").subscribeTo("nbnAppointmentDate"),nbnAppointmentTime:ko.observable("").subscribeTo("nbnAppointmentTime"),connectionDate:ko.observable("").subscribeTo("connectionDate"),disconnectionDate:ko.observable("").subscribeTo("disconnectionDate")},a.modemItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Your delivery details"),subtitle:ko.observable(""),order:ko.observable(4),modemSelection:ko.observable("").subscribeTo("modemSelection"),modemAddress:ko.observable("").subscribeTo("modemAddress")},a.animateToNavItem=function(a){var c=a-1;$(b[c]).velocity("stop").velocity("scroll",{duration:1e3,easing:"ease-out",offset:-80})},a.addressItemChecked=ko.computed(function(){""!==a.sqAddress()&&a.currentStep()<=1&&(a.currentStep(2),a.animateToNavItem(1))}),a.movePBComplete=ko.observable().syncWith("movePBComplete",!0),a.movePBComplete.subscribe(function(b){b===!0&&a.currentStep()<=2&&(a.productModel(JSON.parse(sessionStorage.getItem("productModel"))),a.currentStep(3),a.animateToNavItem(2))}),a.connectionItemChecked=ko.observable().syncWith("connectionItemChecked",!0),a.connectionItemChecked.subscribe(function(b){b===!0&&(a.hardwareRequired()?(a.currentStep(4),a.animateToNavItem(3)):(a.currentStep(5),a.animateToNavItem(4)),BELONG.adobeAnalytics.pages.onlineMoves.connectionDetails({nbnAppDate:a.connectionItem.nbnAppointmentDate(),nbnAppTime:a.connectionItem.nbnAppointmentTime(),connDate:a.connectionItem.connectionDate(),disconnDate:a.connectionItem.disconnectionDate()}))}),a.modemItemChecked=ko.observable().syncWith("modemItemChecked",!0),a.modemItemChecked.subscribe(function(b){b===!0&&(a.currentStep(5),a.animateToNavItem(4),BELONG.adobeAnalytics.pages.onlineMoves.deliveryDetails({addressOption:a.modemItem.modemSelection(),address:a.modemItem.modemAddress()}))}),a.stepBindings=[a.sqAddress,a.movePBComplete,a.connectionItemChecked,a.modemItemChecked],a.openSQModal=function(){BELONG.sqModal.open({openCallBack:function(){},closeCallBack:function(){BELONG.sqFormVM.callPBHandleSqDone(!0)}})},a.resetChecks=function(b){var c=b-1;for(c;c<a.stepBindings.length;c+=1)0!==c&&a.stepBindings[c](!1)},a.showConnectionFragment=function(a){return""!==a},a.nbnAppointmentDateVisible=ko.observable().subscribeTo("nbnAppointmentDateVisible",!0),a.connectionDateVisible=ko.observable().subscribeTo("connectionDateVisible",!0),a.connectionItemValid=ko.computed(function(){var b=a.connectionItem;return a.nbnAppointmentDateVisible()?a.showConnectionFragment(b.nbnAppointmentDate())&&""!==b.nbnAppointmentTime()&&a.showConnectionFragment(b.disconnectionDate()):a.connectionDateVisible()?a.showConnectionFragment(b.connectionDate())&&a.showConnectionFragment(b.disconnectionDate()):void 0}).publishOn("connectionItemValid"),a.stepRegistry=ko.observableArray([a.addressItem.title(),a.serviceItem.title(),a.connectionItem.title(),a.modemItem.title(),"Review and Submit"]),a.revertToStep=function(b){BELONG.adobeAnalytics.pages.onlineMoves.revertToStep({stepFrom:a.stepRegistry()[a.currentStep()-1],stepTo:a.stepRegistry()[b-1]}),a.resetChecks(b),a.currentStep(b),a.animateToNavItem(b)},a.init=function(){},a.fireAnalyticsOnLinkClick=function(a,b){return BELONG.adobeAnalytics.pages.orderTracking.clickURL(a,b),!0}}}(),function(a){"use strict";a.onlineMoves=a.onlineMoves||{},$.extend(a.onlineMoves,function(){var b;return{init:function(){return b=this,0!==$("#online-moves-container").length&&(ko.validation.init({messageTemplate:"customValidationTemplate",decorateInputElement:!0,errorElementClass:"error"},!0),ko.applyBindings(new a.onlineMoves.nbnAppointmentVM,document.getElementById("ctn-nbn-appointment")),ko.applyBindings(new a.onlineMoves.connectionDateVM,document.getElementById("ctn-connection-date")),ko.applyBindings(new a.onlineMoves.disconnectionDateVM,document.getElementById("ctn-disconnection-date")),ko.applyBindings(new a.onlineMoves.modemAddressVM,document.getElementById("ctn-modem-address")),ko.applyBindings(new a.onlineMoves.NavigationVM,document.getElementById("ctn-online-moves-navigation")),void ko.applyBindings(new b.viewModel,document.getElementById("online-moves-container")))},viewModel:function(){var b=this;b.currentStep=ko.observable().subscribeTo("currentStep"),b.submissionError=ko.observable(!1),b.submittingAjax=ko.observable(!1),b.productType=ko.observable("").subscribeTo("productType",!0),b.hardwareRequired=ko.observable().subscribeTo("hardwareRequired",!0),b.connectionDate=ko.observable("").subscribeTo("connectionDate"),b.disconnectionDate=ko.observable("").subscribeTo("disconnectionDate"),b.nbnAppointmentDate=ko.observable("").subscribeTo("nbnAppointmentDate"),b.nbnAppointmentTime=ko.observable("").subscribeTo("nbnAppointmentTime"),b.modemSelection=ko.observable("").subscribeTo("modemSelection"),b.modemAddress=ko.observable("").subscribeTo("modemAddress"),b.deliveryAddress1=ko.observable("").subscribeTo("deliveryAddress1"),b.deliveryAddress2=ko.observable("").subscribeTo("deliveryAddress2"),b.deliverySuburb=ko.observable("").subscribeTo("deliverySuburb"),b.deliveryState=ko.observable("").subscribeTo("deliveryState"),b.deliveryPostcode=ko.observable("").subscribeTo("deliveryPostcode"),b.isPromotionalSpeedboost=ko.observable().subscribeTo("isPromotionalSpeedboost"),b.reviewedCIS=ko.observable(!1),b.reviewedCIS.subscribe(function(b){b===!0&&a.adobeAnalytics.pages.onlineMoves.acceptedCheckbox("moveAcceptedCIS")}),b.acceptedTerms=ko.observable(!1),b.acceptedTerms.subscribe(function(b){b===!0&&a.adobeAnalytics.pages.onlineMoves.acceptedCheckbox("moveAcceptedCustomerTerms")}),b.buttonState=ko.computed(function(){return b.submittingAjax()?"loading":b.reviewedCIS()&&b.acceptedTerms()&&b.currentStep()>=5?"":"disabled"}),b.submitMoveFail=function(a){b.submittingAjax(!1),b.submissionError(!0)},b.submitMoveDone=function(a,c){a.success?(BELONG.adobeAnalytics.pages.onlineMoves.submission(c),window.location.replace("/account/order-tracking?redirect=moveSuccess")):b.submitMoveFail(a)},b.submitMove=function(){if("disabled"!==b.buttonState()&&b.submittingAjax()!==!0){var a,c,d=JSON.parse(sessionStorage.getItem("productModel")),e={},f=moment(b.connectionDate()).format("DD/MM/YYYY"),g=moment(b.disconnectionDate()).format("DD/MM/YYYY"),h=moment(b.nbnAppointmentDate()).format("DD/MM/YYYY"),i=b.nbnAppointmentTime().toLowerCase().indexOf("am")!==-1?"AM":"PM";b.submittingAjax(!0),a="NBN"===b.productType()?""===d.planSpeed?"12/1":d.planSpeed:null,e={moveDate:"Invalid date"!==f?f:null,disconnectionDate:g,date1:"Invalid date"!==h?h:null,time1:"Invalid date"!==h?i:null,date2:null,time2:null,planType:b.productType(),planSize:d.planSize,planSpeed:a,contractTerm:d.contractTerm,voicePlan:d.voicePlan,deliveryAddressChoice:""!==b.modemSelection()?b.modemSelection():null,deliveryAddress1:"OTHER_ADDRESS"===b.modemSelection()?b.deliveryAddress1():null,deliveryAddress2:"OTHER_ADDRESS"===b.modemSelection()?b.deliveryAddress2():null,deliverySuburb:"OTHER_ADDRESS"===b.modemSelection()?b.deliverySuburb():null,deliveryState:"OTHER_ADDRESS"===b.modemSelection()?b.deliveryState():null,deliveryPostcode:"OTHER_ADDRESS"===b.modemSelection()?b.deliveryPostcode():null,NDCCost:d.NDCCost?parseFloat(d.NDCCost):0,ndcUpfrontOption:d.ndcUpfrontOption},c=$.post("/bin/belong/migration",e),c.done(function(a,c){b.submitMoveDone(a,c)}),c.fail(function(a){b.submitMoveFail(a)})}}}}}())}(BELONG),function(){"use strict";BELONG.orderTracking=BELONG.orderTracking||{},BELONG.orderTracking.CardsVM=function(){var a=this,b="/bin/belong/auth/customer/order/modemdelivery",c="/bin/belong/auth/customer/order/callback";a.util=BELONG.util,a.orderTrackingData=ko.observable().subscribeTo("orderTrackingData",!0),a.highlightCard=ko.observable(""),a.serviceType=ko.observable(""),a.saleType=ko.observable(""),a.checkedCallBackOption=ko.observable("AM"),a.submitCallBtnState=ko.observable(""),a.callBackOptions=[{optionLabel:"AM",optionValue:"AM"},{optionLabel:"PM",optionValue:"PM"},{optionLabel:"After 5pm",optionValue:"AFTER 5PM"},{optionLabel:"Dont mind",optionValue:"DONT CARE"}],a.orderCard={status:ko.observable("NOT_REQUIRED"),futureOrderDate:ko.observable("")},a.moreInfoCard={status:ko.observable("NOT_REQUIRED")},a.modemCard={status:ko.observable("NOT_REQUIRED"),assetType:ko.observable(""),title:ko.observable("Modem delivery"),modemTrackingId:ko.observable(""),modemTrackingURL:ko.observable("")},a.serviceCard={status:ko.observable("CLOSE"),serviceActivationDate:ko.observable(""),serviceActivationStatus:ko.observable("")},a.appointmentCard={status:ko.observable("CLOSE"),appointmentDate:ko.observable(""),appointmentTime:ko.observable(""),appointmentStatus:ko.observable("")},a.connectCard={status:ko.observable("CLOSE"),moveType:ko.observable(null),modemUsername:ko.observable(""),modemPassword:ko.observable("")},a.callbackCard={status:ko.observable("CLOSE"),submitError:ko.observable(!1),callbackRequestStatus:ko.observable("")},a.coolingOffPeriodCard={status:ko.observable("CLOSE"),paymentFailed:ko.observable(!1),coolingOffDate:ko.observable("")},a.appointmentCard.hasError=ko.computed(function(){return"ERROR"===a.appointmentCard.status()}),a.appointmentCard.isWarning=ko.computed(function(){var b=["CANCELLED","INCOMPLETE","REQUIRED"];return b.indexOf(a.appointmentCard.appointmentStatus())!==-1}),a.serviceCard.hasError=ko.computed(function(){var b=["PASSED_SLA","ORDER_WITHDRAWN","ORDER_HELD","ORDER_REJECTED"];return"ERROR"===a.serviceCard.status()||b.indexOf(a.serviceCard.serviceActivationStatus())!==-1}),a.appointmentCard.appointmentScheduled=ko.computed(function(){var b="";return a.appointmentCard.appointmentDate()?(a.appointmentCard.appointmentTime()&&(b="AM"===a.appointmentCard.appointmentTime()?"8AM - 12PM":"PM"===a.appointmentCard.appointmentTime()?"1PM - 5PM":a.appointmentCard.appointmentTime()),'<span class="date--large">'+a.util.formatter.dateString(a.appointmentCard.appointmentDate(),"DD/MM/YYYY")+" "+b+"</span>"):""}),a.shortCodeDecode=function(b){return a.util.stringReplacePlaceholderCopy(b,[{placeholder:"$$appointmentTime$$",replacement:a.appointmentCard.appointmentScheduled()},{placeholder:"$$futureOrderDate$$",replacement:'<span class="date--large">'+a.util.formatter.dateString(a.orderCard.futureOrderDate(),"DD/MM/YYYY")+"</span>"},{placeholder:"$$serviceActivationDate$$",replacement:'<span class="date--large">'+a.util.formatter.dateString(a.serviceCard.serviceActivationDate(),"DD/MM/YYYY")+"</span>"},{placeholder:"$$coolingOffDate$$",replacement:'<span class="date--large">'+a.util.formatter.dateString(a.coolingOffPeriodCard.coolingOffDate(),"DD/MM/YYYY")+"</span>"}])},a.orderTrackingData.subscribe(function(b){b&&(a.getSaleType(b),a.getServiceType(b),a.parseMoreInfoCard(b),a.parseOrderCard(b),a.parseModemCard(b),a.parseServiceCard(b),a.parseAppointmentCard(b),a.parseConnectCard(b),a.parseCallbackCard(b),a.parseCoolingOffCard(b),a.highlightCard(),a.onLinksClick())}),a.getSaleType=function(b){b.saleType&&a.saleType(b.saleType)},a.getServiceType=function(b){b.serviceType&&a.serviceType(b.serviceType)},a.parseMoreInfoCard=function(b){b.moreInformation&&a.moreInfoCard.status(b.moreInformation.cardStatus)},a.parseOrderCard=function(b){b.order&&(a.orderCard.status(b.order.cardStatus),a.orderCard.futureOrderDate(b.order.futureOrderDate))},a.parseModemCard=function(b){b.modemDelivery&&(a.modemCard.status(b.modemDelivery.cardStatus),a.modemCard.modemTrackingId(b.modemDelivery.modemTrackingId),a.modemCard.assetType(b.modemDelivery.assetType),b.modemDelivery.modemTrackingId&&a.modemCard.modemTrackingURL("https://sttrackandtrace.startrack.com.au/"+b.modemDelivery.modemTrackingId))},a.parseServiceCard=function(b){b.service&&(a.serviceCard.status(b.service.cardStatus),a.serviceCard.serviceActivationDate(b.service.serviceActivationDate),a.serviceCard.serviceActivationStatus(b.service.serviceActivationStatus))},a.parseAppointmentCard=function(b){b.appointment&&(a.appointmentCard.status(b.appointment.cardStatus),a.appointmentCard.appointmentDate(b.appointment.appointmentDate),a.appointmentCard.appointmentTime(b.appointment.appointmentTime),a.appointmentCard.appointmentStatus(b.appointment.appointmentStatus))},a.parseConnectCard=function(b){b.connect&&(a.connectCard.status(b.connect.cardStatus),a.connectCard.moveType(b.connect.moveType),a.connectCard.modemUsername(b.connect.modemUsername),a.connectCard.modemPassword(b.connect.modemPassword))},a.parseCallbackCard=function(b){b.callback&&(a.callbackCard.status(b.callback.cardStatus),a.callbackCard.callbackRequestStatus(b.callback.callbackRequestStatus))},a.parseCoolingOffCard=function(b){b.coolingOff&&(a.coolingOffPeriodCard.status(b.coolingOff.cardStatus),a.coolingOffPeriodCard.paymentFailed(b.coolingOff.paymentFailed),a.coolingOffPeriodCard.coolingOffDate(b.coolingOff.coolingOffDate))},a.deliveredModem=function(){var c=$.post(b);a.modemCard.status("LOADING"),c.done(function(){BELONG.adobeAnalytics.pages.orderTracking.clickToCloseModemCard(!0,!1),a.orderTrackingData().modemDelivery.cardStatus="CLOSE",a.orderTrackingData().modemDelivery.modemTrackingId=a.modemCard.modemTrackingId(),ko.postbox.publish("orderTrackingData",a.orderTrackingData())}),c.fail(function(b){a.modemCard.status("ERROR"),"timeout"===b.statusText?BELONG.adobeAnalytics.pages.orderTracking.clickToCloseModemCard(!1,"TIMEOUT_ERROR"):BELONG.adobeAnalytics.pages.orderTracking.clickToCloseModemCard(!1,"SERVER_ERROR")}),c.always(function(){})},a.onSubmitCallBack=function(){var b={customerName:"",customerEmail:"",customerPhoneNumber:"",serviceStatus:a.serviceCard.serviceActivationStatus(),timePreference:a.checkedCallBackOption()},d=$.ajax({type:"POST",url:c,data:b});a.submitCallBtnState("loading"),d.done(function(){BELONG.adobeAnalytics.pages.orderTracking.clickCallbackRequest(!0,b,!1),a.orderTrackingData().callback.callbackRequestStatus="REQUEST_SENT",ko.postbox.publish("orderTrackingData",a.orderTrackingData())}),d.fail(function(c){a.callbackCard.submitError(!0),"timeout"===c.statusText?BELONG.adobeAnalytics.pages.orderTracking.clickCallbackRequest(!1,b,"TIMEOUT_ERROR"):BELONG.adobeAnalytics.pages.orderTracking.clickCallbackRequest(!1,b,"SERVER_ERROR")}),d.always(function(){a.submitCallBtnState("")})},a.appointmentCard.title=ko.computed(function(){return"DSL"===a.serviceType()?"ADSL technician appointment":"NBN"===a.serviceType()?"NBN appointment":void 0}),a.init=function(){},a.onLinksClick=function(){$("#ctn-order-tracking-cards a").on("click",function(){if(!$(this).data("bind")){var a=$(this).text(),b=$(this).attr("href"),c=/belong.com.au/i.test(b),d=c?"internalLinkClick":"externalLinkClick";BELONG.adobeAnalytics.pages.orderTracking.clickURL(d,b,a)}})},a.highlightCard=function(){$(".belong-card-container").each(function(a){var b=$(this),c=b.find(".b-card");0===a&&(c.hasClass("error")||c.hasClass("warning")||c.addClass("active"))})},a.fireAnalyticsOnLinkClick=function(a,b){return BELONG.adobeAnalytics.pages.orderTracking.clickURL(a,b),!0}}}(),function(){"use strict";BELONG.orderTracking=BELONG.orderTracking||{},BELONG.orderTracking.NavigationVM=function(){var a=this;a.util=BELONG.util,a.orderTrackingData=ko.observable().subscribeTo("orderTrackingData",!0),a.serviceType=ko.observable(""),a.saleType=ko.observable(""),a.orderSuccessMessage=ko.observable().subscribeTo("orderSuccessMessage",!0),a.orderItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable(""),date:ko.observable(""),futureOrderDate:ko.observable(""),isSelected:ko.observable(!1)},a.modemItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Modem delivery"),modemTrackingId:ko.observable(""),modemTrackingURL:ko.observable(""),isSelected:ko.observable(!1)},a.appointmentItem={status:ko.observable("NOT_REQUIRED"),date:ko.observable(""),isSelected:ko.observable(!1)},a.serviceItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Service activation"),date:ko.observable(""),isSelected:ko.observable(!1)},a.connectItem={status:ko.observable("NOT_REQUIRED"),title:ko.observable("Connect"),isSelected:ko.observable(!1)},a.orderTrackingData.subscribe(function(b){b&&(a.getSaleType(b),a.getServiceType(b),a.parseOrderItem(b),a.parseModemItem(b),a.parseAppointmentItem(b),a.parseServiceItem(b),a.parseConnectItem(b),a.highlightItem(),a.setNumOnItem())}),a.appointmentItem.title=ko.computed(function(){return"DSL"===a.serviceType()?"ADSL appointment":"NBN"===a.serviceType()?"NBN appointment":void 0}),a.getSaleType=function(b){b.saleType&&(a.saleType(b.saleType),"MOVE"===b.saleType&&a.modemItem.title("Hardware Delivery"))},a.getServiceType=function(b){b.serviceType&&a.serviceType(b.serviceType)},a.parseOrderItem=function(b){b.order&&(a.orderItem.status(b.order.cardStatus),a.orderItem.date(b.order.serviceAddedDate),a.orderItem.futureOrderDate(b.order.futureOrderDate),"CLOSE"===b.order.cardStatus?("MOVE"===a.saleType()?a.orderItem.title("Move processed"):a.orderItem.title("Order processed"),a.orderItem.isSelected(!0)):(b.order.futureOrderDate?a.orderItem.title("Order processing request"):a.orderItem.title("Order processing"),a.orderItem.isSelected(!1)))},a.parseModemItem=function(b){b.modemDelivery&&(a.modemItem.status(b.modemDelivery.cardStatus),"CLOSE"===b.modemDelivery.cardStatus?(a.modemItem.isSelected(!0),a.modemItem.modemTrackingId(b.modemDelivery.modemTrackingId),b.modemDelivery.modemTrackingId&&a.modemItem.modemTrackingURL("https://sttrackandtrace.startrack.com.au/"+b.modemDelivery.modemTrackingId)):a.modemItem.isSelected(!1))},a.parseAppointmentItem=function(b){b.appointment&&(a.appointmentItem.status(b.appointment.cardStatus),a.appointmentItem.date(b.appointment.appointmentDate),"CLOSE"===b.appointment.cardStatus?a.appointmentItem.isSelected(!0):a.appointmentItem.isSelected(!1))},a.parseServiceItem=function(b){b.service&&(a.serviceItem.status(b.service.cardStatus),a.serviceItem.date(b.service.serviceActivationDate),"CLOSE"===b.service.cardStatus?a.serviceItem.isSelected(!0):a.serviceItem.isSelected(!1))},a.parseConnectItem=function(b){b.connect&&a.connectItem.status(b.connect.cardStatus)},a.highlightItem=function(){$("#ctn-order-tracking-nav .belong-selection-item").removeClass("-active"),$("#ctn-order-tracking-nav .belong-selection-item").each(function(){var a=$(this);if(!a.find("input:checked").length)return a.addClass("-active"),!1})},a.sortNav=function(a,b){return $(a).find("input:checked").length<$(b).find("input:checked").length},a.reOrderNav=function(){var b=$("#ctn-order-tracking-nav .belong-selection-item").sort(a.sortNav);$("#ctn-order-tracking-nav .order-tracking-nav-items").append(b)},a.setNumOnItem=function(){$("#ctn-order-tracking-nav .belong-selection-item").each(function(a){var b=$(this);b.find("label").attr("data-order-num",a+1)})},a.init=function(){},a.fireAnalyticsOnLinkClick=function(a,b){return BELONG.adobeAnalytics.pages.orderTracking.clickURL(a,b),!0}}}(),function(){BELONG.orderTracking=BELONG.orderTracking||{},$.extend(BELONG.orderTracking,function(){var a,b,c,d,e="/bin/belong/auth/customer/order";return{init:function(){return 0!==$("#cmp-order-tracking").length&&(b=new this.ViewModel,c=new BELONG.orderTracking.NavigationVM,d=new BELONG.orderTracking.CardsVM,ko.applyBindings(b,document.getElementById("cmp-order-tracking")),ko.applyBindings(c,document.getElementById("ctn-order-tracking-nav")),ko.applyBindings(d,document.getElementById("ctn-order-tracking-cards")),b.init(),c.init(),void d.init())},ViewModel:function(){a=this,a.viewState={isLoading:ko.observable(!0),serverError:ko.observable(!1)},a.orderTrackingData=ko.observable().publishOn("orderTrackingData"),a.orderSuccessMessage=ko.observable().publishOn("orderSuccessMessage"),"moveSuccess"===BELONG.util.loadPageVar("redirect")&&a.orderSuccessMessage("MOVE"),a.init=function(){a.apiRetrieve()},a.apiRetrieve=function(){var b=$.get(e);b.done(function(b){a.parseOrderData(b),BELONG.adobeAnalytics.pages.orderTracking.display(!0,b,!1)}),b.fail(function(b){a.viewState.serverError(!0),"timeout"===b.statusText?BELONG.adobeAnalytics.pages.orderTracking.display(!1,!1,"TIMEOUT_ERROR"):BELONG.adobeAnalytics.pages.orderTracking.display(!1,!1,"SERVER_ERROR")}),b.always(function(){a.viewState.isLoading(!1)})},a.parseOrderData=function(b){a.orderTrackingData(b)}}}}())}(),function(EVE){"use strict";EVE.personalDetails=EVE.personalDetails||{},$.extend(EVE.personalDetails,function(){var _self;return{init:function(){if(_self=this,0===$("#cmp-personal-details").length)return!1;var a=new this.viewModel;ko.applyBindings(a,document.getElementById("cmp-personal-details")),a.init()},viewModel:function(){function createFields(){var a=$.extend(!0,[],PERSONAL_DETAILS_CMS_DATA.fields);return a.forEach(function(a){a.value=ko.observable(""),a.updatedValue=ko.observable(""),a.fieldUpdated=ko.observable(!1),a.id===self.FIELDS.PASSWORD&&(a.newPassword=ko.observable(""),a.confirmPassword=ko.observable(""))}),a}var self=this,API_URL="/bin/belong/auth/customer/personal",UPDATE_URLS={email:"/bin/belong/auth/customer/personal/email",password:"/bin/belong/auth/customer/personal/password",mobile:"/bin/belong/auth/customer/personal/mobile"};self.STATES={VIEW:"VIEW",EDIT:"EDIT"},self.FIELDS={ADDRESS:"address",MOBILE:"mobile",EMAIL:"email",PASSWORD:"password"},self.ERROR={invalidMobile:"personal.invalidMobile",invalidEmail:"personal.invalidEmail",invalidPassword:"personal.invalidPassword",invalidDobFormat:"personal.invalidDobFormat",dobNotMatchWithIdentity:"personal.dobNotMatchWithIdentity"
},self.viewState={fields:createFields(),currentState:ko.observable("VIEW"),isLoading:ko.observable(!0),updateLoading:ko.observable(!1),serverError:ko.observable(!1),updateServerError:ko.observable(!1)},self.personalDetailsModel=ko.observable(),self.init=function(){self.apiRetrieve()},self.apiRetrieve=function(){var a=$.get(API_URL);a.done(function(a){self.personalDetailsModel(a),EVE.adobeAnalytics.pages.personalDetails.display()}),a.fail(function(a){self.viewState.serverError(!0)}),a.always(function(){self.viewState.isLoading(!1)})},self.personalDetailsModel.subscribe(function(a){self.resetForm(),self.updateFieldValues(a)}),self.resetForm=function(){self.viewState.fields.forEach(function(a){switch(a.id){case self.FIELDS.EMAIL:case self.FIELDS.MOBILE:a.updatedValue(""),a.updatedValue.subscribe(self.fieldUpdateHandler);break;case self.FIELDS.PASSWORD:a.newPassword(""),a.confirmPassword(""),a.confirmPassword.subscribe(self.fieldUpdateHandler)}}),self.viewState.currentEditingField=null,self.viewState.updateServerError(!1)},self.clearUpdatedState=function(){self.viewState.fields.forEach(function(a){a.fieldUpdated(!1)})},self.updateFieldValues=function(a){self.viewState.fields.forEach(function(b){switch(b.id){case self.FIELDS.ADDRESS:b.value(self.constructAddressString(a));break;case self.FIELDS.MOBILE:b.value(a.mobile);break;case self.FIELDS.EMAIL:b.value(a.email);break;case self.FIELDS.PASSWORD:}})},self.movingClick=function(){EVE.sqFormVM.sqVariation("ONLINE_MOVES"),EVE.sqModal.open(self.handleSqDone)},self.handleSqDone=function(){},self.constructAddressString=function(a){var b=a.address.trim();return b=a.address2.trim()?b+", "+a.address2.trim():b,b+=", "+a.suburb.trim()+" "+a.state.trim()+" "+a.postcode.trim()},self.editClicked=function(a){self.clearUpdatedState(),self.viewState.currentEditingField=a,self.viewState.currentState(self.STATES.EDIT),EVE.forms.applyShiftLabel();var b={rules:{"txt-email":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255},"txt-mobile":{required:!0,australianMobileNumber:!0},"txt-new-password":{required:!0,passwordComplexity:!0,disallowedCharacters:!0,badPassword:!0,minlength:8,maxlength:30},"txt-confirm-password":{equalTo:"#txt-new-password"}}};self.validator=EVE.validation.setupFormValidation("frm-edit-fields",$(".frm-edit-fields"),b),self.fireEditAnalytics(a.id,"edit")},self.editCancelled=function(a){self.viewState.currentState(self.STATES.VIEW),self.resetForm()},self.updateClicked=function(a){if(EVE.validation.validateForm(self.validator))switch(self.viewState.updateLoading(!0),a.id){case"email":a.updatedValue(a.updatedValue().replace(/ /g,"")),self.apiUpdateEmail(a);break;case"mobile":a.updatedValue(a.updatedValue().replace(/ /g,"")),self.apiUpdateMobile(a);break;case"password":self.apiUpdatePassword(a)}},self.formSubmit=function(a){return!1},self.fieldUpdateHandler=function(a){EVE.validation.resetCustomMessages()},self.apiUpdateEmail=function(a){var b=$.post(UPDATE_URLS.email,{email:a.updatedValue()});b.done(function(){a.fieldUpdated(!0);var b=self.personalDetailsModel().email;self.personalDetailsModel().email=a.updatedValue(),self.personalDetailsModel.valueHasMutated(),self.viewState.currentState(self.STATES.VIEW),self.fireEditAnalytics(a.id,"update"),EVE.adobeAnalytics.pages.personalDetails.updateEmail({oldValue:b,newValue:self.personalDetailsModel().email})}),b.fail(function(a,b){self.applyApiUpdateError("txt-email",a.responseJSON,b)}),b.always(function(){self.viewState.updateLoading(!1)})},self.apiUpdateMobile=function(a){var b=$.post(UPDATE_URLS.mobile,{mobileNumber:a.updatedValue()});b.done(function(){a.fieldUpdated(!0);self.personalDetailsModel().mobile;self.personalDetailsModel().mobile=a.updatedValue(),self.personalDetailsModel.valueHasMutated(),self.viewState.currentState(self.STATES.VIEW),self.fireEditAnalytics(a.id,"update")}),b.fail(function(a,b){self.applyApiUpdateError("txt-mobile",a.responseJSON,b)}),b.always(function(){self.viewState.updateLoading(!1)})},self.apiUpdatePassword=function(a){var b=$.post(UPDATE_URLS.password,{password:a.confirmPassword()});b.done(function(){a.fieldUpdated(!0),self.resetForm(),self.viewState.currentState(self.STATES.VIEW),self.fireEditAnalytics(a.id,"update")}),b.fail(function(a,b){self.applyApiUpdateError("txt-confirm-password",a.responseJSON,b)}),b.always(function(){self.viewState.updateLoading(!1)})},self.applyApiUpdateError=function(a,b,c){if("timeout"===c)self.viewState.updateServerError(!0);else{var d=b.errors[0].code,e=d.split(".");if("common"===e[0]||d===self.ERROR.dobNotMatchWithIdentity)self.viewState.updateServerError(!0);else{EVE.validation.resetCustomMessages();var f=EVE.responseMessage.getApiMessage("frm-edit-fields-api",a,d.split(".")[1]);EVE.validation.attachCustomMessage(a,f,"error",!0)}}},self.fireEditAnalytics=function(fieldId,op){var field=fieldId&&fieldId[0].toUpperCase()+fieldId.slice(1),func=op+field;eval("EVE.adobeAnalytics.pages.personalDetails."+func+"()")}}}}())}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.contractCardVM=function(){var b=this,c={TWELVE_MONTHS:"TWELVE_MONTHS",MONTH_BY_MONTH:"MONTH_BY_MONTH"};b.productBuilderVariant=ko.observable().subscribeTo("productBuilderVariant",!0),b.contractOptions=PRODUCT_BUILDER_CONTRACTS,b.selectedContractOption=ko.observable(c.TWELVE_MONTHS),b.selectedContractObject=ko.computed(function(){for(var a=0;a<PRODUCT_BUILDER_CONTRACTS.length;a++)if(PRODUCT_BUILDER_CONTRACTS[a].option===b.selectedContractOption())return PRODUCT_BUILDER_CONTRACTS[a];return null}).publishOn("selectedContract"),b.sqNDCAddress=ko.observable().syncWith("sqNDCAddress",!0),b.disableMBM=ko.observable().subscribeTo("disableMBM",!0),b.selectedPlanSize=ko.observable({}).subscribeTo("selectedPlanSize",!0),b.productType=ko.observable().subscribeTo("productType",!0),b.selectedContractCost=ko.computed(function(){return b.selectedContractObject().cost}).publishOn("selectedContractCost"),b.NDCPaymentType=ko.computed(function(){return" "+b.selectedContractObject().NDCPaymentType}),b.NDCCost=ko.observable().subscribeTo("NDCCost",!0),b.promoText=ko.computed(function(){var a=PRODUCT_BUILDER__CONTRACT_PROMO_TEXT;if(!b.sqNDCAddress())return"Standard"===b.productBuilderVariant()?a.DEFAULT:a.DEFAULT_MOVE;if("Standard"===b.productBuilderVariant())switch(b.selectedContractOption()){case c.TWELVE_MONTHS:return a.NDC_TWELVE_MONTHS;case c.MONTH_BY_MONTH:return a.NDC_MONTH_BY_MONTH}else switch(b.selectedContractOption()){case c.TWELVE_MONTHS:return a.NDC_TWELVE_MONTHS_MOVE;case c.MONTH_BY_MONTH:return a.NDC_MONTH_BY_MONTH_MOVE}}),b.NDCPrefix=ko.computed(function(){return b.selectedContractOption()===c.MONTH_BY_MONTH?"and ":"+"}),b.openModal=function(){a.adobeAnalytics.pages.productBuilder.contractModalOpen(),a.productBuilder.contractModal()},b.selectedContractOption.subscribe(function(b){a.adobeAnalytics.pages.productBuilder.contractSelection(b)}),b.tempProductBuilder=ko.observable({}).subscribeTo("tempProductBuilder",!0),b.tempProductBuilder.subscribe(function(a){null!==a&&"undefined"!=typeof a&&b.selectedContractOption(JSON.parse(a).contractOption)}),"redirected"===a.util.loadPageVar("sq_redirect")&&b.tempProductBuilder.valueHasMutated()}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.contractModalVM=function(){var b=this;b.sqNDCAddress=ko.observable().subscribeTo("sqNDCAddress",!0),b.modalCancel=function(){a.adobeAnalytics.pages.productBuilder.contractModalClose(),$.magnificPopup.close()}}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.phoneLineCardVM=function(){var b=this;b.PHONELINEOPTIONS={BUNDLE:"BUNDLE",DSL:"DSL"},b.phoneLineOptions=PRODUCT_BUILDER_PHONELINE,b.selectedPhoneLineOption=ko.observable(b.PHONELINEOPTIONS.BUNDLE).syncWith("selectedPhoneLineOption"),b.selectedPhoneLineObject=ko.computed(function(){for(var a=0;a<PRODUCT_BUILDER_PHONELINE.length;a++)if(PRODUCT_BUILDER_PHONELINE[a].planType===b.selectedPhoneLineOption())return PRODUCT_BUILDER_PHONELINE[a];return null}).syncWith("selectedPhoneLine",!0),b.priceUpdate=ko.computed(function(){return b.selectedPhoneLineObject().costSaving}),b.displayModal=function(){a.productBuilder.phonelineModal()},b.selectedPhoneLineOption.subscribe(function(b){a.adobeAnalytics.pages.productBuilder.phoneLineSelection(b)})}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.phonelineModalVM=function(){var b=this;b.modalCancel=function(){a.adobeAnalytics.pages.productBuilder.phoneLineModalClose(),$.magnificPopup.close()}}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.planCardVM=function(){var b=this,c={REGULAR:"Regular",LARGE:"Large",EXTRALARGE:"ExtraLarge",UNLIMITED:"Unlimited"};b.planOptions=PRODUCT_BUILDER_PLANS,b.productType=ko.observable().subscribeTo("productType",!0),b.unlimitedPlanNBN=ko.observable().subscribeTo("unlimitedSwitchNBN",!0)||!1,b.unlimitedPlanADSL=ko.observable().subscribeTo("unlimitedSwitchADSL",!0)||!1,b.unlimitedPlan=ko.computed(function(){return"NBN"===b.productType()?b.unlimitedPlanNBN():"ADSL"===b.productType()?b.unlimitedPlanADSL():void 0}),b.selectedPlanOption=ko.observable(c.REGULAR),b.selectedPlanObject=ko.computed(function(){for(var a=0;a<PRODUCT_BUILDER_PLANS.length;a++)if(PRODUCT_BUILDER_PLANS[a].planSize===b.selectedPlanOption())return PRODUCT_BUILDER_PLANS[a];return null}).publishOn("selectedPlanSize"),b.selectedPlanType=ko.observable().subscribeTo("selectedPlanType",!0),b.selectedPhoneLine=ko.observable().subscribeTo("selectedPhoneLine",!0),b.selectedPlanCost=ko.observable().subscribeTo("selectedPlanCost",!0),b.modifiedPlanCost=ko.computed(function(){var a=b.selectedPlanCost();return"DSL"===b.selectedPlanType()&&(a=b.selectedPlanCost()+b.selectedPhoneLine().costSaving),Modernizr.touch&&($("#lblPlanCostPopup").css({display:"inline-block"}),setTimeout(function(){$("#lblPlanCostPopup").css({display:""})},10)),a}),b.regularPlanCostPerUnit=ko.observable().subscribeTo("regularPlanCostPerUnit",!0),b.largePlanCostPerUnit=ko.observable().subscribeTo("largePlanCostPerUnit",!0),b.extraLargePlanCostPerUnit=ko.observable().subscribeTo("extraLargePlanCostPerUnit",!0),b.displayModal=function(){a.adobeAnalytics.pages.productBuilder.planModalOpen(),a.productBuilder.planModal()},b.promoText=ko.computed(function(){var a=PRODUCT_BUILDER__PLAN_PROMO_TEXT;if(b.unlimitedPlan())return a.UNLIMITED_PROMO;switch(b.productType()){case"NBN":return a.NBN_DEFAULT;case"ADSL":return a.ADSL_DEFAULT;default:return"You can change this once a month."}}),b.selectedPlanOption.subscribe(function(b){a.adobeAnalytics.pages.productBuilder.planSelection(b)}),b.tempProductBuilder=ko.observable({}).subscribeTo("tempProductBuilder",!0),b.tempProductBuilder.subscribe(function(a){null!==a&&"undefined"!=typeof a&&b.selectedPlanOption(JSON.parse(a).planSize)}),"redirected"===a.util.loadPageVar("sq_redirect")&&b.tempProductBuilder.valueHasMutated()}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.planModalVM=function(){var b=this;b.productType=ko.observable().subscribeTo("productType",!0),b.unlimitedPlanNBN=ko.observable().subscribeTo("unlimitedSwitchNBN",!0)||!1,b.unlimitedPlanADSL=ko.observable().subscribeTo("unlimitedSwitchADSL",!0)||!1,b.unlimitedPlan=ko.computed(function(){return"NBN"===b.productType()?b.unlimitedPlanNBN():"ADSL"===b.productType()?b.unlimitedPlanADSL():void 0}),b.modalCancel=function(){a.adobeAnalytics.pages.productBuilder.planModalClose(),$.magnificPopup.close()}}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},$.extend(a.productBuilder,function(){var b,c,d=!1;return a.PRODUCTBUILDERINITIALISED=!1,a.PLANMODALINITIALISED=!1,a.CONTRACTMODALINITIALISED=!1,a.SPEEDBOOSTMODALINITIALISED=!1,a.VOICEMODALINITIALISED=!1,a.PHONELINEMODALINITIALISED=!1,{state:"",productBuiderVariant:ko.observable().subscribeTo("productBuilderVariant"),parentVM:null,voiceCardVmInstance:null,speedBoostCardVmInstance:null,voiceModalVmInstance:null,speedBoostModalVmInstance:null,presetVoiceAndSpeedboostForABTestUS1516:function(){function a(){var a;a="",$("#ctn-voice-card .b-card__visual .icon").remove(),a+='<div class="b-card__visual__promo-details">',a+="<h4>"+c+"</h4>",a+=""+d,a+="</div>",$("#ctn-voice-card .b-card__visual").prepend(a),$("#ctn-voice-card .b-card__visual").addClass("-dark-gradient"),"NBN"==BELONG.productBuilder.parentVM.productType()&&(a="",$("#ctn-speedboost-card .b-card__visual .icon").remove(),a+='<div class="b-card__visual__promo-details">',a+="<h4>"+e+"</h4>",a+=""+f,a+="</div>",$("#ctn-speedboost-card .b-card__visual").prepend(a),$("#ctn-speedboost-card .b-card__visual").addClass("-dark-gradient"))}function b(){BELONG.productBuilder.voiceModalVmInstance=new BELONG.productBuilder.voiceModalVM,ko.applyBindings(BELONG.productBuilder.voiceModalVmInstance,document.getElementById("mdl-builder-voice")),BELONG.VOICEMODALINITIALISED=!0,BELONG.productBuilder.voiceModalVmInstance.currentCardState("EDIT"),"NBN"==BELONG.productBuilder.parentVM.productType()&&(BELONG.productBuilder.parentVM.speedBoostCardVmInstance.selectedSpeedBoostOptionCard("25/5"),BELONG.productBuilder.parentVM.speedBoostCardVmInstance.allowTwelveOverOne(!0),BELONG.productBuilder.parentVM.selectedSpeedBoostOption("12/1"))}var c=$("#ctn-voice-card .b-card__sales-title h3").html(),d=$("#ctn-voice-card .b-card__sales-messages").html();"undefined"==typeof c&&(c="Add Belong Voice"),"undefined"==typeof d&&(d="<p>Unlimited national or international calls to select countries from $10/month using Wi-Fi or mobile data</p>");var e=$("#ctn-speedboost-card .b-card__sales-title h3").html(),f=$("#ctn-speedboost-card .b-card__sales-messages").html();b(),a()},init:function(){function e(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}if(b=this,0===$("#cmp-product-builder").length)return this.state="not-available",!1;this.state="loading",$("#nav-join").remove(),$("#belong-cards").off("click").on("click",function(a){DD.bp.is("1366,4000")&&!d&&/belong-selection-item/i.test(a.target.parentElement.className)&&(d=!0,$("#belong-cards").velocity("stop").velocity("scroll",{duration:1e3,easing:"ease-out",offset:-80}))});var f=new RegExp("adsl|nbn"),g=f.exec(window.location.pathname)[0].toUpperCase();this.parentVM=new b.viewModel(g),c=new a.productBuilder.promoCodeVM,sessionStorage.removeItem("productModel"),ko.applyBindings(new a.productBuilder.contractCardVM,document.getElementById("ctn-contract-card")),this.voiceCardVmInstance=new a.productBuilder.voiceCardVM,ko.applyBindings(this.voiceCardVmInstance,document.getElementById("ctn-voice-card")),ko.applyBindings(new a.productBuilder.planCardVM,document.getElementById("ctn-plan-card")),"Standard"===PRODUCT_BUILDER_VARIANT&&ko.applyBindings(c,document.getElementById("module-promo-code")),ko.applyBindings(this.parentVM,document.getElementById("cmp-product-builder")),this.parentVM.promoVM=c,this.parentVM.init(),c.init(),$(".fn-modal-plan").off("click").on("click",function(){a.adobeAnalytics.pages.productBuilder.planModalOpen(),b.planModal()}),$(".fn-modal-contract").off("click").on("click",function(){a.adobeAnalytics.pages.productBuilder.contractModalOpen(),b.contractModal()}),$(".fn-modal-speedboost").off("click").on("click",function(){a.adobeAnalytics.pages.productBuilder.speedboostModalOpen(),b.speedboostModal()}),$(".fn-modal-voice").off("click").on("click",function(){a.adobeAnalytics.pages.productBuilder.voiceModalOpen(),b.voiceModal()}),$(".fn-modal-phoneline").off("click").on("click",function(){a.adobeAnalytics.pages.productBuilder.phoneLineModalOpen(),b.phonelineModal()});var h=e("modal");if(h)switch(h){case"plan":b.planModal();break;case"contract":b.contractModal();break;case"speedboost":b.speedboostModal();break;case"voice":b.voiceModal();break;case"phoneline":b.phonelineModal()}a.PRODUCTBUILDERINITIALISED=!0,"OnlineMoves"==this.productBuiderVariant()?this.state="loaded-moves":"Standard"==this.productBuiderVariant()?this.state="loaded-standard":this.state="loaded-standard"},planModal:function(){b.openModal({modalId:"mdl-builder-plan",initialisedCheck:a.PLANMODALINITIALISED,modalVM:a.productBuilder.planModalVM,autoResizeNameSpace:"modalAutoResizeBuilderPlan"}),a.PLANMODALINITIALISED=!0},contractModal:function(){b.openModal({modalId:"mdl-builder-contract",initialisedCheck:a.CONTRACTMODALINITIALISED,modalVM:a.productBuilder.contractModalVM,autoResizeNameSpace:"modalAutoResizeBuilderContract"}),a.CONTRACTMODALINITIALISED=!0},speedboostModal:function(){0==a.SPEEDBOOSTMODALINITIALISED&&(this.speedBoostModalVmInstance=new a.productBuilder.speedBoostModalVM),b.openModal({modalId:"mdl-builder-speed-boost",initialisedCheck:a.SPEEDBOOSTMODALINITIALISED,modalVmInstance:this.speedBoostModalVmInstance,autoResizeNameSpace:"modalAutoResizeBuilderSpeedBoost"}),a.SPEEDBOOSTMODALINITIALISED=!0},voiceModal:function(){0==a.VOICEMODALINITIALISED&&(this.voiceModalVmInstance=new a.productBuilder.voiceModalVM),b.openModal({modalId:"mdl-builder-voice",initialisedCheck:a.VOICEMODALINITIALISED,modalVmInstance:this.voiceModalVmInstance,autoResizeNameSpace:"modalAutoResizeBuilderVoice"}),a.VOICEMODALINITIALISED=!0},phonelineModal:function(){b.openModal({modalId:"mdl-builder-phone-line",initialisedCheck:a.PHONELINEMODALINITIALISED,modalVM:a.productBuilder.phonelineModalVM,autoResizeNameSpace:"modalAutoResizeBuilderPhoneLine"}),a.PHONELINEMODALINITIALISED=!0},openModal:function(b){$.magnificPopup.open({items:{src:"#"+b.modalId,type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,overflowY:"auto",callbacks:{open:function(){if(!b.initialisedCheck){var a;a=b.modalVmInstance?b.modalVmInstance:new b.modalVM,ko.applyBindings(a,document.getElementById(b.modalId))}},close:function(){}}}),a.belongModal.setupAutoResize({modalContainer:$("#"+b.modalId),nameSpace:b.autoResizeNameSpace})},viewModel:function(b){var c=this;c.PROD_TYPES={NBN:"NBN",ADSL:"ADSL"},c.PLAN_TYPES={NBN:"NBN",DSL:"DSL",BUNDLE:"BUNDLE"},c.PLAN_SIZES={REGULAR:"Regular",LARGE:"Large",EXTRALARGE:"ExtraLarge",UNLIMITED:"Unlimited"},c.SQ_ORDER_TYPES={PORT:"PORT_ORDER",NEW:"NEW_ORDER",CHURN:"CHURN_ORDER"},c.PAGE_LINKS={JOIN:"/join?productbuilder=true",NBN:"/nbn",ADSL:"/adsl",NBN_MOVES:"/account/nbn-moves",ADSL_MOVES:"/account/adsl-moves"},c.NDC_FEES={UPFRONT:300,TWELVE_MONTHS:25},c.extendedNetworkSurcharge=PRODUCT_BUILDER_EXTENDED_NETWORK_SURCHARGE,c.productBuilderVariant=ko.observable(PRODUCT_BUILDER_VARIANT).publishOn("productBuilderVariant"),c.bindings={phoneLineCard:!1,speedboostCard:!1},c.promoVM=null,c.isLoading=ko.observable(!0),c.waitingForAutoMoveSQ=ko.observable(!1),c.waitingForAutoMoveSQ.subscribe(function(a){a===!1&&c.isLoading(!1)});PRODUCT_BUILDER_BASE_PLAN_COSTS;c.productType=ko.observable(b).publishOn("productType"),c.unlimitedSwitchNBN=ko.observable(PRODUCT_BUILDER_UNLIMITED_SWITCH_NBN||!1).publishOn("unlimitedSwitchNBN"),c.unlimitedSwitchADSL=ko.observable(PRODUCT_BUILDER_UNLIMITED_SWITCH_ADSL||!1).publishOn("unlimitedSwitchADSL"),c.migrationData=ko.observable().subscribeTo("migrationData",!0),c.sqModel=ko.observable({}),c.joinWithPromo=ko.observable(!1),c.sqDone=ko.observable(!1).publishOn("sqDone"),c.sqTechType=ko.observable("").publishOn("sqTechType"),c.sqOrderType=ko.observable(""),c.sqProductType=ko.computed(function(){return["ADSL1","ADSL2"].indexOf(c.sqTechType())>=0?"ADSL":"NBN"}),c.sqExtendedNetwork=ko.observable(!1).publishOn("sqExtendedNetwork"),c.sqNDCAddress=ko.observable().publishOn("sqNDCAddress"),c.sqAddress=ko.observable("").publishOn("sqAddress"),c.showNdc=ko.computed(function(){var a=!1;return c.sqNDCAddress()&&c.joinEnabled()&&(a=!0),a}).publishOn("showNdc"),c.selectedNdcUpfront=ko.observable(!0),c.ndcCost=ko.computed(function(){var a=0;return c.sqNDCAddress()&&(a=c.NDC_FEES.UPFRONT,c.selectedNdcUpfront()||"MONTH_BY_MONTH"===c.selectedContract().option||(a=c.NDC_FEES.TWELVE_MONTHS),a%1>0)?a.toFixed(2):a}).publishOn("NDCCost"),c.sqEditHover=function(){$(".sq-result .edit-icon").removeClass("svg-edit-icon-grey"),$(".sq-result .edit-icon").addClass("svg-edit-icon-bblue")},c.sqEditOffHover=function(){$(".sq-result .edit-icon").addClass("svg-edit-icon-grey"),$(".sq-result .edit-icon").removeClass("svg-edit-icon-bblue")},c.sqCheckHover=function(){$(".sq-link .check-icon").removeClass("svg-house-bblue"),$(".sq-link .check-icon").addClass("svg-house-dark-blue")},c.sqCheckOffHover=function(){$(".sq-link .check-icon").addClass("svg-house-bblue"),$(".sq-link .check-icon").removeClass("svg-house-dark-blue")},c.planCardVisible=ko.observable(!0).publishOn("planCardVisible"),c.contractCardVisible=ko.observable(!0).publishOn("contractCardVisible"),c.speedboostCardVisible=ko.observable(!1).publishOn("speedboostCardVisible"),c.voiceCardVisible=ko.observable(!0).publishOn("voiceCardVisible"),c.phoneLineCardVisible=ko.observable(!1).publishOn("phoneLineCardVisible"),c.selectedPlanSize=ko.observable({}).subscribeTo("selectedPlanSize"),c.selectedContract=ko.observable({}).subscribeTo("selectedContract"),c.selectedContractCost=ko.observable(0).subscribeTo("selectedContractCost"),c.selectedSpeed=ko.observable({}).subscribeTo("selectedSpeed"),c.selectedPhoneLineOption=ko.observable().syncWith("selectedPhoneLineOption",!0),c.selectedPhoneLine=ko.observable({}).syncWith("selectedPhoneLine"),c.selectedVoicePlan=ko.observable({}).subscribeTo("selectedVoicePlan"),c.selectedContractDuration=ko.computed(function(){switch(c.selectedContract().option){case"TWELVE_MONTHS":return 12;default:return 1}}).publishOn("selectedContractDuration"),c.promoCode=ko.observable("").subscribeTo("promoCode",!0),c.isPromoApplied=ko.observable().syncWith("isPromoApplied",!0),c.promoStaffId=ko.observable("").subscribeTo("promoStaffId",!1),c.showReapplyMessage=ko.observable("").syncWith("promoShowReapplyMessage",!0),c.campaignCode=ko.observable("").subscribeTo("campaignCode",!1),c.promoCredit=ko.observable({}).subscribeTo("promoCredit",!0),c.canClearPromo=ko.observable().syncWith("canClearPromo",!0),c.selectedPlanType=ko.computed(function(){var a=c.productType();return c.productType()===c.PROD_TYPES.ADSL&&(a=c.PLAN_TYPES.BUNDLE,c.selectedPhoneLine().planType&&(a=c.selectedPhoneLine().planType)),a}).publishOn("selectedPlanType"),c.previouslyNbnTactical=ko.computed(function(){var a,b=0;if("undefined"==typeof c.migrationData()||null===c.migrationData()||c.migrationData()===!1)return!1;if(a=c.migrationData().currentService.plan.recurringChargeList,"Regular"===c.selectedPlanSize().planSize&&"NBN"===c.migrationData().currentService.plan.planType)for(b;b<a.length;b+=1)if("CONTRACT_CREDIT"===a[b].recurringChargeType&&a[b].price===-10)return!0;return!1}),c.selectedPlanCost=ko.computed(function(){if(c.selectedPlanType()&&c.selectedPlanSize())for(var a=0;a<PRODUCT_BUILDER_BASE_PLAN_COSTS.length;a++){var b=PRODUCT_BUILDER_BASE_PLAN_COSTS[a],d=c.selectedPlanSize().planSize;if("NBN"===c.selectedPlanType()&&"Regular"===c.selectedPlanSize().planSize&&"OnlineMoves"===c.productBuilderVariant()&&(d=c.previouslyNbnTactical()?c.selectedPlanSize().planSize:c.selectedPlanSize().planSize+"_Move"),b.planType===c.selectedPlanType()&&b.planSize===d)return c.sqExtendedNetwork()?b.cost+c.extendedNetworkSurcharge:b.cost}return 0}).publishOn("selectedPlanCost"),c.regularPlanCostPerUnit=ko.computed(function(){if(c.selectedPlanType())for(var a=0;a<PRODUCT_BUILDER_BASE_PLAN_COSTS.length;a++){var b=PRODUCT_BUILDER_BASE_PLAN_COSTS[a];if(b.planType===c.selectedPlanType()&&b.planSize===c.PLAN_SIZES.REGULAR)return c.sqExtendedNetwork()&&b.planType!==c.PLAN_TYPES.NBN?b.extUnitCost:b.unitCost}return 0}).publishOn("regularPlanCostPerUnit"),c.largePlanCostPerUnit=ko.computed(function(){if(c.selectedPlanType())for(var a=0;a<PRODUCT_BUILDER_BASE_PLAN_COSTS.length;a++){var b=PRODUCT_BUILDER_BASE_PLAN_COSTS[a];if(b.planType===c.selectedPlanType()&&b.planSize===c.PLAN_SIZES.LARGE)return c.sqExtendedNetwork()&&b.planType!==c.PLAN_TYPES.NBN?b.extUnitCost:b.unitCost}return 0}).publishOn("largePlanCostPerUnit"),c.extraLargePlanCostPerUnit=ko.computed(function(){if(c.selectedPlanType())for(var a=0;a<PRODUCT_BUILDER_BASE_PLAN_COSTS.length;a++){var b=PRODUCT_BUILDER_BASE_PLAN_COSTS[a];if(b.planType===c.selectedPlanType()&&b.planSize===c.PLAN_SIZES.EXTRALARGE)return c.sqExtendedNetwork()&&b.planType!==c.PLAN_TYPES.NBN?b.extUnitCost:b.unitCost}return 0}).publishOn("extraLargePlanCostPerUnit"),c.calculateMonthlyProductCost=function(){var a=c.selectedPlanCost();return"TWELVE_MONTHS"===c.selectedContract().option?a=a:"MONTH_BY_MONTH"===c.selectedContract().option&&(a+=c.selectedContractCost()),a+=c.applySpeedboostCostIfNbn(),a+=c.selectedVoicePlan()?c.selectedVoicePlan().cost:0},c.applySpeedboostCostIfNbn=function(){var a=0;return c.selectedPlanType()===c.PLAN_TYPES.NBN&&(a+=c.selectedSpeed()?c.selectedSpeed().cost:0),a},c.monthlyProductCost=ko.computed(c.calculateMonthlyProductCost).publishOn("monthlyProductCost"),c.monthlyCost=ko.computed(function(){var a=c.monthlyProductCost();return c.selectedNdcUpfront()||"MONTH_BY_MONTH"===c.selectedContract().option||(a+=c.ndcCost()),a%1>0?a.toFixed(2):a}).publishOn("monthlyCost"),c.isPromotionalSpeedboost=ko.observable().subscribeTo("isPromotionalSpeedboost"),c.getPromotionalSpeedboostCostIfApplicable=function(){var a=3,b=c.selectedSpeed().cost*-1,d=c.isPromotionalSpeedboost()&&c.selectedPlanType()===c.PLAN_TYPES.NBN,e=0;return!d||"RAPID"===c.promoCode()&&"MONTH_BY_MONTH"===c.selectedContract().option?0:("RAPID"===c.promoCode()&&c.isPromoApplied()&&(a=2),"MONTH_BY_MONTH"===c.selectedContract().option?e=b:"TWELVE_MONTHS"===c.selectedContract().option&&(e=b*a),e)},c.monthlyCostForDisplay=ko.computed(function(){var a=c.monthlyCost(),b=c.isPromotionalSpeedboost()&&c.selectedPlanType()===c.PLAN_TYPES.NBN,d=c.selectedSpeed().cost*-1;return b&&(a+=d),a}),c.modemCost=ko.computed(function(){var a=60;return("RAPID"===c.promoCode()&&c.isPromoApplied()||"OnlineMoves"===c.productBuilderVariant()||"TWELVE_MONTHS"===c.selectedContract().option)&&(a=0),a}),c.calculateTmc=function(){var a=0;if("MONTH_BY_MONTH"===c.selectedContract().option?(a=c.monthlyProductCost(),c.sqNDCAddress()&&(a+=c.NDC_FEES.UPFRONT)):"TWELVE_MONTHS"===c.selectedContract().option&&(a=12*c.monthlyProductCost(),c.sqNDCAddress()&&(a+=12*c.NDC_FEES.TWELVE_MONTHS)),a+=c.modemCost(),a+=c.getPromotionalSpeedboostCostIfApplicable(),"undefined"!=typeof c.promoCredit().creditType){var b=c.promoCredit().creditOccurrence||c.selectedContractDuration();switch(c.promoCredit().creditType){case"FIXED":a-=c.promoCredit().creditAmount*b;break;case"BASE":a-=c.selectedPlanCost()*b;break;case"FULL":a-=c.monthlyCost()*b}}return a%1>0?a.toFixed(2):a},c.tmc=ko.computed(c.calculateTmc).publishOn("tmc"),c.isContract=ko.computed(function(){return"MONTH_BY_MONTH"!==c.selectedContract().option}),c.plusLineRental=ko.computed(function(){return"DSL"===c.selectedPhoneLine().planType}),c.joinEnabled=ko.computed(function(){return!c.sqDone()||c.productType()===c.sqProductType()}),c.sendProductConfigToLivePerson=function(){var b=c.productType(),d=c.selectedPlanSize().planSize,e=c.selectedPlanCost(),f=c.selectedContract().displayName,g="";c.selectedSpeed()&&(g=c.selectedSpeed().displaySpeed);var h="",i="";c.selectedVoicePlan()&&(h=c.selectedVoicePlan().plan,i=c.selectedVoicePlan().cost);var j=c.tmc();b="ADSL1"===c.sqTechType()?"ADSL1":"ADSL2"===c.sqTechType()?"ADSL2+":"NBN","BUNDLE"===c.selectedPlanType()&&(b+=" Bundle"),c.sqExtendedNetwork()&&(b+=" (Extended Network)"),c.sqNDCAddress()&&(b+=" (NDC Address)");var k=b+" - "+d;a.livePerson.productPages.productBuilderContinue(k,e,f,g,h,i,j)},c.formCurrentStep=ko.observable().subscribeTo("currentStep",!0),c.formRules=ko.computed(function(){return"OnlineMoves"!==c.productBuilderVariant()||c.formCurrentStep()<=2}),c.movePBComplete=ko.observable(!1).syncWith("movePBComplete"),c.movesClick=function(b,d){if(c.sqDone()){var e=c.mapProductModel();sessionStorage.setItem("productModel",JSON.stringify(e));var f=c.getSqAnalyticsObj();a.adobeAnalytics.pages.productBuilder.productBuilderComplete("productBuilderMove",e,f),c.movePBComplete(!0)}else c.saveTempSessionObj(),c.displaySq(c.joinClickSqCallback)},c.joinClick=function(b,d){var e=c.mapProductModel();sessionStorage.setItem("productModel",JSON.stringify(e));var f=c.getSqAnalyticsObj();a.adobeAnalytics.pages.productBuilder.productBuilderComplete("productBuilderJoin",e,f),c.joinWithPromo("btn-product-builder-join-promo"===d.target.id),c.sqDone()?c.redirectToPage(c.PAGE_LINKS.JOIN):(c.saveTempSessionObj(),c.displaySq(c.joinClickSqCallback))},c.sqEditClick=function(){c.saveTempSessionObj(),c.displaySq(c.handleSqDone);var b=c.getSqAnalyticsObj(),d=c.mapProductModel();a.adobeAnalytics.pages.productBuilder.checkAddressClick(d,b)},c.checkADSLOptions=function(){c.saveTempSessionObj(),"OnlineMoves"===c.productBuilderVariant()?c.redirectToPage(c.PAGE_LINKS.ADSL_MOVES):c.redirectToPage(c.PAGE_LINKS.ADSL)},c.checkNBNOptions=function(){c.saveTempSessionObj(),"OnlineMoves"===c.productBuilderVariant()?c.redirectToPage(c.PAGE_LINKS.NBN_MOVES):c.redirectToPage(c.PAGE_LINKS.NBN)},c.callPBHandleSqDone=ko.observable().subscribeTo("callPBHandleSqDone"),c.callPBHandleSqDone.subscribe(function(a){a===!0&&(c.callPBHandleSqDone(!1),c.handleSqDone())}),c.init=function(){c.handleSqDone(),c.setCardVisibility(c.productType()),c.tempProductBuilder(sessionStorage.getItem("tempProductBuilder")),c.waitingForAutoMoveSQ()===!1&&c.isLoading(!1)},c.setCardVisibility=function(b){b===c.PROD_TYPES.NBN?(c.speedboostCardVisible(!0),c.bindings.speedboostCard||(c.speedBoostCardVmInstance=new a.productBuilder.speedboostCardVM,ko.applyBindings(c.speedBoostCardVmInstance,document.getElementById("ctn-speedboost-card")),c.bindings.speedboostCard=!0)):c.speedboostCardVisible(!1),b===c.PROD_TYPES.ADSL&&c.sqDone()&&c.sqOrderType()===c.SQ_ORDER_TYPES.CHURN?c.phoneLineCardVisible()!==!0&&(c.phoneLineCardVisible(!0),c.bindings.phoneLineCard||(ko.applyBindings(new a.productBuilder.phoneLineCardVM,document.getElementById("ctn-phone-line-card")),c.bindings.phoneLineCard=!0)):(c.phoneLineCardVisible(!1),c.bindings.phoneLineCard=!1,c.selectedPhoneLine({}))},c.selectedSpeedBoostOption=ko.observable().syncWith("selectedSpeedBoostOptionCard",!0),c.voiceChangesDisabled=ko.observable(!1).syncWith("voiceChangesDisabled"),c.disableMBM=ko.observable(!1).publishOn("disableMBM"),c.tempProductBuilder=ko.observable(null).publishOn("tempProductBuilder"),c.migrationType=ko.observable("").subscribeTo("migrationType",!0),c.migrationType.subscribe(function(a){if("undefined"!=typeof c.migrationData()&&null!==c.migrationData()){var b,d,e,f,g,h=c.migrationData().currentService.plan,i={},j=h.planSize,k="",l="";for(f=0;f<h.recurringChargeList.length;f+=1)null!==h.recurringChargeList[f].contractOption&&"MONTH_BY_MONTH"!==h.recurringChargeList[f].contractOption&&(b=!0);switch(d=b?"TWELVE_MONTHS":"MONTH_BY_MONTH",b&&c.migrationData().currentService.canRecontract===!1&&c.disableMBM(!0),e=h.planSpeed,g=c.migrationData().currentService.voiceDetails,null!==g.currentPlan&&(k=g.currentPlan,c.voiceChangesDisabled(!0)),a){case"HFC-to-BUNDLE":case"FTTP-to-BUNDLE":case"FTTN-to-BUNDLE":case"FTTB-to-BUNDLE":"UNLIMITED"===h.planSize.toUpperCase()?j="ExtraLarge":"EXTRALARGE"===h.planSize.toUpperCase()&&c.unlimitedSwitchADSL()&&(j="Unlimited");break;case"BUNDLE-to-HFC":case"BUNDLE-to-FTTP":case"BUNDLE-to-FTTN":case"BUNDLE-to-FTTB":case"HFC-to-FTTP":case"HFC-to-FTTN":case"HFC-to-FTTB":case"FTTP-to-HFC":case"FTTP-to-FTTN":case"FTTP-to-FTTB":case"FTTN-to-HFC":case"FTTN-to-FTTP":case"FTTN-to-FTTB":case"FTTB-to-HFC":case"FTTB-to-FTTP":case"FTTB-to-FTTN":"EXTRALARGE"===h.planSize.toUpperCase()&&c.unlimitedSwitchNBN()&&(j="Unlimited")}i.planSize=j,i.contractOption=d,i.speedboostOption=e,i.voicePlan=k,i.promoCode=l,i=JSON.stringify(i),c.tempProductBuilder(i),sessionStorage.setItem("tempProductBuilder",i);
}}),c.migrationType.valueHasMutated();var d=$("#sqDoneHeader");c.handleSqDone=function(){c.selectedPhoneLineOption(c.PLAN_TYPES.BUNDLE);var b=c.loadSqModelFromSession();if(b){if("MOVE"===SQ_MODAL_VARIANT&&("undefined"==typeof b.migrationData||null===b.migrationData)){var e=b.serviceSubAddressDetails+" "+b.serviceStreetNumber+" "+b.serviceStreet+" "+b.serviceStreetType+", "+b.serviceSuburb+", "+b.serviceState+" "+b.servicePostcode;c.waitingForAutoMoveSQ(!0);var f=window.setInterval(function(){a.ADDRESS_CHECK_CLICK_BOUND&&(c.waitingForAutoMoveSQ(!1),c.displaySq(c.handleSqDone),a.adobeAnalytics.global.sq.openModal(),$("#sq-street-address").focus(),$("#sq-street-address").val(e),$("#sq-street-address").keyup(),$("#"+sqConfig.searchButtonId).trigger("click"),clearInterval(f))},250)}c.waitingForAutoMoveSQ()===!1&&(c.sqDone(!0),d.velocity("scroll",{duration:500,easing:"ease-out",offset:-70,complete:function(){d.removeClass("highlighted")}}),c.mapSqModel(b),c.setCardVisibility(c.productType()),"FTTN"!==c.sqTechType()&&"FTTB"!==c.sqTechType()||"100/40"!==c.selectedSpeedBoostOption()||c.selectedSpeedBoostOption("25/5"))}c.setDisplayStickyPrice(),c.setDisplayStickySQ();var g=c.mapProductModel(),h=c.getSqAnalyticsObj();a.adobeAnalytics.pages.productBuilder.closeSq(g,h),window.location.href.indexOf("#")<0&&"Standard"===c.productBuilderVariant()&&$("#cmp-product-builder").velocity("scroll",{duration:400,easing:"ease-out",offset:-70})},c.joinClickSqCallback=function(){c.handleSqDone(),c.sqDone()&&(c.isPromoApplied()?c.promoVM.applyPromoCode(c.promocodeValidateCallback):c.sqExtendedNetwork()?$("body,html").velocity("stop").velocity("scroll",{duration:1e3,easing:"ease-out",offset:-70}):c.redirectToPage(c.PAGE_LINKS.JOIN))},c.promocodeValidateCallback=function(){c.isPromoApplied()&&c.redirectToPage(c.PAGE_LINKS.JOIN)},c.displaySq=function(b){a.sqModal.open({closeCallBack:b})},c.setDisplayStickyPrice=function(){var a=70,b=$("#lblProductBuilderMonthlyCost").offset().top,d=b+a-$(window).height()-$(window).scrollTop()<0;DD.bp.is("0, 1365")&&c.sqDone()?c.displayStickyPrice(!d):c.displayStickyPrice(!1)},c.displayStickyPrice=ko.observable(!1),c.setDisplayStickySQ=function(){var a=0,b=$("#btnProductBuilderSqCheck").offset().top,d=b+a-$(window).scrollTop()>=0;DD.bp.is("0, 1365")&&!c.sqDone()?c.displayStickySQ(!d):c.displayStickySQ(!1)},c.displayStickySQ=ko.observable(!1),$(window).off("scroll.stickySummary").on("scroll.stickySummary",function(){c.setDisplayStickyPrice(),c.setDisplayStickySQ()}),$(window).off("resize").on("resize",function(){c.setDisplayStickyPrice(),c.setDisplayStickySQ()}),c.stickyPriceScroll=function(){$("#lblProductBuilderMonthlyCost").velocity("stop").velocity("scroll",{duration:1e3,easing:"ease-out",offset:-200})},c.loadSqModelFromSession=function(){var a=sessionStorage.getItem("sqModel");if(a)return c.sqModel(JSON.parse(a)),c.sqModel()},c.mapSqModel=function(a){c.sqTechType(a.broadbandTechType),c.sqAddress(c.constructAddressString(a)),c.sqOrderType(a.orderType),c.sqExtendedNetwork(a.extendedNetwork),c.sqNDCAddress(a.ndc),c.sqDone(!0),c.promoVM.manualProductChange(!0)},c.mapProductModel=function(){var a={planType:c.selectedPlanType(),planSize:c.selectedPlanSize().planSize,planSpeed:c.selectedPlanType()===c.PLAN_TYPES.NBN&&"12/1"!==c.selectedSpeed().speed?c.selectedSpeed().speed:"",contractTerm:"MONTH_BY_MONTH"!==c.selectedContract().option?c.selectedContract().option:null,voicePlan:c.selectedVoicePlan()?c.selectedVoicePlan().plan:null,promotionId:c.isPromoApplied()?c.promoCode():"",promotionStaffId:c.isPromoApplied()?c.promoStaffId():"",isPromotionalSpeedboost:c.isPromotionalSpeedboost(),campaignCode:c.isPromoApplied()?c.campaignCode():"",calculatedMTC:c.tmc(),isNdcAddress:c.sqNDCAddress(),NDCCost:c.ndcCost()?parseFloat(c.ndcCost()):0,ndcUpfrontOption:c.selectedNdcUpfront()};return a},c.constructAddressString=function(a){var b=(a.serviceSubAddressDetails?a.serviceSubAddressDetails.trim()+" ":"")+a.serviceStreetNumber.trim()+" "+a.serviceStreet.trim()+" "+a.serviceStreetType.trim()+", "+a.serviceSuburb.trim()+" "+a.serviceState.trim()+" "+a.servicePostcode.trim();return b},c.saveTempSessionObj=function(){return sessionStorage.setItem("tempProductBuilder",JSON.stringify({planSize:c.selectedPlanSize().planSize,contractOption:c.selectedContract().option,voicePlan:c.selectedVoicePlan()?c.selectedVoicePlan().plan:null,promoCode:c.promoCode()}))},c.getSqAnalyticsObj=function(){var a="",b="";return c.sqDone()&&(a=c.sqModel().orderType,b=c.sqModel().broadbandTechType),{sqDone:c.sqDone(),sqOrderType:a,sqTechType:b}},c.redirectToPage=function(a){c.sendProductConfigToLivePerson(),window.location.href=a}}}}())}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.promoCodeVM=function(){function b(a){return c.applyClicked()&&""!==c.promoCode()&&(c.promoErrors([]),c.applyPromoCode()),a}var c=this;c.isAgent=$("#GlobalData").data("isAgent"),c.isApplying=ko.observable(!1),c.isPromoApplied=ko.observable(!1).syncWith("isPromoApplied"),c.applyClicked=ko.observable(!1),c.promoCode=ko.observable("").extend({trimAndUppercase:!0}).publishOn("promoCode"),c.promoStaffId=ko.observable("").syncWith("promoStaffId"),c.staffPromoAgreeToTC=ko.observable(!1).syncWith("staffPromoAgreeToTC"),c.appliedPromoMessage=ko.observable("").publishOn("promoMessage"),c.promoCodeInSession=ko.observable(""),c.campaignCode=ko.observable("").publishOn("campaignCode"),c.promoCredit=ko.observable({}).publishOn("promoCredit"),c.canClearPromo=ko.observable(!0).syncWith("canClearPromo"),c.promoErrors=ko.observableArray([]),c.showReapplyMessage=ko.observable(!1).syncWith("promoShowReapplyMessage"),c.isPromoValid=ko.computed(function(){return!c.promoErrors().length}),c.productType=ko.observable().subscribeTo("productType",!0),c.sqTechType=ko.observable().subscribeTo("sqTechType",!0),c.sqDone=ko.observable().subscribeTo("sqDone",b),c.selectedPlanSize=ko.observable({}).subscribeTo("selectedPlanSize",b),c.selectedContract=ko.observable({}).subscribeTo("selectedContract",b),c.selectedSpeed=ko.observable({}).subscribeTo("selectedSpeed",b),c.selectedPhoneLine=ko.observable({}).subscribeTo("selectedPhoneLine",b),c.selectedVoicePlan=ko.observable({}).subscribeTo("selectedVoicePlan",b),c.manualProductChange=function(a){b(!0)},c.applyButtonState=ko.computed(function(){return c.isApplying()?"loading":""===c.promoCode()?"disabled":""}),c.promoCode.subscribe(function(){c.clearPromoErrors()}),c.tempProductBuilder=ko.observable({}).subscribeTo("tempProductBuilder",!0),c.tempProductBuilder.subscribe(function(a){null!==a&&"undefined"!=typeof a&&(c.promoCodeInSession(JSON.parse(a).promoCode),c.promoCode(c.promoCodeInSession()),c.applyClick())}),c.init=function(){},c.applyClick=function(){c.applyClicked(!0),c.clearPromoErrors(),c.applyPromoCode()},c.applyPromoCode=function(a){if(c.showReapplyMessage(!1),c.promoCode()){c.isApplying(!0);var b=$.get("/bin/belong/join/promo/validate?code="+c.promoCode().toUpperCase());b.done(function(b){c.apiValidationPassed(b,a)}),b.fail(function(b){c.apiValidationFailed(b,a)})}},c.apiValidationPassed=function(b,d){c.isApplying(!1),c.isPromoApplied(!1),b.success?(c.processValidationResults(b.rulesAndResults),c.isPromoValid()?(!b.promotion.tacTemplate||c.promoStaffId().length>0&&c.staffPromoAgreeToTC()||c.displayStaffPromoModal(b),c.campaignCode(b.promotion.campaignType),c.isPromoApplied(!0),c.appliedPromoMessage(c.getPromoMessage(b.promotion.campaignType)),b.promotion.credit&&c.promoCredit(c.processPromoCredit(b.promotion.credit,c.promoCode())),sessionStorage.setItem("tempProductBuilder",JSON.stringify({planSize:c.selectedPlanSize().planSize,contractOption:c.selectedContract().option,voicePlan:c.selectedVoicePlan()?c.selectedVoicePlan().plan:null,promoCode:c.promoCode()})),a.adobeAnalytics.pages.productBuilder.applyPromoCodeSuccess(b)):a.adobeAnalytics.pages.productBuilder.applyPromoCodeFail(b)):(c.promoCredit({}),a.adobeAnalytics.pages.productBuilder.applyPromoCodeFail(b)),d&&d()},c.apiValidationFailed=function(b,d){c.isApplying(!1),c.isPromoApplied(!1);var e=b.responseJSON;a.adobeAnalytics.pages.productBuilder.applyPromoCodeFail(e),"timeout"===b.statusText?c.addPromoError("ERROR_TIMEOUT",c.getPromoErrorMessage("ERROR_TIMEOUT")):e&&e.errors?$.each(e.errors,function(a,b){c.addPromoError(b.code,c.getPromoErrorMessage(b.code))}):c.addPromoError("ERROR_DEFAULT",c.getPromoErrorMessage("ERROR_DEFAULT")),c.promoCredit({}),d&&d()},c.processValidationResults=function(a){$.each(a,function(a,b){switch(b.resultCode){case"VALIDATION_PASS":break;case"VALIDATION_FAIL":c.addPromoError(b.errorCode,c.getPromoErrorMessage(b.errorCode));break;case"FRONTEND_TO_VALIDATE":c.clientValidationRules[b.rule](b.expectedValues)||c.addPromoError(b.rule,c.getPromoErrorMessage(b.rule));break;case"CANNOT_VALIDATE_BEFORE_SQ":c.addPromoError("CANNOT_VALIDATE_BEFORE_SQ",c.getPromoErrorMessage("CANNOT_VALIDATE_BEFORE_SQ"))}})},c.processPromoCredit=function(a,b){return"RAPID"===b.toUpperCase()?a.creditType="FULL":"FREEMONTH"===b?a.creditType="BASE":a.creditType="FIXED","undefined"!=typeof a.creditAmount&&(a.creditAmount=parseInt(a.creditAmount)),a.creditOccurrence=parseInt(a.creditOccurrence),a},c.clearPromoCode=function(){c.promoCode(""),c.campaignCode(""),c.resetPromoCode()},c.resetPromoCode=function(){c.promoStaffId(""),c.isPromoApplied(!1),c.appliedPromoMessage(""),c.promoErrors([]),c.staffPromoAgreeToTC(!1),c.promoCredit({})},c.clearPromoErrors=function(){c.promoErrors([]),c.showReapplyMessage(!1)},c.getPromoMessage=function(b){return a.util.getCMSMessage(b,CMS_PROMOCODE.appliedPromoMessages)},c.getPromoErrorMessage=function(b){return a.util.getCMSMessage(b,CMS_PROMOCODE.promoValidation)},c.addPromoError=function(a,b){var d={code:a,message:b},e=ko.utils.arrayFirst(c.promoErrors(),function(a){return d.code===a.code});e?c.promoErrors.replace(e,d):c.promoErrors.push(d)},c.clientValidationRules={PLAN_TYPE:function(a){return a.indexOf(c.productType())>=0},BROADBAND_TECH_TYPE:function(a){return a.indexOf(c.sqTechType())>=0},VOICE_OPTION:function(a){return a.indexOf("ANY_VOICE")>=0?!(!c.selectedVoicePlan()||!c.selectedVoicePlan().plan):c.selectedVoicePlan()&&c.selectedVoicePlan().plan?a.indexOf(c.selectedVoicePlan().plan)>=0:void 0},SPEEDBOOST_OPTION:function(a){if(!c.selectedSpeed())return!1;var b=c.selectedSpeed().speed,d=!1;return $.each(a,function(a,c){switch(c){case"SPEEDBOOST_25_5":d=d||"25/5"===b;break;case"SPEEDBOOST_100_40":d=d||"100/40"===b;break;case"ANY_SPEEDBOOST":d=d||"25/5"===b||"100/40"===b}}),d},CONTRACT_OPTION:function(a){var b=c.selectedContract().option,d=!1;return $.each(a,function(a,c){switch(c){case"CONTRACT":d=d||"MONTH_BY_MONTH"!==b;break;case"NON_CONTRACT":d=d||"MONTH_BY_MONTH"===b}}),d},USER_TYPE:function(a){var b=c.isAgent?"AGENT":"USER";return a.indexOf(b)>=0},PRE_PROVISION_OPTION:function(a){return!0},ADDRESS_WHITELIST:function(a){return!0},START_END_DATE:function(a){return!0},IAF:function(a){return!0}},c.displayStaffPromoModal=function(b){var d=new a.productBuilder.staffPromoModalVM(c.resetPromoCode);$.magnificPopup.open({items:{src:"#product-staff-promo-tc",type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,overflowY:"auto",callbacks:{open:function(){ko.applyBindings(d,document.getElementById("product-staff-promo-tc")),d.onOpen(b),a.forms.applyShiftLabel()},beforeClose:function(){d.beforeClose()},close:function(){ko.cleanNode(document.getElementById("product-staff-promo-tc"))}}})}}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.speedboostCardVM=function(){function b(a,b){var c=a.cardSort,d=b.cardSort;return c<d?-1:c>d?1:0}var c=this,d={TWELVEOVERONE:"12/1",TWENTYFIVEOVERFIVE:"25/5",HUNDREDOVERFORTY:"100/40"};c.sqTechType=ko.observable().subscribeTo("sqTechType",!0),c.selectedSpeedBoostOptionCard=ko.observable(d.TWELVEOVERONE).syncWith("selectedSpeedBoostOptionCard"),c.selectedSpeedBoostOptionModal=ko.observable().syncWith("selectedSpeedBoostOptionModal",!0),c.speedboostOptions=ko.computed(function(){var a=[],e=PRODUCT_BUILDER_SPEED_BOOSTS.sort(b);return $.each(e,function(b,e){e.speed===d.HUNDREDOVERFORTY&&"FTTB"!==c.sqTechType()&&"FTTN"!==c.sqTechType()?a.push(e):e.speed!==d.HUNDREDOVERFORTY&&a.push(e)}),a}),c.selectedSpeedObject=ko.computed(function(){var a;for(a=0;a<PRODUCT_BUILDER_SPEED_BOOSTS.length;++a)if(PRODUCT_BUILDER_SPEED_BOOSTS[a].speed===c.selectedSpeedBoostOptionCard())return PRODUCT_BUILDER_SPEED_BOOSTS[a];return null}).publishOn("selectedSpeed"),c.priceUpdate=ko.computed(function(){return c.selectedSpeedObject()?c.selectedSpeedObject().cost||0:0}),c.allowTwelveOverOne=ko.observable(!1),c.selected=ko.observable(!1),c.openModal=function(){a.adobeAnalytics.pages.productBuilder.speedboostModalOpen(),c.selectedSpeedBoostOptionModal(c.selectedSpeedBoostOptionCard()),a.productBuilder.speedboostModal()},c.isPromotionalSpeedboost=ko.computed(function(){return c.selectedSpeedObject().promoOn===!0}).publishOn("isPromotionalSpeedboost"),c.selectedSpeedBoostOptionCard.subscribe(function(b){a.adobeAnalytics.pages.productBuilder.speedboostSelection(b)}),c.tempProductBuilder=ko.observable({}).subscribeTo("tempProductBuilder",!0),c.tempProductBuilder.subscribe(function(a){if(null!==a&&"undefined"!=typeof a){var b=JSON.parse(a).speedboostOption;"undefined"!=typeof b&&null!==b&&c.selectedSpeedBoostOptionCard(b)}})}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.speedBoostModalVM=function(){function b(a,b){var c=a.modalSort,d=b.modalSort;return c<d?-1:c>d?1:0}var c=this;c.STATES={SELECT:"SELECT",EDIT:"EDIT"};var d={TWELVEOVERONE:"12/1",TWENTYFIVEOVERFIVE:"25/5",HUNDREDOVERFORTY:"100/40"};c.currentCardState=ko.observable(c.STATES.SELECT).publishOn("speedBoostCardState"),c.sqTechType=ko.observable().subscribeTo("sqTechType",!0),c.speedboostOptions=ko.computed(function(){var a=[],e=PRODUCT_BUILDER_SPEED_BOOSTS.sort(b);return $.each(e,function(b,e){e.speed!==d.TWELVEOVERONE&&(e.speed===d.HUNDREDOVERFORTY&&"FTTB"!==c.sqTechType()&&"FTTN"!==c.sqTechType()?a.push(e):e.speed===d.TWENTYFIVEOVERFIVE&&a.push(e))}),a}),c.selectedSpeedBoostOptionCard=ko.observable().syncWith("selectedSpeedBoostOptionCard",!0),c.selectedSpeedBoostOptionModal=ko.observable("").syncWith("selectedSpeedBoostOptionModal",!0),c.buttonState=ko.computed(function(){return""===c.selectedSpeedBoostOptionModal()||"12/1"===c.selectedSpeedBoostOptionModal()?"disabled":""}),c.modalCancel=function(){a.adobeAnalytics.pages.productBuilder.speedboostModalClose(),$.magnificPopup.close()},c.updateSelection=function(){a.adobeAnalytics.pages.productBuilder.speedboostModalClose(),"disabled"!=c.buttonState()&&(c.currentCardState(c.STATES.EDIT),c.selectedSpeedBoostOptionCard(c.selectedSpeedBoostOptionModal()),$.magnificPopup.close())},c.selectedSpeedBoostOptionModal.subscribe(function(b){a.adobeAnalytics.pages.productBuilder.speedboostModalSelection(b)})}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.staffPromoModalVM=function(b){var c=this;c.cancelCallback=b,c.tcIsLoading=ko.observable(!0),c.tcContent=ko.observable(""),c.staffId=ko.observable("").syncWith("promoStaffId",!0),c.agreeToTC=ko.observable(!1).syncWith("staffPromoAgreeToTC",!0),c.cancelling=!0,c.validator=null,c.validationRules={rules:{"staff-id":{required:!0},"chk-staff-promo-tc":{required:!0}}},c.continueClick=function(){a.validation.validateForm(c.validator)&&(c.cancelling=!1,a.adobeAnalytics.pages.productBuilder.applyStaffPromoDetails(),$.magnificPopup.close())},c.cancel=function(){a.adobeAnalytics.pages.productBuilder.cancelStaffPromoDetails(),$.magnificPopup.close()},c.populateStaffPromoTandC=function(b){$.ajax("/apps/belong/promotion/termsAndConditions."+b+".html",{dataType:"text"}).then(function(b){c.tcContent(b),c.tcIsLoading(!1),a.belongModal.setupAutoResize({modalContainer:$("#product-staff-promo-tc"),nameSpace:"modalAutoResizeStaffPromo"})})},c.onOpen=function(b){c.populateStaffPromoTandC(b.promotion.tacTemplate),c.validator=a.validation.setupFormValidation("product-staff-promo-tc-fields",$(".product-staff-promo-tc-fields"),c.validationRules),c.cancelling=!0,a.belongModal.setupAutoResize({modalContainer:$("#product-staff-promo-tc"),nameSpace:"modalAutoResizeStaffPromo"})},c.beforeClose=function(){c.cancelling&&(c.staffId(""),c.agreeToTC(!1),a.validation.resetForm(c.validator),c.cancelCallback())}}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.voiceCardVM=function(){function b(){var b=c.getVoicePlanForSelection(c.nationalCheckedModal(),c.internationalCheckedModal());a.adobeAnalytics.pages.productBuilder.voiceModalSelection(b)}var c=this;c.STATES={SELECT:"SELECT",EDIT:"EDIT"},c.productBuilderVariant=ko.observable().subscribeTo("productBuilderVariant",!0),c.voiceChangesDisabled=ko.observable().syncWith("voiceChangesDisabled",!0),c.currentState=ko.observable(c.STATES.SELECT).subscribeTo("voiceCardState"),c.nationalCheckedCard=ko.observable(!1).syncWith("nationalCheckedCard",!0),c.internationalCheckedCard=ko.observable(!1).syncWith("internationalCheckedCard",!0),c.nationalCheckedModal=ko.observable().syncWith("nationalCheckedModal",!0),c.internationalCheckedModal=ko.observable().syncWith("internationalCheckedModal",!0),c.getVoicePlanForSelection=function(a,b){return a&&b?"BOTH":c.nationalCheckedCard()?"NATIONAL":c.internationalCheckedCard()?"INTERNATIONAL":""},c.selectedVoicePlan=ko.computed(function(){for(var a=0;a<PRODUCT_BUILDER_VOICE_PLANS.length;a++)if(PRODUCT_BUILDER_VOICE_PLANS[a].plan===c.getVoicePlanForSelection(c.nationalCheckedCard(),c.internationalCheckedCard()))return PRODUCT_BUILDER_VOICE_PLANS[a];return null}).publishOn("selectedVoicePlan"),c.priceUpdate=ko.computed(function(){return c.selectedVoicePlan()?c.selectedVoicePlan().cost:0}),c.displayModal=function(){a.adobeAnalytics.pages.productBuilder.voiceModalOpen(),c.nationalCheckedModal(c.nationalCheckedCard()),c.internationalCheckedModal(c.internationalCheckedCard()),a.productBuilder.voiceModal()},c.selectedVoicePlan.subscribe(function(b){a.adobeAnalytics.pages.productBuilder.voiceSelection(b)}),c.nationalCheckedModal.subscribe(b),c.internationalCheckedModal.subscribe(b),c.tempProductBuilder=ko.observable({}).subscribeTo("tempProductBuilder",!0),c.tempProductBuilder.subscribe(function(a){if(null!==a&&"undefined"!=typeof a){var b=JSON.parse(a).voicePlan;if(!b)return;c.currentState("EDIT"),"BOTH"===b?(c.nationalCheckedCard(!0),c.internationalCheckedCard(!0)):"NATIONAL"===b?(c.nationalCheckedCard(!0),c.internationalCheckedCard(!1)):"INTERNATIONAL"===b&&(c.nationalCheckedCard(!1),c.internationalCheckedCard(!0))}}),"redirected"===a.util.loadPageVar("sq_redirect")&&c.tempProductBuilder.valueHasMutated()}}(BELONG),function(a){"use strict";a.productBuilder=a.productBuilder||{},a.productBuilder.voiceModalVM=function(){var b=this;b.STATES={SELECT:"SELECT",EDIT:"EDIT"},b.voiceChangesDisabled=ko.observable().syncWith("voiceChangesDisabled",!0),b.currentCardState=ko.observable().publishOn("voiceCardState",!0),b.nationalCheckedCard=ko.observable().syncWith("nationalCheckedCard",!0),b.internationalCheckedCard=ko.observable().syncWith("internationalCheckedCard",!0),b.nationalCheckedModal=ko.observable(!1).syncWith("nationalCheckedModal",!0),b.internationalCheckedModal=ko.observable(!1).syncWith("internationalCheckedModal",!0),b.modalCancel=function(){a.adobeAnalytics.pages.productBuilder.voiceModalClose(),$.magnificPopup.close()},b.buttonState=ko.computed(function(){return b.nationalCheckedCard()||b.internationalCheckedCard()?"":b.nationalCheckedModal()||b.internationalCheckedModal()?"":"disabled"}),b.updateSelection=function(){a.adobeAnalytics.pages.productBuilder.voiceModalClose(),"disabled"!==b.buttonState()&&(b.currentCardState(b.STATES.EDIT),b.nationalCheckedCard(b.nationalCheckedModal()),b.internationalCheckedCard(b.internationalCheckedModal()),$.magnificPopup.close())}}}(BELONG),function(a){"use strict";a.product=function(){var b,c=window.location.pathname,d=c.split("/")[1],e=d.split(".")[0];return{init:function(){b=this,$(".main.product-page").each(function(){$(".join-cta .ctab").off("click.productJoinNow").on("click.productJoinNow",b.events.productJoinNow)}),$("#contract-switch").is(":checked")?b.set.planSwitchOn():$("#contract-switch").not(":checked")&&b.set.planSwitchOff(),"nbn"!==e&&$(".bc-lime .product-allowance").removeClass("offer"),"nbnrapid"===e&&($(".contract").addClass("hidden"),$(".non-contract").removeClass("hidden"),$(".bc-dark-green .contract").addClass("hidden"),$(".bc-dark-green .non-contract").removeClass("hidden"),$(".details .contract").removeClass("hidden"),$(".details .non-contract").addClass("hidden"))},setPlanTypeAndSize:function(b){switch(a.sqUtil.get.sourceType()){case"ADSL":a.join.model.product.planType="BUNDLE";break;case"NBN":a.join.model.product.planType="NBN"}"undefined"!=typeof b.data("productSize")&&(a.join.model.product.planSize=b.data("productSize")),sessionStorage.setItem("productModel",JSON.stringify(a.join.model.product))},events:{productJoinNow:function(c){var d,e="";if(c.preventDefault(),d=sessionStorage.getItem("sqDone")||"false",e=sessionStorage.getItem("resultCode")||"",b.setPlanTypeAndSize($(this)),"false"===d)$(".sq-container").velocity("stop").velocity("scroll",{duration:400,complete:function(){$("#sq-street-address").focus()}});else{var f="/join";"Join"===$(this).text()&&(a.adobeAnalytics.global.sq.findOutMoreOrJoinNow(a.sqUtil.get.sourceType(),"Product-List-Join",e,"standard"),a.analytics.methods.sq.findOutMoreOrJoinNow(f,a.sqUtil.get.sourceType(),"Product-List-Join",e))}}},set:{planSwitchOn:function(){$(".bc-lime .product-allowance").removeClass("offer"),$(".contract").addClass("hidden"),$(".non-contract").removeClass("hidden"),$(".product-options").find("li").first().removeClass("selected"),$(".product-options").find("li").last().addClass("selected");var b="Month-by-month",c="Product-List-Options",d="Toggle",e=!0;a.analytics.methods.linkClickWithNonPageReload(d,c,b,e)},planSwitchOff:function(){"nbn"===e&&$(".bc-lime .product-allowance").addClass("offer"),$(".contract").removeClass("hidden"),$(".non-contract").addClass("hidden"),$(".product-options").find("li").first().addClass("selected"),$(".product-options").find("li").last().removeClass("selected");var b="Contract",c="Product-List-Options",d="Toggle",f=!0;a.analytics.methods.linkClickWithNonPageReload(d,c,b,f)}}}}()}(BELONG),function(a){"use strict";a.promoCodeModal=function(){var a;return{open:function(b,c){a=this,c=c||{},c.ctaPreset=c.ctaPreset||"",c.ctaCallback=c.ctaCallback||function(){},"open-sq-modal"==c.ctaPreset&&(c.ctaCallback=function(){setTimeout(function(){BELONG.sqModal.open()},500)}),$.magnificPopup.open({items:{src:"#"+b,type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,overflowY:"auto",callbacks:{open:function(){BELONG.belongModal.setupAutoResize({modalContainer:$("#"+b),nameSpace:"modalAutoResizePromo"+b});var a=".belong-modal__body";BELONG.modalAnalytics.activate(b,a)},close:function(){BELONG.modalAnalytics.close()}}}),$("#"+b+" .belong-modal__continue-link").off("click.close"+b).on("click.close"+b,function(a){a.preventDefault(),BELONG.modalAnalytics.ctaClicked(),$.magnificPopup.close(),c.ctaCallback()})}}}()}(BELONG),function(a){"use strict";a.sqInjector=a.sqInjector||{},$.extend(a.sqInjector,function(){var b,c,d,e=$("#sq-injector"),f=$("#sq-injector-input"),g=200,h=$("#sq-injector-search"),i="#sq-injector__autocomplete-container",j=2,k=$("#sq-street-address");return{init:function(){return b=this,0!==$("#sq-injector").length&&("undefined"!=typeof SQ_INJECTOR&&(c=SQ_INJECTOR),d=new b.ViewModel,ko.applyBindings(d,document.getElementById("sq-injector")),DD.bp.is("0","m")?f.attr("placeholder",c.placeholderMobile):f.attr("placeholder",c.placeholderDesktop),$(".sq-injector__autocomplete, .btn__clear").removeClass("hidden"),void d.bindUiEvents())},ViewModel:function(){var b=this;b.address=ko.observable(""),b.experianAddress=ko.observable(""),b.addressMoniker=ko.observable(""),b.submitting=ko.observable(!1),b.showDropdown=ko.observable(!1),b.buttonState=ko.computed(function(){return b.submitting()?"loading":""}),b.addressIsEmpty=ko.computed(function(){return""===b.address()}),b.address.subscribe(function(){return!b.address()||b.address()<3?(b.showDropdown(!1),!1):void(f.autocomplete({closeOnSelect:!1,updateElement:!0,delay:g,autoFocus:!1,appendTo:i,source:function(a,c){var d=$.trim(a.term);d.length>0?$.ajax({url:"/apps/telstraEveServlet",type:"POST",dataType:"json",data:{requestType:"qasAddressPicklist",searchTerm:d},error:function(a){},success:function(a){void 0!==a&&a.addressList?(b.showDropdown(!0),c($.map(a.addressList,function(a){return{label:a.partialAddress,value:a.moniker,id:a.layout,useEntered:a.useEntered}}))):(c({label:"",value:""}),b.showDropdown(!1))}}):(c({label:"",value:""}),b.showDropdown(!1))},open:function(){var a;navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)&&$(".ui-autocomplete").off("menufocus hover mouseover"),f.attr("data-address",""),$("#sq-form ul.ui-autocomplete li").length>8&&($(".sq-form__address-entry .ctrl-holder .sq-check-address-structured-link").length||(a=$(".sq-check-address-structured-link").clone(!0,!0),a.appendTo($(".sq-form__address-entry .ctrl-holder")).removeClass("hidden")))},select:function(a,c){return b.addressMoniker(c.item.value),$(this).data("moniker",b.addressMoniker()),b.experianAddress(c.item.label.trim().replace(/(<([^>]+)>)/gi,"").replace(/\s{2,}/g," ")),f.attr("data-address",b.experianAddress()),b.address(b.experianAddress()),$("#"+e.attr("id")+" .ui-autocomplete li").removeClass("active"),$("#"+e.attr("id")+" .ui-autocomplete .ui-state-focus").parent("li").addClass("active"),h.is(":visible")&&h.focus(),a.preventDefault(),b.injectToSq(),!1},focus:function(a){var b=$($("ul.ui-autocomplete").find(".ui-state-focus"));return 40!==a.keyCode&&38!==a.keyCode||($(b).focus(),e.scrollTop(b.offset().top-e.offset().top+e.scrollTop()-200)),!1},search:function(){var a=".*\\d+\\D?(,|/|-|\\s)*",b=this.value.replace(new RegExp(a,""),"");return null!==this.value.match(a)&&this.value.match(a)[0]===this.value?(f.autocomplete("close"),!1):!(b.length<parseInt(j,10))&&void 0}}).data("ui-autocomplete")._renderItem=function(a,b){var c=b.label.replace(/(<([^>]+)>)/gi,"").replace(/\s{2,}/g," ").replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");return c.length>0?($("#"+e.attr("id")+" ul.ui-autocomplete li").length>1&&($(".error-select").removeClass("hidden"),$(this).removeClass("error"),$("label.error").hide()),$("<li></li>").data("item.autocomplete",b).append($("<a></a>").html(c).html(c)).appendTo(a)):$("<li></li>").data("item.autocomplete",b)})}),b.injectToSq=function(){var c=!1;b.experianAddress()&&b.addressMoniker()&&(c=!0),b.submitting(!0),b.showDropdown(!1),c&&b.address(b.experianAddress()),a.sqExecute.init(),a.sqModal.open(),a.adobeAnalytics.global.sq.openModal(),b.setSqModalValues(),k.focus(),k.keyup(),$("#"+sqConfig.searchButtonId).trigger("click"),b.submitting(!1)},b.setSqModalValues=function(){k.val(b.address()),k.attr("data-address",b.address()),k.data("moniker",b.addressMoniker())},b.clear=function(){b.address(""),b.experianAddress(""),b.addressMoniker(""),b.setSqModalValues()},b.bindUiEvents=function(){var a=function(a){var c=$(".ui-autocomplete li").length>0;a.stopPropagation(),!b.addressIsEmpty()&&c&&b.showDropdown(!0)};$(document).bind("click",function(){b.showDropdown(!1)}),f.keypress(function(a){13===a.which&&(a.preventDefault(),d.injectToSq())}),f.bind("click focus",function(b){a(b)}),$(i).bind("click",function(b){a(b)}),e.keyup(function(a){27===a.which&&b.showDropdown(!1)})}}}}())}(BELONG),function(a){"use strict";a.sqLauncher=function(){var b;return{init:function(){return b=this,0!==$("#mdl-sq").length&&void $("#sq-launcher-btn, #nav-join, #mobile-nav-join").off("click.sqLauncherBtn").on("click.sqLauncherBtn",b.events.openSq)},events:{openSq:function(b){b.preventDefault();var c=null!==sessionStorage.getItem("product")?sessionStorage.getItem("product"):"";"adsl"===c?window.location.replace("/adsl"):"nbn"===c?window.location.replace("/nbn"):(a.sqModal.open(),a.adobeAnalytics.global.sq.openModal())}}}}()}(BELONG),function(a){"use strict";a.sqModal=a.sqModal||{},a.sqModal.eoiFormVM=function(){var b=this;b.state=ko.observable("NONE"),b.contactFields={name:ko.observable(""),streetAddress:ko.observable("").subscribeTo("sqModalSelectedAddress"),mobile:ko.observable(""),email:ko.observable("")},b.fullFields={name:ko.observable(""),streetAddress:ko.observable("").subscribeTo("sqModalSelectedAddress"),mobile:ko.observable(""),email:ko.observable(""),landline:ko.observable(""),preferredContactMethod:ko.observable(""),preferredContactTime:ko.observable("")},b.showContactTime=ko.computed(function(){switch(b.fullFields.preferredContactMethod()){case"MOBILE":case"LANDLINE":return!0;default:return!1}}),b.eoiMessage=ko.observable("NONE"),b.eoiSuccessMessage=ko.observable("NONE"),b.eoiBtnState=ko.observable("active"),b.createEOI=function(){if(!a.validation.validateForm(a.eoiValidator))return!1;var c,d=b.getEoiRequestObject(b.state().toLowerCase()),e=b.eoiMessage();b.eoiBtnState("loading"),c=$.post("/apps/telstraEveServlet",d),c.done(function(c){var f=c.success?"success":"fail";b.eoiMessage("NONE"),b.eoiSuccessMessage("NONE");var g=d.sourceType,h=d.freeTextAddress,i=d.eoiReason;a.adobeAnalytics.global.eoi.eoiSubmission(g,e,i,h),a.sqModal.sqRules.eoiResult[b.state().toLowerCase()][f]()}),c.fail(function(a,b,c){}),c.always(function(){b.eoiBtnState("active")})},b.setupContactForm=function(){b.state("CONTACT"),b.eoiMessage("contact-form")},b.resetSQ=function(){b.state("NONE"),a.sqFormVM.resetForm()},b.state.subscribe(function(c){switch(c){case"FULL":b.fullFields.streetAddress($("#sq-street-address").val()),a.forms.applyShiftLabelHandler("#eoi-form-full-address");break;case"CONTACT":b.contactFields.streetAddress($("#sq-street-address").val()),a.forms.applyShiftLabelHandler("#eoi-form-contact-address");break;case"NONE":b.eoiMessage("NONE"),b.eoiSuccessMessage("NONE")}setTimeout(function(){a.belongModal.setHeights({modalContainer:$("#mdl-sq"),noShadow:!0})},100)}),b.eoiValidation=function(){a.eoiValidator=a.validation.setupFormValidation("eoi-form",$("#eoi-form"),{rules:{"eoi-form-contact-name":{required:!0,maxlength:255,disallowedCharacters:!0},"eoi-form-contact-email":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255},"eoi-form-contact-mobile":{required:!0,australianMobileNumber:!0,disallowedCharacters:!0},"eoi-form-full-name":{required:!0,disallowedCharacters:!0},"eoi-form-full-address":{required:!0,disallowedCharacters:!0},"eoi-form-full-landline":{required:function(){return"LANDLINE"===$("#eoi-form-full-contact-method").val()},australianPhoneNumber:!0},"eoi-form-full-mobile":{required:function(){return"MOBILE"===$("#eoi-form-full-contact-method").val()},australianMobileNumber:!0,disallowedCharacters:!0},"eoi-form-full-email":{required:function(){return"EMAIL"===$("#eoi-form-full-contact-method").val()},disallowedCharacters:!0},"eoi-form-full-contact-method":{required:function(){return""===$("#eoi-form-full-contact-method").val()}},"eoi-form-full-contact-time":{required:function(){return b.showContactTime()}}}}),a.eoiValidator.resetForm()},b.eoiValidation(),b.getEoiRequestObject=function(c){switch(c){case"contact":return{name:b.contactFields.name(),contactEmail:b.contactFields.email(),contactMobile:a.validation.helpers.cleanAustralianPhoneNumber(b.contactFields.mobile()),contactLandline:"",contactMethod:"EMAIL",contactTime:"",freeTextAddress:b.contactFields.streetAddress(),eoiReason:"ADDRESS_HELP_REQUIRED",sourceType:a.sqRequest.get.pageSource(),requestType:"createEOI"};default:return{name:b.fullFields.name(),contactEmail:b.fullFields.email(),contactMobile:a.validation.helpers.cleanAustralianPhoneNumber(b.fullFields.mobile()),
contactLandline:a.validation.helpers.cleanAustralianPhoneNumber(b.fullFields.landline()),contactMethod:b.fullFields.preferredContactMethod(),contactTime:b.fullFields.preferredContactTime(),freeTextAddress:b.fullFields.streetAddress(),eoiReason:"ADDR_NOT_IN_WHITELIST",sourceType:a.sqRequest.get.pageSource(),requestType:"createEOI"}}}}}(BELONG),function(a){"use strict";a.sqModal=a.sqModal||{},a.sqModal.LATEST_SQ_SUCCESS={},a.sqModal.ADDRESS_CHECK_SUPPRESSED=!1,a.sqModal.sqFormVM=function(){var b=this;b.state=ko.observable("ADDRESS_ENTRY"),b.redirected=ko.observable("redirected"===a.util.loadPageVar("sq_redirect")),b.entryMessage=ko.observable("NONE"),b.successMessage=ko.observable("NONE"),b.redirectMessage=ko.observable("NONE"),b.errorMessage=ko.observable("NONE"),b.isSingleAddress=ko.observable(!1),b.landlineSuccessMessage=ko.observable("NONE"),b.saleType=ko.observable(SQ_MODAL_VARIANT),b.extendedNetwork=ko.observable(),b.ndc=ko.observable(),b.serviceClass=ko.observable("").publishOn("serviceClass"),b.selectedAddress=ko.observable("").syncWith("sqModalSelectedAddress"),b.hasRunStructuredAddress=ko.observable(!1),b.currentAddress=ko.observable("").publishOn("currentAddress"),b.migrationCopy=ko.observable(),b.hardwareRequired=ko.observable().publishOn("hardwareRequired"),b.migrationType=ko.observable("").publishOn("migrationType"),b.migrationData=ko.observable().publishOn("migrationData"),b.migrationData.subscribe(function(c){if("undefined"!=typeof c&&null!==c&&c!==!1){var d,e,f=c.currentService,g=(f.subAddressType?f.subAddressType+" ":"")+(f.subAddressNumber?f.subAddressNumber+" ":"")+(f.streetNumber?f.streetNumber+" ":"")+f.streetName+" "+f.streetType+", "+f.suburb+" "+f.state+" "+f.postcode,h=f.plan.broadbandTechType,i=a.join.model.sq.broadbandTechType,j=moment("24 April 2015"),k=c.hardware.length>0;e=moment(c.currentService.dateAdded,"DD-MM-YYYY").isAfter(j)?"after":"before",h&&h.toLowerCase().indexOf("adsl")>-1&&(h="BUNDLE"),i&&i.toLowerCase().indexOf("adsl")>-1&&(i="BUNDLE"),d=h+"-to-"+i,"FTTN"===i||"FTTB"===i?"FTTP"!==h&&"HFC"!==h||"after"!==e?"before"===e?b.migrationCopy(MIGRATION_COPY["special-before-cutoff"]):b.migrationCopy(MIGRATION_COPY[d]):b.migrationCopy(MIGRATION_COPY["special-after-cutoff"]):b.migrationCopy(MIGRATION_COPY[d]),b.currentAddress(g),b.migrationType(d),b.hardwareRequired(k)}}),b.checkAddressButton={show:ko.observable(!0),text:ko.observable("Check Address")},b.setupContactForm=function(){b.state("EOI_ENTRY"),a.eoiFormVM.setupContactForm()},b.setupStructuredAddressForm=function(){b.state("STRUCTURED_ADDRESS"),a.structuredAddressVM.setupStructuredAddressForm(),a.adobeAnalytics.global.sq.structuredCantFindAddress(),b.hasRunStructuredAddress(!0)},b.callPBHandleSqDone=ko.observable(!1).publishOn("callPBHandleSqDone"),b.hideAllMessages=function(){b.entryMessage("NONE"),b.successMessage("NONE"),b.landlineSuccessMessage("NONE"),b.errorMessage("NONE")},b.displaySuccess=function(a){b.state("ADDRESS_FOUND"),b.redirected(!1),b.successMessage(a)},b.resetForm=function(){b.state("ADDRESS_ENTRY"),b.hideAllMessages(),a.CLEARSQONSUBMIT=!0,a.LANDLINECHECK=!1,a.REFINEDADDRESS=!1,b.hasRunStructuredAddress(!1),$("#sq-street-address").val("").blur(),a.forms.unShiftLabelHandler("sq-street-address"),$("label.error").hide()},b.redirectUser=function(c){c=c||{delay:500},c.delay=c.delay||500,b.redirectMessage(c.product),b.state("REDIRECTING"),setTimeout(function(){a.belongModal.setHeights({modalContainer:$("#mdl-sq"),noShadow:!0})},10),setTimeout(function(){window.location.replace(c.pageUrl)},c.delay)},b.continueAndClose=function(){$.magnificPopup.proto.close.call(this)},b.landlineNumberRequired=ko.observable(""),b.landlineNumberRequired.subscribe(function(c){if(b.checkAddressButton.show(""!==c),b.checkAddressButton.show(!0)&&(b.showHideSQFooter(!0),a.sqFormVM.entryMessage("NONE")),setTimeout(function(){a.belongModal.setHeights({modalContainer:$("#mdl-sq"),noShadow:!0})},100),"YES"==c){var d=$("#sqContainer");d.animate({scrollTop:d[0].scrollHeight},3e3)}}),b.scrollSqModalToLocation=function(a){var b=$(a).offset().top;$("#mdl-sq .belong-modal__body").animate({scrollTop:b},500)},b.showHideSQFooter=function(a){var a=!!a;a?$(".sq-modal__footer").is(":visible")||($(".sqContainer").css("height",$("#mdl-sq").innerHeight()-$(".sq-modal__footer").innerHeight()-$(".sq-modal__header").innerHeight())-50,$(".sq-modal__footer").show(),$(".sq-modal__body").addClass("sq-modal__body--withSticky")):($(".sq-modal__footer").hide(),$(".sqContainer").css("height",$(".sq-modal__body").height()),$(".sq-modal__body").removeClass("sq-modal__body--withSticky"))},b.state.subscribe(function(c){switch(a.infiniteCycle.destroy($(".sq-form__loading-messages")),c){case"ADDRESS_ENTRY":b.checkAddressButton.show(!0),b.selectedAddress(""),b.checkAddressButton.text("Check Address"),"HAVING_TROUBLE"===b.entryMessage()==!1&&b.showHideSQFooter(!1);break;case"ADDRESS_SELECT":$("body").on("click",".street-address-select ul li a",a.sqRequest.changeAddressSelect),b.entryMessage("MORE_ADDRESSES"),b.checkAddressButton.show(!0),b.checkAddressButton.text("Continue"),b.showHideSQFooter(!1),b.hasRunStructuredAddress()&&a.adobeAnalytics.global.sq.structuredFoundListOfRefinedAddresses(a.structuredAddressVM.structuredAddress.type());break;case"ADDRESS_FOUND":""===a.join.model.sq.serviceAddressId&&a.sqRequest.get.fromSession(),b.selectedAddress(a.join.model.helpers.getAddressString()),b.checkAddressButton.show(!1),b.showHideSQFooter(!1),b.hasRunStructuredAddress()&&a.adobeAnalytics.global.sq.structuredFoundMatch(a.structuredAddressVM.structuredAddress.type());break;case"LANDLINE_CHECK":a.LANDLINECHECK=!0,b.checkAddressButton.show(""!==b.landlineNumberRequired()),b.selectedAddress(a.join.model.helpers.getAddressString()),b.checkAddressButton.text("Continue"),b.showHideSQFooter(!1);break;case"LOADING":a.infiniteCycle.create($(".sq-form__loading-messages")),b.hideAllMessages(),b.checkAddressButton.show(!1),b.showHideSQFooter(!1);break;case"EOI_ENTRY":b.checkAddressButton.show(!1);break;case"STRUCTURED_ADDRESS":b.checkAddressButton.show(!1)}"EOI_ENTRY"!==c&&a.eoiFormVM.state("NONE"),"STRUCTURED_ADDRESS"!==c&&a.structuredAddressVM.state("NONE"),setTimeout(function(){a.belongModal.setHeights({modalContainer:$("#mdl-sq"),noShadow:!0})},100)}),b.serviceQualify=function(){var c,d,e,f="",g=function(b){b.success===!0?(BELONG.sqModal.LATEST_SQ_SUCCESS=b,a.sqRequest.processResult(b,"success")):a.sqRequest.processResult(b,"fail")},h=function(b){a.sqRequest.processResult(b.responseJSON,"fail")};c=sessionStorage.getItem("tempProductBuilder"),null!==c&&(c=JSON.parse(c)),null!==c&&"undefined"!=typeof c.returnPreProvisioned&&null!==c.returnPreProvisioned&&(f=c.returnPreProvisioned===!0?"rapid":""),b.setSaleType(),d={phoneNumber:a.join.model.sq.phoneNumber,serviceAddressId:a.join.model.sq.serviceAddressId,serviceExchange:a.join.model.sq.serviceExchange,serviceStreetNumber:a.join.model.sq.serviceStreetNumber,serviceStreet:a.join.model.sq.serviceStreet,serviceStreetType:a.join.model.sq.serviceStreetType,serviceSuburb:a.join.model.sq.serviceSuburb,serviceState:a.join.model.sq.serviceState,servicePostcode:a.join.model.sq.servicePostcode,serviceSubAddressDetails:a.join.model.sq.serviceSubAddressDetails,sqSource:f,saleType:b.saleType(),gnafpId:a.join.model.sq.gnafpId,gnafpIdMatches:a.join.model.sq.numberOfAddressesFromVerifyAddress},e=$.post("/bin/belong/sq/adsl",d);var i=a.join.model.sq.broadbandTechType;if("undefined"!=typeof i&&null!==i&&""!==i)switch(i){case"ADSL1":case"ADSL2":e.done(g),e.fail(h);break;case"FTTN":case"FTTB":a.sqRequest.processResult(BELONG.sqModal.LATEST_SQ_SUCCESS,"success")}else e.done(g),e.fail(h)},b.setSaleType=function(){b.saleType()||(SQ_MODAL_VARIANT="INBOUND_SALE",b.saleType(SQ_MODAL_VARIANT))},b.isSaleSq=function(){return"INBOUND_SALE"===b.saleType()};var c=$("#sq-street-address"),d=$("#sq-check-address-structured");c.on("keyup",function(){setTimeout(function(){""!==c.val()&&d.removeClass("hidden")},1500)}),c.on("blur",function(){""===c.val()&&d.addClass("hidden")})}}(BELONG),function(a){"use strict";a.sqModal=a.sqModal||{},a.sqModal.sqRules=function(){return{addressResult:{multiple:function(){a.sqFormVM.state("ADDRESS_SELECT")},single:function(){a.livePerson.sq.startSQ(),a.sqFormVM.serviceQualify()},none:function(){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("NO_FORM"),a.eoiFormVM.eoiMessage("experian-error"),a.eoiFormVM.contactFields.streetAddress($("#sq-street-address").val()),a.adobeAnalytics.global.sq.failExperionError(a.sqRequest.get.pageSource(),"modal"),a.analytics.methods.sqFailures.experionError(a.sqRequest.get.pageSource()),a.livePerson.sq.addressNotFound()}},landlineCheck:function(b){a.LANDLINECHECK=!0,a.sqFormVM.state("LANDLINE_CHECK"),b.toLowerCase().indexOf("adsl")!==-1&&(b="adsl"),a.sqFormVM.landlineSuccessMessage(b)},sqResult:{nbn:{NBN_SERVICE_CLASS_ONE:function(){a.sqFormVM.displaySuccess("nbn")},NBN_SERVICE_CLASS_TWO:function(){a.sqFormVM.displaySuccess("nbn")},NBN_SERVICE_CLASS_THREE:function(){a.sqFormVM.displaySuccess("nbn")},NBN_SERVICE_CLASS_ELEVEN:function(){a.sqFormVM.displaySuccess("nbn-fttn")},NBN_SERVICE_CLASS_TWELVE:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)},NBN_SERVICE_CLASS_THIRTEEN:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)},NBN_SERVICE_CLASS_TWENTY:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)},NBN_SERVICE_CLASS_TWENTY_ONE:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)},NBN_SERVICE_CLASS_TWENTY_TWO:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)},NBN_SERVICE_CLASS_TWENTY_THREE:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)},NBN_SERVICE_CLASS_TWENTY_FOUR:function(b){a.sqFormVM.displaySuccess("nbn-"+b.broadbandTechType)}},adsl:{NEW_ORDER:function(b){a.sqFormVM.displaySuccess(b.broadbandTechType+"-new")},PORT_ORDER:function(b){a.sqFormVM.displaySuccess(b.broadbandTechType+"-port")},CHURN_ORDER:function(b){a.sqFormVM.displaySuccess(b.broadbandTechType+"-churn")}},error:{SQ_ERROR:function(b,c){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("FULL"),a.eoiFormVM.eoiMessage("sq-error"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("SQ_ERROR",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("SQ_ERROR",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.sqError()},TWICE_ORDER:function(b){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("NO_FORM"),a.eoiFormVM.eoiMessage("duplicate-address"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("TWICE_ORDER",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("TWICE_ORDER",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.cannotBelongError()},SERVICE_NOT_AVAILABLE:function(b){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("FULL"),a.eoiFormVM.eoiMessage("service-error"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("SERVICE_NOT_AVAILABLE",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("SERVICE_NOT_AVAILABLE",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.completeSQ()},ADDR_NOT_IN_WHITELIST:function(b){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("FULL"),a.eoiFormVM.eoiMessage("service-error"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("ADDR_NOT_IN_WHITELIST",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("ADDR_NOT_IN_WHITELIST",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.cannotBelongError()},TIAB_ERROR:function(b){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("FULL"),a.eoiFormVM.eoiMessage("sq-error"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("TIAB_ERROR",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("TIAB_ERROR",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.sqError()},INVALID_ADDRESS:function(b,c){a.LANDLINECHECK=!0,a.sqFormVM.state("LANDLINE_CHECK"),a.sqFormVM.entryMessage("INCORRECT_PHONE"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("INVALID_ADDRESS",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("INVALID_ADDRESS",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.invalidPhoneError()},NO_PORT_AVAILABLE:function(b){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("FULL"),a.eoiFormVM.eoiMessage("service-error"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("NO_PORT_AVAILABLE",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("NO_PORT_AVAILABLE",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.completeSQ()},DISABLED_HFC_MOVES:function(b){a.sqFormVM.state("EOI_ENTRY"),a.eoiFormVM.state("NO_FORM"),a.eoiFormVM.eoiMessage("disabled-hfc-moves-error"),b.fireAnalytics&&(a.adobeAnalytics.global.sq.failFailureMessages("DISABLED_HFC_MOVES",a.sqRequest.get.pageSource(),b.product,"modal"),a.analytics.methods.sqFailures.failureMessages("DISABLED_HFC_MOVES",a.sqRequest.get.pageSource(),b.product)),a.livePerson.sq.completeSQ()}}},eoiResult:{full:{success:function(){a.eoiFormVM.state("NO_FORM"),a.eoiFormVM.eoiSuccessMessage("FULL")},fail:function(){}},contact:{success:function(){a.eoiFormVM.state("NO_FORM"),a.eoiFormVM.eoiSuccessMessage("CONTACT")},fail:function(){}}}}}()}(BELONG),function(a){"use strict";a.sqModal=a.sqModal||{},$.extend(a.sqModal,function(){var b,c="";return{init:function(){return b=this,0!==$("#mdl-sq").length&&(ko.applyBindings(new a.sqModal.sqFormVM,document.getElementById("sq-form")),a.sqFormVM=ko.contextFor(document.getElementById("sq-form")).$data,ko.applyBindings(new a.sqModal.eoiFormVM,document.getElementById("eoi-form")),a.eoiFormVM=ko.contextFor(document.getElementById("eoi-form")).$data,ko.applyBindings(new a.sqModal.structuredAddressVM,document.getElementById("structured-address-form")),a.structuredAddressVM=ko.contextFor(document.getElementById("structured-address-form")).$data,jQuery.validator.addMethod("sqHasPostCode",function(a){return/^\d{3,4}$/.test(a.replace(/^\s+|\s+$/g,"").slice(-4))},"Please use the autocomplete to select an address."),"redirected"===a.util.loadPageVar("sq_redirect")&&b.open({openCallBack:function(){a.sqRequest.get.fromSession()&&a.sqFormVM.state("ADDRESS_FOUND")},closeCallBack:function(){a.sqFormVM.callPBHandleSqDone(!0)}}),b.validation(),a.CLEARSQONSUBMIT=!0,a.LANDLINECHECK=!1,a.REFINEDADDRESS=!1,void $(".fn-sq-modal-open").off("click").on("click",function(){b.open()}))},open:function(d){d=d||{},d.closeCallBack=d.closeCallBack||function(){},d.openCallBack=d.openCallBack||function(){},a.sqModal.ADDRESS_CHECK_SUPPRESSED=!1,c="",$.magnificPopup.open({items:{src:"#mdl-sq",type:"inline"},alignTop:!0,showCloseBtn:!0,closeOnBgClick:!0,enableEscapeKey:!1,overflowY:"auto",fixedContentPos:"auto",callbacks:{open:function(){a.sqFormVM.resetForm(),b.clearPreviousData(),a.belongModal.setupAutoResize({modalContainer:$("#mdl-sq"),nameSpace:"modalAutoResizeSq",noShadow:!0}),d.openCallBack(),a.sqExecute.noOfClicks=0,$("#sq-street-address").removeData("moniker"),a.sqFormVM.showHideSQFooter(!1),$(".error-select").addClass("hidden"),$("#mdl-sq").find(".mfp-close").addClass("sq-close"),b.getCloseAction()},close:function(){a.sqFormVM.hideAllMessages(),a.CLEARSQONSUBMIT=!0,a.LANDLINECHECK=!1,a.REFINEDADDRESS=!1,c.length&&a.adobeAnalytics.global.sq.closeModal(c),d.closeCallBack(),$(".mfp-container").off("click.checkSqClose")}}}),$(".structured-address-form, .eoi-form").slimScroll({height:"600px",size:"10px",position:"right",color:"#5c5c5c",alwaysVisible:!0,distance:"1px",railVisible:!1,railColor:"#222",railOpacity:.3,wheelStep:30,allowPageScroll:!1,disableFadeOut:!1}),$(".sqContainer").slimScroll({height:"auto",size:"10px",position:"right",color:"#5c5c5c",alwaysVisible:!0,distance:"1px",railVisible:!1,railColor:"#222",railOpacity:.3,wheelStep:30,allowPageScroll:!1,disableFadeOut:!1})},getCloseAction:function(){$(".sq-close").off("click").on("click",function(a){c="CLICK",$("#mdl-sq").find(".mfp-close").removeClass("sq-close"),$.magnificPopup.proto.close.call(this)}),$(".mfp-container").not("#mdl-sq").on("click.checkSqClose",function(a){$(a.target).attr("class");$("#mdl-sq").has($(a.target)).length>0||(c="ESCAPE")})},validation:function(){a.sqValidator=a.validation.setupFormValidation("sq-entry",$("#sq-form"),{rules:{"sq-street-address":{required:!0,sqHasPostCode:!0,disallowedCharacters:!0,minlength:8},"landline-entry-number":{required:function(){var a=$("#landline-entry-yes").is(":checked");return a},australianPhoneNumber:!0},"landline-entry":{required:$(".landline-entry .radio-holder").is(":visible")}},errorPlacement:function(a,b){"landline-entry"==b.attr("name")?$(".landline-entry .radio-holder").append(a):a.insertAfter(b)}}),a.sqValidator.resetForm()},clearPreviousData:function(){$(".ui-autocomplete li").length>0&&($(".ui-autocomplete").empty(),$(".sq-form__address-entry .ctrl-holder .sq-check-address-structured-link").remove(),$(".error-select").addClass("hidden"),a.sqFormVM.showHideSQFooter(!1),$("#sq-street-address").attr("data-address",""))}}}())}(BELONG),function(a){"use strict";a.sqRequest=function(){return{processResult:function(b,c,d){var e,f,g,h={fireAnalytics:!1,broadbandTechType:"",product:""},i=a.sqRequest.get.pageSource(),j=b.responseType,k=!1,l=!1;if(b.broadbandTechnologyType){switch(h.broadbandTechType=b.broadbandTechnologyType.toLowerCase(),h.broadbandTechType){case"hfc":case"fttp":case"fttn":case"fttb":j=b.serviceClass,e="nbn";break;case"adsl1":case"adsl2":e="adsl"}h.product=e}if("MOVE"===SQ_MODAL_VARIANT&&"success"===c)switch(b.serviceClass){case"NBN_SERVICE_CLASS_TWENTY":case"NBN_SERVICE_CLASS_TWENTY_ONE":case"NBN_SERVICE_CLASS_TWENTY_TWO":case"NBN_SERVICE_CLASS_TWENTY_THREE":case"NBN_SERVICE_CLASS_TWENTY_FOUR":b.success=!1,c="fail",j="DISABLED_HFC_MOVES"}switch("undefined"==typeof d&&(d=!1),"INBOUND_SALE"===SQ_MODAL_VARIANT?d||""!==a.join.model.sq.phoneNumber||"fttp"===h.broadbandTechType||"hfc"===h.broadbandTechType?(h.fireAnalytics=!0,l=!0):k=!0:(h.fireAnalytics=!0,l=!0),a.sqRequest.set.isPreprovisioned(b.isPreprovisioned),a.sqRequest.set.promotionId(b.promotionId),a.sqRequest.set.orderType(b.responseType),a.sqRequest.set.broadbandTechType(b.broadbandTechnologyType),a.sqRequest.set.extendedNetwork(b.extendedNetwork),a.sqRequest.set.ndc(b.ndc),a.sqRequest.set.serviceClass(b.serviceClass),a.sqRequest.set.migrationData(b.migrationData),"fail"!==c||"undefined"!=typeof j&&null!==j||(j="SQ_ERROR"),f=e,j){case"NBN_SERVICE_CLASS_ELEVEN":f+="-fttn";break;case"NBN_SERVICE_CLASS_TWELVE":case"NBN_SERVICE_CLASS_THIRTEEN":case"NBN_SERVICE_CLASS_TWENTY":case"NBN_SERVICE_CLASS_TWENTY_ONE":case"NBN_SERVICE_CLASS_TWENTY_TWO":case"NBN_SERVICE_CLASS_TWENTY_THREE":case"NBN_SERVICE_CLASS_TWENTY_FOUR":f+="-"+h.broadbandTechType}if(g=f,b.ndc&&(f+="-ndc"),b.extendedNetwork&&(f="ADSL-ExtendedNetwork"),"success"===c&&h.fireAnalytics&&(a.adobeAnalytics.global.sq.success(i,j,f,"modal"),a.analytics.methods.sq.sqSuccess(i,j,f)),a.livePerson.sq.completeSQ(),"success"===c&&l&&(sessionStorage.setItem("sqDone",!0),sessionStorage.setItem("product",e),sessionStorage.setItem("broadbandTechnologyType",h.broadbandTechType),sessionStorage.setItem("resultStatus",c),sessionStorage.setItem("resultCode",j),sessionStorage.setItem("sqModel",JSON.stringify(a.join.model.sq)),$.magnificPopup.instance.isOpen===!1&&0!==$("#cmp-product-builder").length&&a.sqFormVM.callPBHandleSqDone(!0)),"success"===c)if(k)a.sqModal.sqRules.landlineCheck(g);else switch(SQ_MODAL_VARIANT){case"INBOUND_SALE":"NBN"!==i&&"nbn"===e?a.sqFormVM.redirectUser({pageUrl:"/nbn?sq_redirect=redirected",product:"to-nbn"}):"ADSL"!==i&&"adsl"===e?a.sqFormVM.redirectUser({pageUrl:"/adsl?sq_redirect=redirected",product:"to-adsl"}):a.sqModal.sqRules.sqResult[e][j](h);break;case"MOVE":"NBN-MOVES"!==i&&"nbn"===e?a.sqFormVM.redirectUser({pageUrl:"/account/nbn-moves?sq_redirect=redirected",product:"to-nbn"}):"ADSL-MOVES"!==i&&"adsl"===e?a.sqFormVM.redirectUser({pageUrl:"/account/adsl-moves?sq_redirect=redirected",product:"to-adsl"}):a.sqModal.sqRules.sqResult[e][j](h);break;case"MIGRATION":}else h.fireAnalytics=!0,a.sqModal.sqRules.sqResult.error[j](h)},changeAddressSelect:function(){var b=$(this).parent().parent().attr("data-value"),c=$(this).parent().parent().attr("data-text");switch(b){case"":return!1;case"address_not_found":a.adobeAnalytics.global.sq.selectAddress("address_not_found","modal"),a.livePerson.sq.addressNotFound(),$("#sq-street-address").data("moniker",""),a.sqFormVM.state("ADDRESS_ENTRY"),a.sqFormVM.entryMessage("HAVING_TROUBLE");break;default:$.each(globalAddressList,function(){this.addressId===b&&($("#sq-street-address").val(c),a.sqRequest.set.addressDetails(this),a.sqRequest.set.landlineDetails(),a.REFINEDADDRESS=!0)})}},set:{addressDetails:function(b){var c,d,e,f,g=$("#sq-street-address").val();c="object"==typeof b.fullAddress?JSON.parse(JSON.stringify(b.fullAddress)):JSON.parse(b.fullAddress),d=c.propertyAddressDetails,a.join.model.sq.serviceAddressId=b.addressId,a.join.model.sq.serviceExchange=c.exchange,a.join.model.sq.serviceStreet=d.streetDetails.streetName,a.join.model.sq.serviceSuburb=c.localityDetails.locality,a.join.model.sq.serviceState=c.localityDetails.state,a.join.model.sq.servicePostcode=c.localityDetails.postCode,"undefined"!=typeof b.streetNumber?a.join.model.sq.serviceStreetNumber=b.streetNumber:a.join.model.sq.serviceStreetNumber=d.propertyNumberFrom+d.propertyNumberTo+d.propertyNumberFromSuffix,"undefined"!=typeof d.streetDetails.streetType&&null!==d.streetDetails.streetType?a.join.model.sq.serviceStreetType=d.streetDetails.streetType:a.join.model.sq.serviceStreetType="","undefined"!=typeof b.subaddress&&null!==b.subaddress?a.join.model.sq.serviceSubAddressDetails=b.subaddress:"undefined"!=typeof b.subAddressDetails&&null!==b.subAddressDetails?(e=(a.join.model.sq.serviceStreetNumber+" "+a.join.model.sq.serviceStreet).toUpperCase(),f=g.toUpperCase().indexOf(e),a.join.model.sq.serviceSubAddressDetails=g.substr(0,f)):a.join.model.sq.serviceSubAddressDetails="",$("#sq-post-code").val(a.join.model.sq.servicePostcode)},landlineDetails:function(){if($("#landline-entry-yes").is(":checked")){var b=$("#landline-entry-number").val(),c=a.validation.helpers.cleanAustralianPhoneNumber(b);$("#landline-entry-number").val(c),b=c,a.join.model.sq.phoneNumber=b}else a.join.model.sq.phoneNumber=""},orderType:function(b){a.join.model.sq.orderType=b},broadbandTechType:function(b){a.join.model.sq.broadbandTechType=b},isPreprovisioned:function(b){a.join.model.sq.isPreprovisioned=b},extendedNetwork:function(b){a.join.model.sq.extendedNetwork=b||!1,a.sqFormVM.extendedNetwork(b||!1)},ndc:function(b){a.join.model.sq.ndc=b||!1,a.sqFormVM.ndc(b||!1)},serviceClass:function(b){a.join.model.sq.serviceClass=b||null,a.sqFormVM.serviceClass(b)},migrationData:function(b){a.join.model.sq.migrationData=b||null,a.sqFormVM.migrationData(b)},promotionId:function(b){a.join.model.sq.promotionId=b||!1}},get:{pageSource:function(){var a=window.location.pathname;a.substring(0,a.lastIndexOf("."));switch(a){case"/":return"OAHP";case"/nbn":return"NBN";case"/adsl":return"ADSL";case"/join":return"JOIN";case"/account/nbn-moves":return"NBN-MOVES";case"/account/adsl-moves":return"ADSL-MOVES";default:return a.replace("/","")}},fromSession:function(){if(null===JSON.parse(sessionStorage.getItem("sqModel")))return!1;a.join.model.sq=JSON.parse(sessionStorage.getItem("sqModel")),a.sqRequest.set.ndc(a.join.model.sq.ndc),a.sqRequest.set.extendedNetwork(a.join.model.sq.extendedNetwork),a.sqRequest.set.serviceClass(a.join.model.sq.serviceClass),"undefined"!=typeof a.sqRequest.set.migrationData&&null!==a.sqRequest.set.migrationData&&a.sqRequest.set.migrationData(a.join.model.sq.migrationData);var b={fireAnalytics:!1,broadbandTechType:sessionStorage.getItem("broadbandTechnologyType").toLowerCase()};return a.sqModal.sqRules.sqResult[sessionStorage.getItem("product")][sessionStorage.getItem("resultCode")](b),!0}}}}()}(BELONG),function(a){"use strict";a.sqModal=a.sqModal||{},a.sqModal.structuredAddressVM=function(){var b=this;b.state=ko.observable("NONE"),b.structuredAddress={type:ko.observable(""),unitNumber:ko.observable(""),streetNumber:ko.observable(""),streetName:ko.observable(""),streetType:ko.observable(""),suburb:ko.observable(""),state:ko.observable(""),postcode:ko.observable(""),propertyName:ko.observable(""),subAddressType:ko.observable(""),subAddressNumber:ko.observable("")},b.structuredAddressSq=function(){if(!a.validation.validateForm(a.structuredAddressValidator))return!1;var c=b.addressConcatenation(),d=b.structuredAddress.postcode();b.state("NONE"),a.sqFormVM.state("LOADING"),a.CLEARSQONSUBMIT=!1,a.sqExecute.init(),a.sqExecute.initializeVars(),a.sqExecute.get_api_key(),a.sqExecute.performVerification(c,d)},b.setupStructuredAddressForm=function(){b.structuredAddress.type("UNIT_APARTMENT"),b.resetStructuredAddress(),b.state("START_STRUCTURED_SQ"),b.populateDropdownLists()},b.resetStructuredAddress=function(){b.structuredAddress.unitNumber(""),b.structuredAddress.streetNumber(""),b.structuredAddress.streetName(""),b.structuredAddress.streetType(""),b.structuredAddress.suburb(""),b.structuredAddress.state(""),b.structuredAddress.postcode(""),b.structuredAddress.propertyName(""),b.structuredAddress.subAddressType(""),b.structuredAddress.subAddressNumber(""),$("#structured-address-form input").blur().change(),$("#structured-address-form-street-type").val("").change(),$("#structured-address-sub-address-type").val("").change(),$("#structured-address-form-state").val("").change(),$("input.error").removeClass("error"),$("label.error").hide(),a.join.model.sq.gnafpId="",a.join.model.sq.numberOfAddressesFromVerifyAddress=0},b.state.subscribe(function(b){switch(b){case"START_STRUCTURED_SQ":break;case"NONE":}setTimeout(function(){a.belongModal.setHeights({modalContainer:$("#mdl-sq"),noShadow:!0})},100)}),b.structuredAddress.type.subscribe(function(c){switch(c){case"UNIT_APARTMENT":b.structuredAddress.propertyName(""),b.structuredAddress.subAddressType(""),b.structuredAddress.subAddressNumber(""),a.adobeAnalytics.global.sq.structuredClicksOnTab(c);break;case"HOUSE":b.structuredAddress.unitNumber(""),b.structuredAddress.propertyName(""),b.structuredAddress.subAddressType(""),b.structuredAddress.subAddressNumber(""),a.adobeAnalytics.global.sq.structuredClicksOnTab(c);break;case"OTHER":a.adobeAnalytics.global.sq.structuredClicksOnTab(c)}}),b.structuredSqValidation=function(){a.structuredAddressValidator=a.validation.setupFormValidation("structured-address-form",$("#structured-address-form"),{rules:{"property-type":{required:!0},"structured-address-sub-address-type":{required:!1},"structured-address-property-name":{required:!1,maxlength:255,disallowedCharacters:!0},"structured-address-form-unit-number":{required:function(){return"UNIT_APARTMENT"===b.structuredAddress.type()}},"structured-address-sub-address-number":{required:!1},"structured-address-form-street-number":{required:!0},"structured-address-form-street-name":{required:!0,maxlength:255,disallowedCharacters:!0},"structured-address-form-street-type":{required:!1,maxlength:255,disallowedCharacters:!0},"structured-address-form-suburb":{required:!0,maxlength:255,disallowedCharacters:!0},"structured-address-form-state":{required:!0,maxlength:3,disallowedCharacters:!0},"structured-address-form-postcode":{required:!0,maxlength:4,exactlength:4,digits:!0,disallowedCharacters:!0}}})},b.structuredSqValidation(),b.addressConcatenation=function(){var c="";return"OTHER"===b.structuredAddress.type()&&(b.structuredAddress.subAddressNumber()&&(c+=b.structuredAddress.subAddressType()?b.structuredAddress.subAddressType()+" ":""),c+=b.structuredAddress.subAddressNumber()?b.structuredAddress.subAddressNumber()+", ":"",b.structuredAddress.propertyName()&&a.adobeAnalytics.global.sq.structuredPropertyNameEntered(b.structuredAddress.propertyName())),"UNIT_APARTMENT"===b.structuredAddress.type()&&(c+=b.structuredAddress.unitNumber()?b.structuredAddress.unitNumber()+"/":""),c+=b.structuredAddress.streetNumber()+" "+b.structuredAddress.streetName(),c+=b.structuredAddress.streetType()?" "+b.structuredAddress.streetType()+", ":", ",c+=b.structuredAddress.suburb()+", "+b.structuredAddress.state()+", "+b.structuredAddress.postcode(),a.DEVSWITCH,c},b.populateDropdownLists=function(){b.populateDropdown(ADDRESS_FIELDS_STATES,"#structured-address-form-state"),b.populateDropdown(ADDRESS_FIELDS_STREET_TYPES,"#structured-address-form-street-type"),b.populateDropdown(ADDRESS_FIELDS_SUB_ADDRESS_TYPES,"#structured-address-sub-address-type")},b.populateDropdown=function(a,b,c){var d=c||!0,e=[];d&&e.push('<option value=""></option>'),$.each(a,function(a,b){e.push('<option value="'+b+'">'+b+"</option>")}),$(b).html(e.join(""))}}}(BELONG),function(a){"use strict";a.sqUtil=a.sqUtil||{},$.extend(a.sqUtil,function(){var a,b;return{get:{sourceType:function(){switch(b=window.location.pathname,b=b.substring(0,b.indexOf("."))){case"/":case"":return"OAHP";case"/adsl":return"ADSL";case"/nbn":return"NBN";case"/join":return"JOIN";default:return b}}},is:{nbnOrder:function(a){return $.inArray(a,["FTTB","FTTN","FTTP","HFC"])>-1},nbnTypeOrder:function(a){return"undefined"!=typeof a&&null!==a&&""!==a&&("fttp"===a.toLowerCase()||"fttb"===a.toLowerCase()||"fttn"===a.toLowerCase()||"hfc"===a.toLowerCase())},adslTypeOrder:function(b){return!(!a.is.adsl1Order(b)&&!a.is.adsl2Order(b))},adsl1Order:function(a){return"undefined"!=typeof a&&null!==a&&""!==a&&"adsl1"===a.toLowerCase()},adsl2Order:function(a){return"undefined"!=typeof a&&null!==a&&""!==a&&"adsl2"===a.toLowerCase()},portOrder:function(a){return"PORT_ORDER"===a},newOrder:function(a){return"NEW_ORDER"===a},churnOrder:function(a){return"CHURN_ORDER"===a}}}}())}(BELONG),function(a){"use strict";a.sqAddressLib=function(){return{methods:{preClick:function(){var b=$("#sq-street-address"),c=b.val(),d=$("#sq-post-code"),e=($("#confirm-address"),!1);return $("#sq-street-address").attr("data-address").length||a.validation.validateForm(a.sqValidator)?(a.CLEARSQONSUBMIT&&(sessionStorage.removeItem("sqModel"),a.join.model.sq={accessType:"",defaultSize:"",phoneNumber:"",serviceAddressId:"",serviceExchange:"",serviceStreetNumber:"",serviceStreet:"",serviceStreetType:"",serviceSuburb:"",serviceState:"",servicePostcode:"",serviceSubAddressDetails:"",isNbn:!1,orderType:"",isPreprovisioned:!1,promotionId:""},a.sqFormVM.landlineNumberRequired(""),a.CLEARSQONSUBMIT=!1),$("#sq-street-address").attr("data-address").length&&$("#sq-street-address").val($("#sq-street-address").attr("data-address")),a.sqFormVM.state("LOADING"),d.val(c.replace(/^\s+|\s+$/g,"").slice(-4)),a.sqFormVM.showHideSQFooter(!1),$("#sq-street-address").attr("data-address",""),$(".error-select").addClass("hidden"),a.sqModal.clearPreviousData(),a.LANDLINECHECK?("YES"===a.sqFormVM.landlineNumberRequired()?(a.adobeAnalytics.global.sq.landlineOption(a.sqRequest.get.pageSource(),"Yes","modal"),a.analytics.methods.sq.landlineOption(a.sqRequest.get.pageSource(),"Yes")):(e=!0,a.adobeAnalytics.global.sq.landlineOption(a.sqRequest.get.pageSource(),"No","modal"),a.analytics.methods.sq.landlineOption(a.sqRequest.get.pageSource(),"No")),a.adobeAnalytics.global.sq.check(a.sqRequest.get.pageSource(),"2","modal"),a.analytics.methods.sq.sqCheck(a.sqRequest.get.pageSource(),"2"),e?a.sqRequest.processResult(BELONG.sqModal.LATEST_SQ_SUCCESS,"success",!0):a.sqAddressLib.methods.postClick(!0),!1):a.REFINEDADDRESS?(a.adobeAnalytics.global.sq.check(a.sqRequest.get.pageSource(),"2","modal"),a.analytics.methods.sq.sqCheck(a.sqRequest.get.pageSource(),"2"),a.sqAddressLib.methods.postClick(!0),!1):(a.adobeAnalytics.global.sq.check(a.sqRequest.get.pageSource(),"1","modal"),a.analytics.methods.sq.sqCheck(a.sqRequest.get.pageSource(),"1"),!0)):void 0;
},postClick:function(b){var c;b=b||!1,"undefined"!=typeof globalAddressList?1===globalAddressList.length||b?a.sqExecute.forceAddressList===!0?(c="multiple",a.sqExecute.forceAddressList=!1):(1===globalAddressList.length&&a.sqRequest.set.addressDetails(globalAddressList[0]),a.sqRequest.set.landlineDetails(),c="single"):c="multiple":c="none",a.sqModal.sqRules.addressResult[c]()}}}}()}(BELONG),function(a){"use strict";a.sqDebug=function(){var b;return{init:function(){b=this,a.DEVSWITCH&&0!==$(".sq-entry").length&&($("#sq-check-button").off("click.sqdebugclick").on("click.sqdebugclick",b.events.debug.clickCheckSq),b.populateGlobalAddressList()),a.DEVSWITCH&&$("#sq-form").length>0&&($("#sq-check-button").off("click.sqdebugclick").on("click.sqdebugclick",b.events.debug.clickCheckSq),b.populateGlobalAddressList()),a.DEVSWITCH&&b.populateSqConfig()},populateGlobalAddressList:function(){globalAddressList=useNewAddressVerification?[{addressId:"262564428",streetName:"HODDLE",streetNumber:"229",subaddress:"Unit 20 Floor 1 Building 1, ",suburb:"COLLINGWOOD, VIC, 3066",streetType:"STREET",fullAddress:{addressStatus:"CONFIRMED",statusOfPrimaryAddress:"CONFIRMED",addressType:"PROPERTY",exchange:"CWOD",localityDetails:{state:"VIC",country:null,locality:"COLLINGWOOD",postCode:"3066"},propertyAddressDetails:{propertyNumberFrom:229,propertyNumberFromSuffix:null,propertyNumberTo:null,propertyNumberToSuffix:null,streetDetails:{streetName:"HODDLE",streetType:"STREET"}}}},{addressId:"262564329",streetName:"HODDLE",streetNumber:"229",subaddress:"Unit 110 Floor 10 Building 1, ",suburb:"COLLINGWOOD, VIC, 3066",streetType:"STREET",fullAddress:{addressStatus:"CONFIRMED",statusOfPrimaryAddress:"CONFIRMED",addressType:"PROPERTY",exchange:"CWOD",localityDetails:{state:"VIC",country:null,locality:"COLLINGWOOD",postCode:"3066"},propertyAddressDetails:{propertyNumberFrom:229,propertyNumberFromSuffix:null,propertyNumberTo:null,propertyNumberToSuffix:null,streetDetails:{streetName:"HODDLE",streetType:"STREET"}}}}]:[{addressId:"160134037",subaddress:"",streetNumber:"253",streetName:"Hoddle Street",suburb:"Collingwood, VIC 3066",confidence:null,fullAddress:'{"addressIdentification":[{"type":"ID","identifier":"160134037","issuer":"ADBOR"}],"addressStatus":"CONFIRMED","statusOfPrimaryAddress":"CONFIRMED","addressType":"PROPERTY","exchange":"CWOD","localityDetails":{"state":"VIC","country":"AUSTRALIA","locality":"COLLINGWOOD","postCode":"3066"},"propertyAddressDetails":{"streetDetails":{"streetName":"HODDLE","streetType":"STREET"},"propertyNumberFrom":"253"}}'},{addressId:"419642696",subaddress:"Unit 133, ",streetNumber:"253",streetName:"Hoddle Street",suburb:"Collingwood, VIC 3066",confidence:95,fullAddress:'{"addressIdentification":[{"type":"ID","identifier":"400026054","issuer":"ADBOR"}],"addressStatus":"CONFIRMED","statusOfPrimaryAddress":"CONFIRMED","addressType":"PROPERTY","exchange":"CWOD","inputMatchConfidence":95,"localityDetails":{"state":"VIC","country":"AUSTRALIA","locality":"COLLINGWOOD","postCode":"3066"},"propertyAddressDetails":{"streetDetails":{"streetName":"HODDLE","streetType":"STREET"},"propertyNumberFrom":"253"},"subAddressDetails":{"flatUnitNumberFrom":"133","flatUnitTypeEnum":"UNIT","subAddressTypeEnum":"FLATUNIT"}}'}],globalAddressList.pop()},populateSqConfig:function(){sqConfig={addressConfirmFieldId:"confirm-address",addressErrorMsgDivId:"error",addressFieldId:"sq-street-address",addressFoundMsg:"Your address has been confirmed.",addressMsgDivChildElement:"",addressMsgDivId:"address-msg-div",addressNotListedOption:"My address is not listed above",addressResultDivId:"address-result",addressStatus:"",clientTimeoutMs:"",confRatingThreshold:"90",errorMsg1:"That address could not be found, try again with a format like 'Flat 1, 60 Smith Street, Sydney'",errorMsg2:"If you are experiencing some difficulties with your address, please call Telstra on 12 8887.",errorMsg3:"",excludeAddressType:"PARCEL_LOT_WITH_PLAN,PARCEL_LOT_WITHOUT_PLAN,PARCEL_OTHER,RURAL,POSTAL",fullAddressHiddenInputId:"",loadingIndicatorElement:"",postcodeFieldId:"sq-post-code",requestor:"Eve",returnFullAddress:"",searchButtonId:"sq-check-button",selectAddressOption:"Select a refined address",streetNames:"",verificationUrl:"https://www.my.telstra.com.au/addresslookup/verifyAddress?callback=?",callBackHookScriptName:null,delay:200,minLength:2,stripInvalidAddressChars:"",disableAutoComplete:!0}},events:{debug:{clickCheckSq:function(c){return c.preventDefault(),b.populateGlobalAddressList(),!!a.sqAddressLib.methods.preClick()&&void setTimeout(function(){"undefined"!=typeof globalAddressList&&1!==globalAddressList.length&&($(".street-address-entry").addClass("hidden"),$(".street-address-select").removeClass("hidden")),a.sqAddressLib.methods.postClick()},a.DEVDELAY)}}}}}()}(BELONG),function(a){"use strict";a.ADDRESS_CHECK_CLICK_BOUND=!1,a.sqExecute=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o={},p=15e3,q=0,r="qasAddressPicklist",s="qasAddressWindow",t=200,u="";return{init:function(){if(b=this,b.noOfClicks=0,"undefined"!=typeof sqConfig)return n=sqConfig,"undefined"!=typeof n&&void $(function(){b.initializeVars(),b.initialiseSQOnDOMReady(),b.handleItemSelected(),b.enableClearButton()})},initializeVars:function(){c=$("#"+n.addressResultDivId),d=$("#"+n.addressMsgDivId),e=$("#"+n.addressErrorMsgDivId),n.loadingIndicatorElement.length>0&&(f=$("#"+n.loadingIndicatorElement)),g=$("#"+n.addressFieldId),h=$("#"+n.postcodeFieldId),i=0,j=!1,m=!0,l="",k=!0,n.clientTimeoutMs.length>0&&(p=n.clientTimeoutMs)},get_api_key:function(){$.ajax({url:"/apps/generateKey",data:{},dataType:"html",async:!1,type:"POST",error:function(a,b){},timeout:p,success:function(a){l=a,m=!1}})},forceAddressList:!1,performVerification:function(a,c){var d,e,g;j||m||(j=!0,"undefined"!=typeof f&&null!==f&&f.show(),e=function(d){d.success?b.handleAddressList(d.addresses,"api"):(useNewAddressVerification=!1,b.performTelstraVerification(a,c))},g=function(d){useNewAddressVerification=!1,b.performTelstraVerification(a,c)},d=$.get("/bin/belong/sq/address/verifyaddress",{address:a}),d.done(e),d.fail(g))},performTelstraVerification:function(a,d){var e;j||m||(j=!0,"undefined"!=typeof f&&null!==f&&f.show()),e={address:a,postcode:d,excludeAddressType:n.excludeAddressType,addressStatus:n.addressStatus,requestor:n.requestor,key:l},$.jsonp({url:n.verificationUrl,data:e,callback:"callback",error:function(a,d){"undefined"!=typeof f&&null!==f&&f.hide(),c.hide(),b.verificationHandler.showErrorMessage(n.errorMsg2),void 0!==h.attr("disabled")&&h.attr("disabled")===!0&&h.removeAttr("disabled"),q+=1,j=!1,"timeout"===d&&(q+=1,j=!1,q<6?b.search_address():q=0)},timeout:p,success:function(a){b.handleAddressList(a,"telstra")}})},handleAddressList:function(c,d){var e="",g=!1;if(a.sqFormVM.isSingleAddress(!1),a.join.model.sq.numberOfAddressesFromVerifyAddress=0,i+=1,globalAddressList=c,null!==c&&c.length>0){if(a.join.model.sq.gnafpId&&(a.join.model.sq.numberOfAddressesFromVerifyAddress=c.length),"api"===d)1===c.length&&(g=!0,e=c[0].addressId,a.analytics.methods.sq.selectAddress(e),$("#sq-form").length>0?a.adobeAnalytics.global.sq.selectAddress(e,"modal"):a.adobeAnalytics.global.sq.selectAddress(e,"standard"),b.verificationHandler.onExactMatch(c[0]));else if("telstra"===d)if(1===c.length){var h=c[0].confidence;null!==h&&h>=n.confRatingThreshold?(g=!0,e=c[0].addressId,a.analytics.methods.sq.selectAddress(e),$("#sq-form").length>0?a.adobeAnalytics.global.sq.selectAddress(e,"modal"):a.adobeAnalytics.global.sq.selectAddress(e,"standard"),b.verificationHandler.onExactMatch(c[0])):(a.sqFormVM.isSingleAddress(!0),b.forceAddressList=!0)}else if(2===c.length)for(var k in c){var l=c[k],m=(l.fullAddress,b.getUnitTypeFromTelstraVerifyAddress(l).toUpperCase());if(100===l.confidence||"UNIT"===m){e=c[0].addressId,a.analytics.methods.sq.selectAddress(e),$("#sq-form").length>0?a.adobeAnalytics.global.sq.selectAddress(e,"modal"):a.adobeAnalytics.global.sq.selectAddress(e,"standard"),g=!0,b.verificationHandler.onExactMatch(l),globalAddressList=[],globalAddressList.push(l);break}}g?b.verificationHandler.onNoMatch():b.verificationHandler.onNonExactMatch(c),"undefined"!=typeof f&&null!==f&&f.hide(),j=!1,BELONG.sqAddressLib.methods.postClick()}else"undefined"!=typeof f&&null!==f&&f.hide(),j=!1,a.sqModal.sqRules.sqResult.error.SERVICE_NOT_AVAILABLE({fireAnalytics:!1})},getUnitTypeFromTelstraVerifyAddress:function(a){if("undefined"==typeof a||null===a)return"";if("undefined"==typeof a.fullAddress||null===a.fullAddress)return"";var b="",c=JSON.parse(a.fullAddress);return"undefined"!=typeof c.subAddressDetails&&"undefined"!=typeof c.subAddressDetails.flatUnitTypeEnum&&(b=c.subAddressDetails.flatUnitTypeEnum),b},search_address:function(){var c=g.val(),d=h.val();a.join.model.sq.gnafpId="";var e=g.data("moniker");b.secondExperianAPI(e,function(e,f){e===!0&&"undefined"!=typeof f.address&&""!==f.address.pid&&(c=f.address.address+", "+f.address.locality+", "+f.address.state+", "+f.address.postcode,d=f.address.postcode,a.join.model.sq.gnafpId=f.address.pid),USE_NEW_ADDRESS_VERIFICATION===!0?b.performVerification(c,d):b.performTelstraVerification(c,d)})},secondExperianAPI:function(a,b){var c="";return"undefined"!=typeof a&&(c=a),""===c?void b(!1,null):void $.ajax({url:"/apps/telstraEveServlet",type:"POST",dataType:"json",data:{requestType:s,action:"DoGetAddress",moniker:c},error:function(){if("undefined"!=typeof b)return void b(!1,null)},success:function(a){if("undefined"!=typeof b)return void b(!0,a)}})},verificationHandler:{showMessage:function(a){$("#"+n.addressMsgDivId+" "+n.addressMsgDivChildElement+" ").html(a),d.fadeIn()},showErrorMessage:function(a){$("#"+n.addressErrorMsgDivId).html(a),e.fadeIn()},hideMessage:function(){d.fadeOut()},onExactMatch:function(a){e.hide();var b=(a.subaddress?a.subaddress+" ":"")+(a.streetNumber?a.streetNumber+" ":"")+a.streetName+", "+a.suburb,d="";d+="<li data-value='"+a.addressId+"'><a>"+b+"</a></li>";var f=f+"<div id='streetName_"+a.addressId+"'>"+a.streetName+"</div>",g=""+n.returnFullAddress;"true"===g&&$("#"+n.fullAddressHiddenInputId).val(a.fullAddress),c.hide(),k=!1,$("#"+n.addressConfirmFieldId).html(d),$("#streetNames").html(f),"function"==typeof n.callBackHookScriptName&&n.callBackHookScriptName("exact_match",a)},onNonExactMatch:function(a){e.hide();var d="";$(".additional-hint").addClass("hidden");var f="";$.each(a,function(a,b){if(null!==b.addressId){var c=(b.subaddress?b.subaddress+" ":"")+(b.streetNumber?b.streetNumber+" ":"")+b.streetName+(b.streetType?" "+b.streetType+" ":"")+", "+b.suburb;d+="<li class='ui-menu-item' data-value='"+b.addressId+"'><a>"+c+"</a></li>",f=f+"<div id='streetName_"+b.addressId+"'>"+b.streetName+"</div>",o[b.addressId]=b.fullAddress}}),a.length>8&&$(".additional-hint").removeClass("hidden"),h.attr("disabled","disabled"),k=!1,b.verificationHandler.hideMessage(),c.fadeIn(),$("#"+n.addressConfirmFieldId).html(d),$("#streetNames").html(f),"function"==typeof n.callBackHookScriptName&&n.callBackHookScriptName("multiple_matches",a)},onNoMatch:function(){c.hide(),i<3?b.verificationHandler.showErrorMessage(n.errorMsg1):b.verificationHandler.showErrorMessage(n.errorMsg2),void 0!==h.attr("disabled")&&1==h.attr("disabled")&&h.removeAttr("disabled"),$("#"+n.addressConfirmFieldId).html(""),$("#streetNames").html(""),"function"==typeof n.callBackHookScriptName&&n.callBackHookScriptName("no_match")}},enableClearButton:function(){var b=($("#sq-street-address"),$(".clearBtn"));b.on("click",function(){$(this).css("visibility","hidden"),$("#sq-street-address").val(""),a.sqModal.clearPreviousData()})},handleItemSelected:function(){$("#sq-form").on("click","ul.ui-autocomplete li",function(b){$("#sq-form .ui-autocomplete li").removeClass("active"),$(this).addClass("active");var c=$(this).index(),d=$("#sq-form .ui-autocomplete li").length-1;a.adobeAnalytics.global.sq.selectAddressFromList(c+1,d)}),$("#sq-street-address").on("blur",function(){$(this).removeClass("error"),$("label.error").hide()}),$("#sq-form").on("click","#confirm-address li a",function(b){$("#confirm-address").attr("data-value",$(this).parent().attr("data-value")),$("#confirm-address").attr("data-text",$(this).text()),$("#confirm-address li").removeClass("active"),$(this).parent().addClass("active"),a.sqFormVM.showHideSQFooter(!0),h.attr("disabled","disabled"),k=!1;var c=n.returnFullAddress;"true"==c&&$("#"+n.fullAddressHiddenInputId).val(o[$("#"+n.addressConfirmFieldId).attr("data-value")])})},initialiseSQOnDOMReady:function(){var d,e=$("#"+n.addressFieldId),f=$("#"+n.postcodeFieldId),g="";d=""!==n.disableAutoComplete&&null!==n.disableAutoComplete&&n.disableAutoComplete,d===!1&&(e.autocomplete({closeOnSelect:!1,updateElement:!1,source:function(a,b){var c=$.trim(a.term);c.length>0?$.ajax({url:"/apps/telstraEveServlet",type:"POST",dataType:"json",data:{requestType:r,searchTerm:c},error:function(a){},success:function(a){b(void 0!==a?$.map(a.addressList,function(a){return{label:a.partialAddress,value:a.moniker,id:a.layout,useEntered:a.useEntered}}):{label:"",value:""})}}):b({label:"",value:""})},delay:t,open:function(a,b){if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)&&$(".ui-autocomplete").off("menufocus hover mouseover"),$("#sq-street-address").attr("data-address",""),$(".sqContainer").slimScroll(),$("#sq-form ul.ui-autocomplete li").length>8&&!$(".sq-form__address-entry .ctrl-holder .sq-check-address-structured-link").length){var c=$(".sq-check-address-structured-link").clone(!0,!0);c.appendTo($(".sq-form__address-entry .ctrl-holder")).removeClass("hidden")}},appendTo:"#sq-form .ctrl-holder",select:function(b,c){return $(this).data("moniker",c.item.value),u=c.item.label.trim().replace(/(<([^>]+)>)/gi,"").replace(/\s{2,}/g," "),$("#sq-street-address").attr("data-address",u),$("#sq-form .ui-autocomplete li").removeClass("active"),$("#sq-form .ui-autocomplete .ui-state-focus").parent("li").addClass("active"),a.sqFormVM.showHideSQFooter(!0),$("#"+n.searchButtonId).is(":visible")&&$("#"+n.searchButtonId).focus(),b.preventDefault(),!1},focus:function(a,b){if(40==a.keyCode||38==a.keyCode){var c=$("#sqContainer"),d=$($("ul.ui-autocomplete").find(".ui-state-focus"));c.scrollTop(d.offset().top-c.offset().top+c.scrollTop()-200)}return!1},search:function(a,b){var c=".*\\d+\\D?(,|/|-|\\s)*";if(null!=this.value.match(c)&&this.value.match(c)[0]==this.value)return e.autocomplete("close"),!1;var d=this.value.replace(new RegExp(c,""),"");return!(d.length<parseInt(n.minLength,10))&&void 0}}).data("ui-autocomplete")._renderItem=function(a,b){return b.label=b.label.replace(/(<([^>]+)>)/gi,"").replace(/\s{2,}/g," ").replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),b.label.length>0?($("#sq-form ul.ui-autocomplete li").length>1&&($(".error-select").removeClass("hidden"),$(this).removeClass("error"),$("label.error").hide()),$("<li></li>").data("item.autocomplete",b).append($("<a></a>").html(b.label).html(b.label)).appendTo(a)):$("<li></li>").data("item.autocomplete",b)});var h=function(a){var d=window.event||a,f=d.keyCode;if(13===f){if($("ul.ui-autocomplete li").hasClass(".active"))return e.data("ui-autocomplete")._trigger("select","autocompleteselect",{item:{value:$(this).val()}}),void e.autocomplete("close");$("#"+n.searchButtonId).trigger("click")}f>=16&&f<=18||20===f||27===f||f>=33&&f<=40||45===f||91===f||92===f||f>=112&&f<=123||144===f||(c.fadeOut(),b.verificationHandler.hideMessage(),$("#"+n.addressConfirmFieldId).html(""),k=!0)};e.click(function(c){b.noOfClicks=b.noOfClicks+1,a.adobeAnalytics.global.sq.sqAddressClick(b.noOfClicks)}),e.keyup(function(b){var c=$(this).val();$(".clearBtn").css("visibility",c.length?"visible":"hidden"),c.length||a.sqModal.clearPreviousData(),""!==g&&c!==g&&(f.removeAttr("disabled"),g=""),$("#sq-form ul.ui-autocomplete li").length>1?($(".error-select").removeClass("hidden"),$(this).removeClass("error"),$("label.error").hide()):($(".sq-check-address-structured-link").addClass("hidden"),$(".error-select").addClass("hidden")),h(b)}),f.keyup(function(a){h(a)});var i=function(c){if($("#sq-street-address").attr("data-address").length&&$("#sq-street-address").val($("#sq-street-address").attr("data-address")),a.sqModal.ADDRESS_CHECK_SUPPRESSED)return!1;var d=$("#"+n.addressConfirmFieldId).attr("data-value");if(null!==d&&"address_not_found"!==d&&(a.analytics.methods.sq.selectAddress(d),$("#sq-form").length>0?a.adobeAnalytics.global.sq.selectAddress(d,"modal"):a.adobeAnalytics.global.sq.selectAddress(d,"standard")),c.preventDefault(),BELONG.sqAddressLib.methods.preClick(),k){var e=!0;if($("#sq-street-address").attr("data-address").length||a.validation.validateForm(a.sqValidator)||(e=!1,$("#sq-form ul.ui-autocomplete li").length>1?$("label.error").hide():$("label.error").show()),e){var f=$("#"+n.addressFieldId).val(),g=null===n.stripInvalidAddressChars||""===n.stripInvalidAddressChars||g===!0;if(g===!0){for(var h;h=f.match(/(<|>|"|#|&)+/);)f=f.replace(h[1]," ");$("#"+n.addressFieldId).val(f)}else{var h=f.match(/(<|>|"|#|&)+/);h&&(null==n.errorMsg3||""==n.errorMsg3?b.verificationHandler.showErrorMessage("Please remove '"+h[1]+"' character from street address."):b.verificationHandler.showErrorMessage(n.errorMsg3),e=!1)}}e&&(b.get_api_key(),b.search_address())}};$("#"+n.searchButtonId).on("click.searchbuttonclick",i),a.ADDRESS_CHECK_CLICK_BOUND=!0}}}()}(BELONG),function(){"use strict";BELONG.stickyFooter=BELONG.stickyFooter||{},$.extend(BELONG.stickyFooter,function(){var a;return{init:function(){a=this,a.showHideStickyFooter(),$(window).scroll(function(){a.showHideStickyFooter()})},showHideStickyFooter:function(){var a,b,c=0,d=$("#stickyFooter"),e=d.attr("data-trackelement");$(e).length>0&&(a=$(e).offset().top,b=a+c-$(window).scrollTop()>=0,b||"true"===sessionStorage.getItem("sqDone")?(d.removeClass("sticky-footer--showStickySq"),d.addClass("sticky-footer--hideStickySq")):(d.removeClass("sticky-footer--hideStickySq"),d.addClass("sticky-footer--showStickySq")))}}}())}(),function(a){"use strict";a.onlineTroubleshooting=a.onlineTroubleshooting||{},$.extend(a.onlineTroubleshooting,function(){return{init:function(){if(0===$("#online-troubleshooting").length)return!1;a.KO_STARTED=!1;var b=new this.viewModel;ko.applyBindings(b,document.getElementById("online-troubleshooting-modal")),b.init()},viewModel:function(){var b,c=this,d=troubleShootingServices.SERVICE,e=troubleShootingQuestionCards.QUESTION,f=troubleShootingInfoCards.INFORMATION,g=troubleShootingInstructionCards.INSTRUCTION,h=troubleShootingEndCards.END,i=troubleShootingContactCards.CONTACT,j=troubleShootingCustomCards.CUSTOM,k=troubleShootingConstantData.Settings,l=troubleShootingConstantData.ContactData,m=e.concat(f).concat(g).concat(h).concat(i).concat(j),n=({close_confirmation:k.closeConfirmation,unload_confirmation:k.unloadConfirmation,contact_callback_option:l.contactCallbackOption,contact_call_option:l.contactCallOption},0),o={accuracy:8,findTestServer:!0,getUserInfo:!0,doLatencyTest:!0,doUploadTest:!0,progressEnabled:!0,progressVerbose:!0},p={speedTestResult:[]},q="",r={};c.cards=ko.observableArray([]),c.currentCardObj=ko.computed(function(){return c.cards()[c.cards().length-1]}),c.currentCard=ko.observable(""),c.nextAnswer=ko.observable(""),c.cardsLog=ko.observableArray([]),c.troubleshootingData=ko.observable({}).publishOn("troubleshootingData",!0),c.troubleshootingData.subscribe(function(){c.insertNewCard(c.determineStartCard())}),c.serviceData=ko.observable({}).publishOn("serviceData",!0),c.serverError=ko.observable({}).publishOn("serverError",!0),c.downloadGb=ko.observable(""),c.uploadGb=ko.observable(""),c.titleContent=ko.observable(""),c.planType=ko.observable(""),c.buttonState=ko.observable("neutral-end"),c.resultText=ko.observable(""),c.testCompleted=ko.observable(!1),c.testError=ko.observable(!1),c.speedData=ko.observable({}),c.init=function(){c.apiInit(),$(".modal-component-body").on("scroll.forShadow",function(){$(".active-card").offset().top>$(".modal-component-body").offset().top+10?$(".modal-component h2").addClass("scrolling"):$(".modal-component h2").removeClass("scrolling")}),$(".open-troubleshooting-modal").off("click.openTroubleshootingModal").on("click.openTroubleshootingModal",function(b){return b.preventDefault(),a.adobeAnalytics.pages.troubleshooting.beginButtonClick(),c.openPopup(),!1}),"true"===a.util.loadPageVar("openOnLoad")&&c.openPopup()},c.performSpeedTest=function(){SomApi.account=k.SpeedOfMeAccount,SomApi.domainName=k.SpeedOfMeDomain,SomApi.onTestCompleted=c.onTestCompleted,SomApi.onError=c.onError,SomApi.onProgress=c.onProgress,SomApi.config={sustainTime:o.accuracy,testServerEnabled:o.findTestServer,userInfoEnabled:o.getUserInfo,latencyTestEnabled:o.doLatencyTest,uploadTestEnabled:o.doUploadTest,progress:{enabled:o.progressEnabled,verbose:o.progressVerbose}},b=setTimeout(function(){c.onError()},12e4),SomApi.startTest()},c.onTestCompleted=function(d){c.speedData(d),c.testCompleted(!0),$(".speed-test-preloader").hide(),a.generalAccordian(),p.speedTestResult.push(d),clearTimeout(b)},c.onError=function(a){$(".speed-test-preloader").hide(),c.serverError([{code:"ERROR_DEFAULT"}]),c.insertNewCard("END_SERVICE_ERROR")},c.onProgress=function(a){},c.apiInit=function(){c.createLoaderCard();var a=$.ajax({url:"/bin/belong/customer/troubleshooting/init",timeout:6e4});a.done(function(a){for(var b=0;b<a.plans.length;b++)if("ACTIVE"===a.plans[b].planStatus){c.troubleshootingData(a.plans[b]);break}c.serviceData(a)}),a.fail(function(a){c.serverError(a)}),a.always(function(){c.cards.remove(function(a){return"loader"===a.type})})},c.determineStartCard=function(){var a=c.troubleshootingData();return c.planType=a.planType,"NBN"===a.planType?(n=1,k.nbnStartCard):(n=0,k.adslStartCard)},c.customSteps=function(b){switch(b){case"modem-details":a.ajax("/bin/belong/customer/modemDetails",{}).then(function(a){a.success&&($(".custom-step-username").text(a.username),$(".custom-step-password").text(a.password))},function(){$(".custom-step-username").text("your username"),$(".custom-step-password").text("your password")})}},c.createQuestionCard=function(a){var b=a;b.checkedOption=ko.observable(""),b.active=ko.observable(!0),c.cards.push(b)},c.createInstructionCard=function(a){var b=a,d=0;b.checkedOption=ko.observable(""),b.instructionState=ko.observable("start"),b.active=ko.observable(!0),c.testCompleted(!1),c.cards.push(b),d=r.isEthernetAvaiable?1:0,b.instructionState("steps"),$(".steps-card-container:visible").hasClass("slider-activated")?setTimeout(function(){$(".steps-card-container").removeClass("invisible")},200):$(".steps-card-container:visible").flexslider({animationLoop:!1,slideShow:!1,startAt:d,slideshow:!1,directionNav:!0,start:function(a){$(".step-content").css("min-height","250px"),$(".step-content").height($(".step").height()),$(".flex-next").addClass("ctab bc-blue c-white"),$(".flex-control-nav li a").html(""),$(".steps-card-container").addClass("slider-activated").removeClass("invisible"),"INSTRUCTION_RESET_MODEM_TECHNICOLOR"===b.id&&c.customSteps("modem-details"),0===d&&$(".flex-prev").hide()},before:function(b){$(".flex-continue").off("click.flexContinue").remove(),$(".flex-control-paging").is(":visible")||$(".flex-next").show(),$(".steps-card-container:visible .flex-control-nav a").removeClass("flex-done"),$(".steps-card-container:visible .flex-control-nav a").each(function(a){var c=$(this);if(c.addClass("flex-done"),a===b.animatingTo)return!1}),b.count-1===b.animatingTo&&($(".flex-direction-nav").append('<a class="flex-continue ctab bc-blue c-white" href="#">Continue</a>'),$(".flex-next").hide(),$(".flex-continue").off("click.flexContinue").on("click.flexContinue",function(){"SPEED"===r.issueType?c.insertNewCard("INFORMATION_OPTIMIZATION",b):"DROPOUT"===r.issueType?c.insertNewCard("QUESTION_IMPROVEMENT_ON_OPTIMISATION",b):"NO_CONNECTIVITY"===r.issueType&&("INSTRUCTION_RESET_MODEM_TECHNICOLOR"===a.id?c.insertNewCard("QUESTION_MODEM_GREEN",b):"INSTRUCTION_DEVICE_OPTIMIZATION"===a.id&&c.insertNewCard("QUESTION_ABLE_TO_BROWSE_INTERNET_THIRD",b))}))},after:function(a){0===a.currentSlide?$(".flex-prev").hide():$(".flex-control-paging").is(":visible")?$(".flex-prev").hide():$(".flex-prev").show()}})},c.createEndCard=function(a){var b=a;b.active=ko.observable(!0),b.buttonState=ko.observable(b.buttonState),c.cards.push(b)},c.createInformationCard=function(a){var b=a;b.active=ko.observable(!0),b.buttonState=ko.observable(b.buttonState),c.cards.push(b)},c.createCustomCard=function(b){var d=b;d.checkedOption=ko.observable(""),d.active=ko.observable(!0),d.customType=ko.observable(d.id),d.titleContent&&c.titleContent(d.titleContent),"CUSTOM_CONGESTION"===d.id&&(d.resultText=d.resultText.replace("$$reliefDate$$",q));var e=c.downloadGb+c.uploadGb;c.cards.push(d),$(".stacked-bar__download-indicator").css("width",parseInt(c.downloadGb/e*100)+"%"),$(".stacked-bar__upload-indicator").css("width",parseInt(c.uploadGb/e*100)+"%"),a.generalAccordian()},c.createLoaderCard=function(){var a={active:ko.observable(!0),type:"loader",id:"LOADER",checkedOption:ko.observable()};c.cards.push(a)},c.insertNewCard=function(b,e){function f(b){switch($.each(m,function(){this.id===b&&(h=this),this.id===c.currentCard()&&(l=this)}),null!==l&&(o.cardId=l.id,o.nextCardId=b,o.question=l.question?l.question:"",l.options&&$.each(l.options,function(){this.optionValue&&this.optionValue[n]===h.id&&(o.answer=this.optionLabel)}),c.cardsLog.push(o),k.enableDatabaseLog&&a.ajax("/bin/belong/customer/troubleshooting/log",o),a.adobeAnalytics.pages.troubleshooting.cardsLog(o)),h.type){case"question":c.createQuestionCard(h);break;case"instruction":c.createInstructionCard(h);break;case"end":c.createEndCard(h);break;case"information":c.createInformationCard(h);break;case"custom":c.createCustomCard(h)}}function g(a,b){var d=$(".troubleshooting-card:last-of-type");d.hide(),c.createLoaderCard();var e=$.ajax({url:a});e.done(function(a){b(a)}),e.fail(function(a){c.serverError([{code:"ERROR_DEFAULT"}]),c.insertNewCard("END_SERVICE_ERROR")}),e.always(function(){})}var h,i,j,l=null,o={};c.cards.removeAll(),e&&""!=e.service&&null!=e.service?$.each(d,function(){if(this.id===e.service)switch(i=this.url,j=this.id){case"SERVICE_USAGE":if("HFC"===c.troubleshootingData().broadbandTechType){c.insertNewCard("FAQ_TEMP",this);break}g(i,function(a){"ACTIVE"==a.serviceStatus.toUpperCase()&&(parseInt(a.downloadUsage)+parseInt(a.uploadUsage)>a.serviceSize&&!a.unlimitedData?(b="SHAPING_DONE",c.downloadGb=parseInt(a.downloadUsage),c.uploadGb=parseInt(a.uploadUsage),p.customerIsShaped=!0,f(b)):"NBN"!=c.troubleshootingData().planType?(p.customerIsShaped=!1,b="CHECK_CONGESTION",$.each(d,function(a,d){d.id===b&&c.insertNewCard(b,d)})):c.insertNewCard("FAQ_TEMP",this))});break;case"SPEED_INFO":g(i,function(d){var g,h,i=c.troubleshootingData(),j=d.cableLength>1e3?(d.cableLength/1e3).toFixed(2)+" kms":d.cableLength+" metres";p.planName=d.planName,null!=d&&("NBN"==i.planType?(g=d.downloadSpeed+"Mbps",h=d.uploadSpeed+"Mbps",c.titleContent(e.speedInfoNBN),a.util.koReplacePlaceholderCopy(c.titleContent,[{placeholder:"$$planName$$",replacement:d.planName},{placeholder:"$$planSpeed$$",replacement:d.currentPlan.planSpeed},{placeholder:"$$downloadSpeed$$",replacement:g},{placeholder:"$$uploadSpeed$$",replacement:h}])):(g=parseInt(d.downloadSpeed)/1e3+"Mbps",h=parseInt(d.uploadSpeed)/1e3+"Mbps",c.titleContent(e.speedInfoADSL),a.util.koReplacePlaceholderCopy(c.titleContent,[{placeholder:"$$planName$$",replacement:d.planName},{placeholder:"$$cableLength$$",replacement:j},{placeholder:"$$downloadSpeed$$",replacement:g}]),p.cableLength=j,c.performSpeedTest())),f(b)});break;case"CHECK_CONGESTION":g(i,function(a){if(a)if(a.congested){var b=new Date(a.forecastDSLAMReliefDate);p.areaCongested=!0,q=b.toLocaleDateString(),f("CUSTOM_CONGESTION")}else p.areaCongested=!1,f("SPEED_TEST_START_PAGE")});break;case"SUBMIT_CASE":var h={note:"",issue:r.issueType,completedStep:"",details:""};$.each(c.cardsLog(),function(){h.details+="Q: "+this.cardId+" ("+this.question+") | A: "+this.nextCardId+" ("+this.answer+") | "}),h.contactFlag=!0,h.contactType="",h.contactTime="",h.details=h.details.substring(0,h.details.length-1),h.details=JSON.stringify(p)+" | "+h.details;var k=$(".troubleshooting-card:last-of-type");k.hide(),c.createLoaderCard(),a.ajax(i,h).then(function(b){b.success&&(c.titleContent(b.caseNumber),a.adobeAnalytics.pages.troubleshooting.submitCase(h),f("CUSTOM_SUBMIT_CASE"))},function(){c.serverError([{code:"ERROR_DEFAULT"}]),c.insertNewCard("END_SERVICE_ERROR")})}}):"INFORMATION_SPEED_ISOLATION_TEST_CONNECT_VIA_ETHERNET"!==b||r.isEthernetAvaiable?"QUESTION__DROP_OUT_IS_ETHERNET_PORT_AVAILABLE"===b&&"NO_CONNECTIVITY"===r.issueType?c.insertNewCard("QUESTION_MODEM_STABLE_GREEN"):f(b):$.each(m,function(a,b){"INFORMATION_SPEED_ISOLATION_TEST_CONNECT_VIA_ETHERNET"===this.id&&(h=this,c.insertNewCard("INSTRUCTION_DEVICE_OPTIMIZATION",h))})},c.updateCardsLog=function(){},c.renderCard=function(){var a=$(".troubleshooting-card:last-of-type");"loader"!==c.currentCardObj().type&&($.each(c.cards(),function(a){this.active(!1),a+1===c.cards().length&&(this.active(!0),c.currentCard(this.id),k.keepLastChecked||"end"===this.type||"contact"===this.type||"information"===this.type||"custom"===this.type||this.checkedOption(""),"instruction"===this.type&&this.instructionState("start")),a+2===c.cards().length&&"instruction"===this.type&&this.instructionState("end")}),a.velocity("scroll",{container:$(".modal-component-body"),delay:100,duration:600,complete:function(){setTimeout(function(){a.find(".card-loader").hide(),a.find(".card-container").removeClass("hidden")},200)}}))},c.continueButton=function(a,b){var d;$.each(c.cards(),function(){this.id===c.currentCard()&&(d=this.service,"undefined"!=typeof this.showTooltip&&this.showTooltip()&&this.openTooltip())});var e=c.nextAnswer();c.nextAnswer(""),c.insertNewCard(e,this)},c.optionSelected=function(a){if(k.forceContinue)c.nextAnswer(a.optionValue[n]);else if("QUESTION_IS_ETHERNET_PORT_AVAILABLE"!==c.currentCardObj().id&&"QUESTION__DROP_OUT_IS_ETHERNET_PORT_AVAILABLE"!==c.currentCardObj().id&&"QUESTION_CONNECTION_MODE"!==c.currentCardObj().id||("Yes"===a.optionLabel||a.optionLabel.toLowerCase().indexOf("ethernet")>=0?r.isEthernetAvaiable=!0:r.isEthernetAvaiable=!1),"QUESTION_ADSL_LANDING"===c.currentCardObj().id?r.issueType=a.optionId:"QUESTION_NBN_LANDING"===c.currentCardObj().id&&(r.issueType=a.optionId),"QUESTION_CUSTOM_MODEM_TYPE"===c.currentCardObj().id&&(a.optionLabel.toLowerCase().indexOf("Sagemcom")||a.optionLabel.toLowerCase().indexOf("Technicolour")>=0?r.supportedModemType=!0:r.supportedModemType=!1),"MODEM_POWER_WIFI_ETHERNET_LIGHT_ON"===c.currentCardObj().id&&"No"===a.optionLabel){var b;$.each(m,function(a,c){"MODEM_POWER_WIFI_ETHERNET_LIGHT_ON"===this.id&&(b=c)}),r.supportedModemType?c.insertNewCard("INFORMATION_MODEM_POWER_WIFI_ETHERNET_LIGHT_ON_BELONG_MODEM",b):c.insertNewCard("INFORMATION_MODEM_POWER_WIFI_ETHERNET_LIGHT_ON_OTHER_MODEM",b)}else c.insertNewCard(a.optionValue[n],a)},c.customAction=function(a,b){var a,d=$(b.target).data("value");d.indexOf(".com")>0?window.location.href=d:($.each(m,function(b,c){c.id===d&&(a=c)}),"$$close$$"===d?c.closePopup():c.insertNewCard(d,a))},c.openPopup=function(){$.magnificPopup.open({items:{src:"#online-troubleshooting-modal",type:"inline"},showCloseBtn:!0,closeOnBgClick:!1,overflowY:"hidden",callbacks:{close:function(){window.location.replace(k.redirectOnCloseUrl)}}})},c.closePopup=function(){var a=navigator.userAgent,b=window.navigator.standalone,c=a.match(/iPhone|iPad|iPod/i),d=(a.match(/Android/i),a.match(/IEMobile/i),!!window.chrome,/safari/.test(a.toLowerCase()));if(k.redirectOnClose){if(!c||b||d)return window.onbeforeunload=null,window.location.replace(k.redirectOnCloseUrl),!1;$.magnificPopup.proto.close.call(this)}else $.magnificPopup.proto.close.call(this)}}}}())}(BELONG),function(a){
"use strict";a.outageCheck=a.outageCheck||{},$.extend(a.outageCheck,function(){return{init:function(){if(0===$("#cmp-outage-check").length)return!1;var a=new this.viewModel;ko.applyBindings(a,document.getElementById("cmp-outage-check")),a.init()},viewModel:function(){var b=this;b.util=a.util,b.isCheckingOutage=ko.observable(!0),b.outagesExist=ko.observable(""),b.serverError=ko.observableArray([]),b.broadbandPlan=ko.observable(""),b.serviceExist=ko.observable(!1),b.outageStartTime=ko.observable(""),b.outageEstimateResolveTime=ko.observable(""),b.outageServerError=ko.observable(!1),b.scheduledMaintenance=ko.computed(function(){var a="",c="";return b.outageStartTime()&&(a=b.util.formatter.dateString(b.outageStartTime(),"DD-MM-YYYY HH:mm a")),b.outageEstimateResolveTime()&&(c=b.util.formatter.dateString(b.outageEstimateResolveTime(),"DD-MM-YYYY HH:mm a")),a+" - "+c}),ko.postbox.subscribe("serviceData",function(c){b.isCheckingOutage(!1),c.serviceExists&&b.serviceExist(c.serviceExists),c.outage?(b.outagesExist(!0),b.outageStartTime(c.outage.startTimestamp),b.outageEstimateResolveTime(c.outage.etrTimestamp),b.outageServerError(c.outage.error),a.adobeAnalytics.pages.troubleshooting.submitOutage(c.outage)):a.adobeAnalytics.pages.troubleshooting.submitOutage(!1)}),ko.postbox.subscribe("troubleshootingData",function(c){b.broadbandPlan(c.planType),a.adobeAnalytics.pages.troubleshooting.loadPlanData(!0,!1),$(".troubleshooting-cta-container").removeClass("hidden")}),ko.postbox.subscribe("serverError",function(c){var d=c.responseJSON;"timeout"===c.statusText?b.serverError([{code:"ERROR_TIMEOUT"}]):void 0!==d&&void 0!==d.errors?b.serverError(d.errors):b.serverError([{code:"ERROR_DEFAULT"}]);var e=b.serverError()[0].code;b.isCheckingOutage(!1),a.adobeAnalytics.pages.troubleshooting.initData(!1,e)}),b.serviceActive=ko.computed(function(){return!!b.broadbandPlan()}),b.init=function(){}}}}())}(BELONG),function(a){"use strict";a.usage=a.usage||{},$.extend(a.usage,function(){var b;return{init:function(){if(b=this,0===$("#cmp-usage").length)return!1;var a=new b.ViewModel;ko.applyBindings(a,document.getElementById("cmp-usage")),a.init()},ViewModel:function(){var b=this,c="/bin/belong/auth/customer/usage",d=USAGE_CMS_DATA.UPSELL_THRESHOLD,e=USAGE_CMS_DATA.LARGEST_GIGS;b.viewState={isLoading:ko.observable(!0),serverError:ko.observable(!1),noShapeError:ko.observable(!1)},b.usage=ko.observable(),b.init=function(){b.apiRetrieve()},b.apiRetrieve=function(){var d=$.get(c);d.done(function(a){b.parseUsageData(a)}),d.fail(function(c){var d=c.responseJSON;return d.errors[0]&&"manageService.usageUnavailable"===d.errors[0].code?void b.viewState.noShapeError(!0):void(void 0!==d&&"INACTIVE"===d.serviceStatus&&a.targetMobileApp.isApp()?(b.viewState.serverError(!1),window.location="/account/order-tracking"):b.viewState.serverError(!0))}),d.always(function(){b.viewState.isLoading(!1)})},b.parseUsageData=function(c){var f={daysRemaining:c.daysRemaining,serviceSize:c.unlimitedData?-1:c.serviceSize},g=moment().endOf("month").date(),h=g-f.daysRemaining,i=c.downloadUsage+c.uploadUsage,j=i-f.serviceSize;f.unlimited=c.unlimitedData,f.upsell=f.serviceSize-i<d&&f.serviceSize!==e,f.overLimit=i>f.serviceSize,f.summary=ko.observable(""),f.unlimited?f.summary(USAGE_CMS_DATA.COPY.unlimitedSummary):f.overLimit?(f.summary(USAGE_CMS_DATA.COPY.dataExceeded),f.upsell&&f.summary(f.summary()+" "+USAGE_CMS_DATA.COPY.dataExceededUpsell)):(f.summary(USAGE_CMS_DATA.COPY.dataSummary),f.upsell&&f.summary(f.summary()+" "+USAGE_CMS_DATA.COPY.dataUpsell)),f.downloadGb=c.downloadUsage+"GB",f.uploadGb=c.uploadUsage+"GB",f.totalGb=f.serviceSize+"GB",f.remainingGb=f.serviceSize-i+"GB",f.usedGb=i+"GB",f.exceededGb=j+"GB",f.downloadPercent=c.downloadUsage/f.serviceSize*100+"%",f.uploadPercent=c.uploadUsage/f.serviceSize*100+"%",f.exceededPercent="0%",f.overLimit&&(f.remainingGb="0 GB",f.downloadPercent=c.downloadUsage/i*c.serviceSize/i*100+"%",f.uploadPercent=c.uploadUsage/i*c.serviceSize/i*100+"%",f.exceededPercent=j/i*100+"%"),f.usedDays=1!==h?h+" days":"1 day",f.remainingDays=1!==f.daysRemaining?f.daysRemaining+" days":"1 day",f.daysPercent=h/g*100+"%",a.util.koReplacePlaceholderCopy(f.summary,[{placeholder:"$$usedGb$$",replacement:f.usedGb},{placeholder:"$$remainingGb$$",replacement:f.remainingGb},{placeholder:"$$totalGb$$",replacement:f.totalGb},{placeholder:"$$remainingDays$$",replacement:f.remainingDays},{placeholder:"$$exceededGb$$",replacement:f.exceededGb}]),b.usage(f)}}}}())}(BELONG),function(a){a.adobeAnalytics=function(){var b;return{init:function(){b=this},initDataLayer:function(){a.dataLayer=a.dataLayer||{},a.GD=a.GD||{},a.dataLayer.isLoggedIn=a.GD.isLoggedIn,a.dataLayer.isCustomer=a.GD.isCustomer,a.dataLayer.isMobo=a.GD.isMobo,a.dataLayer.isAgent=a.GD.isAgent,a.dataLayer.customerID=a.GD.utilibillid},customDataEvent:function(a){b.methods.fireDtmEvent({eventType:a.eventType,eventCategory:a.eventCategory||null,eventAction:a.eventAction||null,eventLabel:a.eventLabel||null,eventError:a.eventError||null,eventData:a.eventData||null})},events:{logoLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"logoLinkClick",eventCategory:"Logo",eventAction:"Link click",eventLabel:a})},headerLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"headerLinkClick",eventCategory:"Header-Menu",eventAction:"Link click",eventLabel:a})},callLinkClick:function(){b.methods.fireDtmEvent({eventType:"callLinkClick",eventCategory:"OAHP-Click-To-Call",eventAction:"Link click",eventLabel:"Call"})},buttonBarLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"buttonBarLinkClick",eventCategory:"OAHP-Button-Bar",eventAction:"Link click",eventLabel:a})},bottomContentLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"bottomContentLinkClick",eventCategory:"OAHP-Bottom-Content",eventAction:"Link click",eventLabel:a})},carouselLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"carouselLinkClick",eventCategory:"OAHP-Carousel",eventAction:"Link click",eventLabel:a})},productListCisLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"productListCisLinkClick",eventCategory:"Product-List-CIS",eventAction:"Link click",eventLabel:a})},productListChooseLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"productListChooseLinkClick",eventCategory:"Product-List-Choose",eventAction:"Link click",eventLabel:a})},featureListLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"featureListLinkClick",eventCategory:"Product-Feature-List",eventAction:"Link click",eventLabel:a})},tryAnotherAddressLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"tryAnotherAddressLinkClick",eventCategory:"SQ-Try-Another-Addr",eventAction:"Link click",eventLabel:a})},productAccordianLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"productAccordianLinkClick",eventCategory:"Product-Accordion",eventAction:"Link click",eventLabel:a})},productFeatureBelongVoiceExpand:function(a){b.methods.fireDtmEvent({eventType:"productFeatureBelongVoiceExpand",eventCategory:"Product-Feature-Belong-Voice",eventAction:"Expand",eventLabel:a})},tooltipClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"tooltipClick",eventCategory:"Tooltip",eventAction:"Link click",eventLabel:a})},footerSocialLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"footerSocialLinkClick",eventCategory:"Footer-Social",eventAction:"Outbound link click",eventLabel:a})},footerMenuLinkClick:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"footerMenuLinkClick",eventCategory:"Footer-Menu",eventAction:"Link click",eventLabel:a})},campaignHeaderCtaLinkClick:function(a,c,d){d=d||"",b.methods.fireDtmEvent({eventType:"campaignHeaderCtaLinkClick",eventCategory:c,eventAction:a,eventLabel:d})},stepsCtaLinkClick:function(a,c,d){d=d||"",b.methods.fireDtmEvent({eventType:"stepsCtaLinkClick",eventCategory:c,eventAction:a,eventLabel:d})},aboutUsTabClick:function(a,c,d){d=d||"",b.methods.fireDtmEvent({eventType:"aboutUsTabClick",eventCategory:c,eventAction:a,eventLabel:d})},shareOffer:function(a,c){b.methods.fireDtmEvent({eventType:"shareOffer",eventCategory:"Offers IAF",eventAction:"Chat",eventLabel:a,virtualPage:"/virtual/offers-iaf/",promoCode:c})}},global:{privateBrowsing:function(a){b.methods.fireDtmEvent({eventType:"globalPrivateBrowsing",eventCategory:"Private-Browsing",eventAction:"Click",eventLabel:a.toUpperCase()+"-Private Browsing",virtualPage:"/virtual/private-browsing/"+a+"-private-browsing.html"})},revealPhoneNumber:function(a){b.methods.fireDtmEvent({eventType:"globalRevealPhoneNumber",eventCategory:"Reveal-Phone-Number",eventAction:"Click",eventLabel:a.toUpperCase()+"-Reveal Phone Number",virtualPage:"/virtual/reveal-phone-number/"+a+".html"})},sq:{openModal:function(){b.methods.fireDtmEvent({eventType:"globalSqOpenModal",eventCategory:"SQ-Open-Modal",eventAction:"Select",eventLabel:"Open modal",virtualPage:"/virtual/sq/sq-modal-open.html"})},check:function(a,c,d){b.methods.fireDtmEvent({eventType:"globalSqCheck",eventCategory:"SQ-Check",eventAction:"Click",eventLabel:a.toUpperCase()+"-Check if you can Belong-"+c,virtualPage:"/virtual/sq-check/"+a+"-check-if-you-can-belong-"+c+".html",eventPage:a,sqAttempt:c,sqType:d})},success:function(a,c,d,e){b.methods.fireDtmEvent({eventType:"globalSqSuccess",eventCategory:"SQ-Success",eventAction:"Click",eventLabel:a+"-"+d+"-Check if you can Belong",virtualPage:"/virtual/sq-success/"+a+"-"+d+"-check-if-you-can-belong.html",page:a,serviceClass:c,product:d,sqType:e})},landlineOption:function(a,c,d){b.methods.fireDtmEvent({eventType:"globalSqLandlineOption",eventCategory:"Landline",eventAction:"Click",eventLabel:a+"-"+c,virtualPage:"/virtual/landline/"+a+"-"+c.toLowerCase()+".html",page:a,option:c,sqType:d})},selectAddress:function(a,c){b.methods.fireDtmEvent({eventType:"globalSqSelectAddress",eventCategory:"SQ-Select-Address",eventAction:"Select",eventLabel:"Please select an address",virtualPage:"/virtual/sq/please-select-an-address.html",addressID:a,sqType:c})},structuredCantFindAddress:function(){b.methods.fireDtmEvent({eventType:"globalSqStructuredCantFindAddress",eventCategory:"SQ-Cant-Find-Address",eventAction:"Click",eventLabel:"Can't find it?",virtualPage:"/virtual/sq/cant-find-address.html"})},structuredClicksOnTab:function(a){b.methods.fireDtmEvent({eventType:"globalSqStructuredClicksOnTab",eventCategory:"SQ-Clicks-On-Structured-Address-Tab",eventAction:"Click",eventLabel:"Clicks on "+a,virtualPage:"/virtual/sq/structured-tab-"+a.toLowerCase()+".html",tab:a})},structuredFoundListOfRefinedAddresses:function(a){b.methods.fireDtmEvent({eventType:"globalSqStructuredFoundListOfRefinedAddresses",eventCategory:"SQ-Structured-Found-Refined-List",eventAction:"Load",eventLabel:a+" user sees refined addresses",virtualPage:"/virtual/sq/structured-refined-"+a.toLowerCase()+".html",type:a})},structuredFoundMatch:function(a){b.methods.fireDtmEvent({eventType:"globalSqStructuredFoundMatch",eventCategory:"SQ-Structured-Found-Matched-Address",eventAction:"Click",eventLabel:"User sees refined addresses",virtualPage:"/virtual/sq/structured-found-address-"+a.toLowerCase()+".html",type:a})},structuredPropertyNameEntered:function(a){b.methods.fireDtmEvent({eventType:"globalSqStructuredPropertyNameEntered",eventCategory:"SQ-Structured-Property-Name-Entered",eventAction:"Input",eventLabel:"User enters property name",virtualPage:"/virtual/sq/SQ-Structured-Property-Name-Entered.html",name:a})},findOutMoreOrJoinNow:function(a,c,d,e){b.methods.fireDtmEvent({eventType:"globalSqFindOutMoreOrJoinNow",eventCategory:c,eventAction:"Link click",eventLabel:a+"-"+c,virtualPage:"/virtual/"+c.toLowerCase()+"/"+a+"-"+c.toLowerCase()+".html",page:a,serviceClass:d,sqType:e})},failFailureMessages:function(a,c,d,e){b.methods.fireDtmEvent({eventType:"globalSqFailFailureMessages",eventCategory:"SQ-Failure",eventAction:"Click",eventLabel:c+"-"+d+"-"+a,virtualPage:"/virtual/sq-failure/"+c+"-"+d+"-"+a+".html",errorCode:a,page:c,product:d,sqType:e})},failExperionError:function(a,c){b.methods.fireDtmEvent({eventType:"globalSqFailExperionError",eventCategory:"Experion-Error",eventAction:"Click",eventLabel:a+"-Experion error",virtualPage:"/virtual/experion-error/"+a+"-experion-error.html",page:a,sqType:c})},closeModal:function(a){b.methods.fireDtmEvent({eventType:"analytics-tracksqGeneric",eventCategory:"SQ-Close-Modal",eventAction:a,eventLabel:"Close Modal",virtualPage:"/virtual/sq/close-modal.html"})},selectAddressFromList:function(a,c){b.methods.fireDtmEvent({eventType:"analytics-tracksqGeneric",eventCategory:"SQ-Choose-Address-Suggestion",eventAction:"Option "+a+" of "+c,eventLabel:"Choose Address Suggestion",virtualPage:"/virtual/sq/choose-suggested-address.html"})},sqAddressClick:function(a){b.methods.fireDtmEvent({eventType:"analytics-tracksqGeneric",eventCategory:"SQ-Click-Address-Field",eventAction:"Click "+a,eventLabel:"Click in Address Field",virtualPage:"/virtual/sq/click-in-address-field.html"})}},eoi:{eoiSubmission:function(a,c,d,e){b.methods.fireDtmEvent({eventType:"globalEoiEoiForm",eventCategory:"EOI",eventAction:"Click",eventLabel:a+"-"+c,virtualPage:"/virtual/eoi/"+a+"-"+c+".html",page:a,eoiMessage:c,eoiReason:d,freeTextAddress:e})}},agent:{backToMe:function(){b.methods.fireDtmEvent({eventType:"globalAgentBackToMe",eventCategory:"Agent",eventAction:"Click",eventLabel:"Change back to me"})},mobo:function(){b.methods.fireDtmEvent({eventType:"globalAgentMobo",eventCategory:"Agent",eventAction:"Click",eventLabel:"Select and log in"})}}},pages:{product:{faq:function(a,c){b.methods.fireDtmEvent({eventType:"productFaq",eventCategory:"Product FAQ",eventAction:"Click",eventLabel:c+" - "+a})}},join:{productSelection:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinProductSelection",eventCategory:"Product",eventAction:"Click",eventLabel:"Join-Product",virtualPage:"/virtual/product/join-product",plan:a})},productPreSelection:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinProductPreSelection",eventCategory:"Product",eventAction:"PreSelected",eventLabel:"Join-Product",virtualPage:"/virtual/product/preselected-join-product",plan:a})},addSpeedBoost25:function(){b.methods.fireDtmEvent({eventType:"pagesJoinAddSpeedBoost25",eventCategory:"SpeedBoost-Add",eventAction:"Click",eventLabel:"Join-SB-25",virtualPage:"/virtual/speedboost-add/join-sb-25.html"})},addSpeedBoost100:function(){b.methods.fireDtmEvent({eventType:"pagesJoinAddSpeedBoost100",eventCategory:"SpeedBoost-Add",eventAction:"Click",eventLabel:"Join-SB-100",virtualPage:"/virtual/speedboost-add/join-sb-100.html"})},addVoice:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinAddVoice",eventCategory:"Voice-Add",eventAction:"Click",eventLabel:"Join-Voice-"+a,virtualPage:"/virtual/voice-add/join-voice-"+a+".html",option:a})},checkContract:function(){b.methods.fireDtmEvent({eventType:"pagesJoinCheckContract",eventCategory:"Contract",eventAction:"Click",eventLabel:"Join-Contract",virtualPage:"/virtual/contract/join-contract.html"})},promoApplied:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinPromoApplied",eventCategory:"Promo",eventAction:"Click",eventLabel:"Apply",virtualPage:"/virtual/Promo/apply",promoCode:a})},promoAppliedStaffDiscount:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinPromoAppliedStaffDiscount",eventCategory:"Staff Promo",eventAction:"Click",eventLabel:"Continue",virtualPage:"/virtual/staff-promo/continue",promoCode:a})},steps:function(a,c,d){b.methods.fireDtmEvent({eventType:"pagesJoinSteps",eventCategory:"Join",eventAction:"Click",eventLabel:a,virtualPage:"/virtual/join/"+c,plan:d})},confirmYourOrder:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinConfirmYourOrder",eventCategory:"Join",eventAction:"Click",eventLabel:"3 - Confirm your Order",virtualPage:"/virtual/join/3-confirm-your-order.html",serviceClass:a.serviceClass,speedBoostStatus:a.speedBoostStatus,promoCode:a.promoCode,planSizeType:a.planSize+"-"+a.planType,withSpeedBoost:a.withSpeedBoost,withContract:a.withContract,today:moment().format("DD/MM/YYYY"),orderType:a.orderType,userid:a.userid,planSpeed:a.planSpeed,voicePlan:a.voicePlan})},errorEmail:function(a,c){b.methods.fireDtmEvent({eventType:"pagesJoinErrorEmail",eventCategory:"Join: Email Error",eventAction:"Click",eventLabel:a+" - "+c,virtualPage:"/virtual/join-confirm-email-error/"+a+"-"+c+".html",errorCode:a,errorMsg:c})},errorPersonalDetails:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinErrorPersonalDetails",eventCategory:"Join: Personal Details Error",eventAction:"Click",eventLabel:a,virtualPage:"/virtual/join-personal-details-error/"+a+".html",errorMsg:a})},errorPayment:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinErrorPayment",eventCategory:"Join: Payment Error",eventAction:"Click",eventLabel:a,virtualPage:"/virtual/join-payment-error/"+a+".html",errorMsg:a})},errorOrder:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinErrorOrder",eventCategory:"Join: Order Error",eventAction:"Click",eventLabel:a,virtualPage:"/virtual/join-order-error/"+a+".html",errorMsg:a})},errorProductSelection:function(a){b.methods.fireDtmEvent({eventType:"pagesJoinErrorProductSelection",eventCategory:"Join: Product Selection Error",eventAction:"Click",eventLabel:a,virtualPage:"/virtual/join-product-selection-error/"+a+".html",errorMsg:a})},trackPayment:function(a){b.methods.fireDtmEvent({eventType:"pageJoinPayAndConfirm",eventCategory:"Join: Confirm order and pay",eventAction:"Click",eventLabel:a})}},payment:{payNowRedirect:function(a){a=a||"",b.methods.fireDtmEvent({eventType:"paymentPayNowRedirect",eventCategory:"Auto-Payment",eventAction:"Link click",eventLabel:a})},payLaterClick:function(){b.methods.fireDtmEvent({eventType:"paymentPayLaterClick",eventCategory:"Auto-Payment",eventAction:"Click"})}},troubleshooting:{cardsLog:function(a){b.methods.fireDtmEvent({eventType:"troubleshootingCardsLog",eventCategory:"Troubleshooting-Cards",eventAction:"Card select",cardId:a.cardId,nextCardId:a.nextCardId,question:a.question,answer:a.answer})},beginButtonClick:function(){b.methods.fireDtmEvent({eventType:"troubleshootingBegin",eventCategory:"Troubleshooting-Cards",eventAction:"Click"})},loadPlanData:function(a,c){b.methods.fireDtmEvent({eventType:"troubleshootingPlanData",eventCategory:"Troubleshooting-Cards",eventAction:"Load",success:a,errorCode:c})},submitCase:function(a){a.contactTime=a.contactTime||"",a.contactType=a.contactType||"",b.methods.fireDtmEvent({eventType:"troubleshootingSubmitCase",eventCategory:"Troubleshooting-Cards",eventAction:"Card submit",contactTime:a.contactTime,contactType:a.contactType,note:a.note,issue:a.issue,details:a.details})},initData:function(){b.methods.fireDtmEvent({eventType:"troubleshootingCardsLog",eventCategory:"Troubleshooting-Cards",eventAction:"Click"})},submitOutage:function(a){a?a.error?b.methods.fireDtmEvent({eventType:"troubleshootingOutagesChecking",eventCategory:"Troubleshooting-Outages",eventAction:"Blackhawk Error"}):b.methods.fireDtmEvent({eventType:"troubleshootingOutagesChecking",eventCategory:"Troubleshooting-Outages",eventAction:"Outages detected"}):b.methods.fireDtmEvent({eventType:"troubleshootingOutagesChecking",eventCategory:"Troubleshooting-Outages",eventAction:"No Outage"})}},callbackForm:{submit:function(a){b.methods.fireDtmEvent({eventType:"callbackSubmit",eventCategory:"Callback Submit",eventAction:"Click",callbackTime:a})}},leadGenerationForm:{submit:function(a){b.methods.fireDtmEvent({eventType:"leadGenerationSubmit",eventCategory:"Lead Generation Submit",eventAction:"Click",leadType:a.leadType})}},manageService:{display:function(a){b.methods.fireDtmEvent({eventType:"manageServiceDisplay",eventCategory:"Manage-Service-Cards",eventAction:"Load",oldPlan:a.oldPlan})},review:function(a){b.methods.fireDtmEvent({eventType:"manageServiceReview",eventCategory:"Manage-Service-Cards",eventAction:"Click",updateAction:a.updateAction,oldPlan:a.oldPlan})},update:function(a){b.methods.fireDtmEvent({eventType:"manageServiceUpdate",eventCategory:"Manage-Service-Cards",eventAction:"Click",oldPlan:a.oldPlan,newPlan:a.newPlan})}},managePayment:{display:function(){b.methods.fireDtmEvent({eventType:"paymentDetailsDisplay",eventCategory:"Payment-Details-Card",eventAction:"Load"})},retryPayment:function(a,c){b.methods.fireDtmEvent({eventType:"paymentDetailsRetry",eventCategory:"Payment-Details-Card",eventAction:"Click",success:a,errorCode:c})},updatePayment:function(a,c){b.methods.fireDtmEvent({eventType:"paymentDetailsUpdate",eventCategory:"Payment-Details-Card",eventAction:"Click",success:a,errorCode:c})},prepaid:function(a,c){b.methods.fireDtmEvent({eventType:"paymentDetailsPrepaid",eventCategory:"Payment-Details-Card",eventAction:"Click",success:a,errorCode:c})},managePaymentDownloadInvoice:function(a){b.methods.fireDtmEvent({eventType:"managePaymentDownloadInvoice",eventCategory:"Download-Invoice",eventAction:"Click",eventLabel:a})}},personalDetails:{display:function(){b.methods.fireDtmEvent({eventType:"personalDetailsDisplay",eventCategory:"Personal-Details-Card",eventAction:"Load"})},editEmail:function(){b.methods.fireDtmEvent({eventType:"personalDetailsEditEmail",eventCategory:"Personal-Details-Card",eventAction:"Click"})},editMobile:function(){b.methods.fireDtmEvent({eventType:"personalDetailsEditMobile",eventCategory:"Personal-Details-Card",eventAction:"Click"})},editPassword:function(){b.methods.fireDtmEvent({eventType:"personalDetailsEditPassword",eventCategory:"Personal-Details-Card",eventAction:"Click"})},updateEmail:function(){b.methods.fireDtmEvent({eventType:"personalDetailsUpdateEmail",eventCategory:"Personal-Details-Card",eventAction:"Click"})},updateMobile:function(){b.methods.fireDtmEvent({eventType:"personalDetailsUpdateMobile",eventCategory:"Personal-Details-Card",eventAction:"Click"})},updatePassword:function(){b.methods.fireDtmEvent({eventType:"personalDetailsUpdatePassword",eventCategory:"Personal-Details-Card",eventAction:"Click"})}},productBuilder:{checkAddressClick:function(a,c){b.methods.fireDtmEvent({eventType:"productBuilderCheckAddressClick",eventCategory:"Product-Builder",eventAction:"Click",productModel:a,sqDone:c.sqDone,sqOrderType:c.sqOrderType,sqTechType:c.sqTechType})},closeSq:function(a,c){b.methods.fireDtmEvent({eventType:"productBuilderCloseSq",eventCategory:"Product-Builder",eventAction:"None",productModel:a,sqDone:c.sqDone,sqOrderType:c.sqOrderType,sqTechType:c.sqTechType})},productBuilderComplete:function(a,c,d){b.methods.fireDtmEvent({eventType:a,eventCategory:"Product-Builder",eventAction:"Click",productModel:c,sqDone:d.sqDone,sqOrderType:d.sqOrderType,sqTechType:d.sqTechType})},promoClick:function(a,c){b.methods.fireDtmEvent({eventType:"productBuilderJoinWithPromo",eventCategory:"Product-Builder",eventAction:"Click",productModel:a,sqDone:c.sqDone,sqOrderType:c.sqOrderType,sqTechType:c.sqTechType})},planSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderPlanSelection",eventCategory:"Product-Builder",eventAction:"Click",planSize:a})},planModalOpen:function(){b.methods.fireDtmEvent({eventType:"productBuilderPlanModalOpen",eventCategory:"Product-Builder",eventAction:"Click"})},planModalClose:function(){b.methods.fireDtmEvent({eventType:"productBuilderPlanClose",eventCategory:"Product-Builder",eventAction:"Click"})},contractSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderContractSelection",eventCategory:"Product-Builder",eventAction:"Click",contractOption:a})},contractModalOpen:function(){b.methods.fireDtmEvent({eventType:"productBuilderContractModalOpen",eventCategory:"Product-Builder",eventAction:"Click"})},contractModalClose:function(){b.methods.fireDtmEvent({eventType:"productBuilderContractModalClose",eventCategory:"Product-Builder",eventAction:"Click"})},speedboostSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderSpeedboostSelection",eventCategory:"Product-Builder",eventAction:"Click",speedboostOption:a})},speedboostModalOpen:function(){b.methods.fireDtmEvent({eventType:"productBuilderSpeedboostModalOpen",eventCategory:"Product-Builder",eventAction:"Click"})},speedboostModalSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderSpeedboostModalSelection",eventCategory:"Product-Builder",eventAction:"Click",speedboostOption:a})},speedboostModalClose:function(){b.methods.fireDtmEvent({eventType:"productBuilderSpeedboostModalClose",eventCategory:"Product-Builder",eventAction:"Click"})},voiceSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderVoiceSelection",eventCategory:"Product-Builder",eventAction:"Click",voicePlan:a})},voiceModalOpen:function(){b.methods.fireDtmEvent({eventType:"productBuilderVoiceModalOpen",eventCategory:"Product-Builder",eventAction:"Click"})},voiceModalSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderVoiceModalSelection",eventCategory:"Product-Builder",eventAction:"Click",voicePlan:a})},voiceModalClose:function(){b.methods.fireDtmEvent({eventType:"productBuilderVoiceModalClose",eventCategory:"Product-Builder",eventAction:"Click"})},phoneLineSelection:function(a){b.methods.fireDtmEvent({eventType:"productBuilderVoiceSelection",eventCategory:"Product-Builder",eventAction:"Click",planType:a})},phoneLineModalOpen:function(){b.methods.fireDtmEvent({eventType:"productBuilderPhoneLineModalOpen",eventCategory:"Product-Builder",eventAction:"Click"})},phoneLineModalClose:function(){b.methods.fireDtmEvent({eventType:"productBuilderPhoneLineModalClose",eventCategory:"Product-Builder",eventAction:"Click"})},applyPromoCodeSuccess:function(a){b.methods.fireDtmEvent({eventType:"productBuilderPromoCodeApply",eventCategory:"Product-Builder",eventAction:"Validate",promocodeValidation:a})},applyPromoCodeFail:function(a){b.methods.fireDtmEvent({eventType:"productBuilderPromoCodeApply",eventCategory:"Product-Builder",eventAction:"Validate",promocodeValidation:a})},applyStaffPromoDetails:function(){b.methods.fireDtmEvent({eventType:"productBuilderApplyStaffPromoDetails",eventCategory:"Product-Builder",eventAction:"Validate"})},cancelStaffPromoDetails:function(){b.methods.fireDtmEvent({eventType:"productBuilderCancelStaffPromoDetails",eventCategory:"Product-Builder",eventAction:"Validate"})}},liveagentChat:{toggleChatModal:function(a){b.methods.fireDtmEvent({eventType:"liveagentToggleChatModal",eventCategory:"liveagent-Chat",eventAction:"Click",eventLabel:"liveagent Toggle Chat Modal "+a})},chatFormInputChanged:function(a){b.methods.fireDtmEvent({eventType:"liveagentChatFormInputChange",eventCategory:"liveagent-Chat",eventAction:"Click",eventLabel:"liveagent Chat Form Input Change "+a})},toggleChatConnection:function(a){b.methods.fireDtmEvent({eventType:"liveagentToggleChatConnection",eventCategory:"liveagent-Chat",eventAction:"Click",eventLabel:"liveagent Toggle Chat Connection "+a})},chatPhoneButton:function(a){b.methods.fireDtmEvent({eventType:"liveagentChatPhoneButton",eventCategory:"liveagent-Chat",eventAction:"Click",eventLabel:"liveagent Toggle Chat Phone Button "+a})},returnToChat:function(){b.methods.fireDtmEvent({eventType:"liveagentChatReturnToChat",eventCategory:"liveagent-Chat",eventAction:"Click",eventLabel:"liveagent Return to Chat"})}},onlineMoves:{revertToStep:function(a){b.methods.fireDtmEvent({eventType:"moveRevertToStep",eventCategory:"Online-Moves",eventAction:"Click",eventLabel:"Move Revert To Step",stepFrom:a.stepFrom,stepTo:a.stepTo})},connectionDetails:function(a){b.methods.fireDtmEvent({eventType:"moveConnectionDetails",eventCategory:"Online-Moves",eventAction:"Click",eventLabel:"Move Connection Details",nbnAppointmentDate:a.nbnAppDate,nbnAppointmentTime:a.nbnAppTime,connectionDate:a.connDate,disconnectionDate:a.disconnDate})},deliveryDetails:function(a){b.methods.fireDtmEvent({eventType:"moveDeliveryDetails",eventCategory:"Online-Moves",eventAction:"Click",eventLabel:"Move Delivery Details",addressOption:a.addressOption,address:a.address})},acceptedCheckbox:function(a){b.methods.fireDtmEvent({eventType:a,eventCategory:"Online-Moves",eventAction:"Click",eventLabel:"Move Accepted Checkbox"})},submission:function(a){b.methods.fireDtmEvent({eventType:"moveSubmission",eventCategory:"Online-Moves",eventAction:"Click",eventLabel:"Move Submission",data:a})}},orderTracking:{display:function(a,c,d){b.methods.fireDtmEvent({eventType:"orderTrackingView",eventCategory:"Order-Tracking",eventAction:"Page View",virtualPage:"/virtual/order-tracking/order-tracking-status.html",eventLabel:"Order Tracking Status",orderData:c,success:a,errorCode:d})},clickToCloseModemCard:function(a,c){b.methods.fireDtmEvent({eventType:"orderTrackingModemDelivered",eventCategory:"Order-Tracking",eventAction:"Link Click",virtualPage:"/virtual/order-tracking/order-tracking-status.html",eventLabel:"Modem received",success:a,errorCode:c})},clickCallbackRequest:function(a,c,d){b.methods.fireDtmEvent({eventType:"orderTrackingCallbackRequest",eventCategory:"Order-Tracking",eventAction:"Button Click",virtualPage:"/virtual/order-tracking/order-tracking-status.html",eventLabel:"Request Call Back",requestData:c,success:a,errorCode:d}),"undefined"!=typeof ga&&ga("send","event","Order-Tracking","Button click","Request Call Back",{dimension34:"orderTrackingCallbackRequest"})},clickURL:function(a,c,d){a=a||"",d=d||"",b.methods.fireDtmEvent({eventType:a,eventCategory:"Order-Tracking",eventAction:"Link click",virtualPage:"/virtual/order-tracking/order-tracking-status.html",eventLabel:c,linkText:d})}}},methods:{fireDtmEvent:function(a){$(document).trigger("analytics-trackEvent",[a])}}}}()}(BELONG),function(){"use strict";var a,b,c,d,e,f,g,h,i;e=function(){return setTimeout(function(){g()},a)},f=function(){clearInterval(d)},g=function(){BELONG.genericInformationModal.openModal("agent-expiry-warning")},h=function(){var a=$.ajax({url:b,type:"GET",dataType:"text"});a.done(function(a){$(a).filter("#GlobalData").data("isAgent")?(f(),d=e()):window.location=c})},(i=function(){var f=$("#agent-expiry-warning");f.length&&(a=f.data("timeout"),b=f.data("status"),c=f.data("logout"),f.find(".btn").on("click",function(){h()}),d=e())})()}(),function(){BELONG.agents=BELONG.agents||{},$.extend(BELONG.agents,function(){var a;return{init:function(){return a=this,!!(BELONG.GD.isLoggedIn&&BELONG.GD.isAgent&&BELONG.GD.groups)&&(a.groups=BELONG.GD.groups.split(","),a.isOutboundAgent=a.methods.isOutboundAgent(),void(a.isOutboundAgent&&a.methods.showOutboundContent()))},methods:{isOutboundAgent:function(){var b=!1;return $.inArray("outbound",a.groups)>-1&&(b=!0),b},showOutboundContent:function(){var b=$(".outbound-agents-only"),c=$(".non-outbound-agents-only");a.isOutboundAgent&&b&&b.show(),!a.isOutboundAgent&&c&&c.show(),$(".content-container").addClass("-outbound-agent"),$.trim($(".outbound-agents-only").text())||$(".notification-banner.outbound-agents-only").hide()}}}}())}(),function(a){a.analytics=function(){var b;return{init:function(){b=this,$("a#header-logo, a#footer-logo").click(function(c){c.preventDefault();var d=this.href,e=this.id,f="Link click",g="Logo";a.adobeAnalytics.events.logoLinkClick(this.id),b.methods.linkClickWithPageReload(d,f,g,e)}),$("a#nav-adsl,a#nav-nbn,a#nav-join,a#nav-support,a#nav-login,a#nav-belong-here,a#nav-logout,a#nav-change-password,a#mobile-nav-adsl, a#mobile-nav-nbn, a#mobile-nav-join, a#mobile-nav-support, a#mobile-nav-login, a#mobile-nav-change-password, a#mobile-nav-logout").click(function(c){c.preventDefault();var d=this.href,e=$(this).text(),f="Link click",g="Header-Menu";a.adobeAnalytics.events.headerLinkClick($(this).text()),0!==$("#mdl-sq").length&&"nav-join"===$(this).attr("id")?b.methods.linkClickWithNonPageReload(f,g,e):b.methods.linkClickWithPageReload(d,f,g,e)}),$("a#header-call").click(function(c){var d="Call",e="Link click",f="OAHP-Click-To-Call";a.adobeAnalytics.events.callLinkClick(),b.methods.linkClickWithNonPageReload(e,f,d)}),$(".button-list span.button-text").click(function(c){c.preventDefault();
var d="What's available in your area?",e="Link click",f="OAHP-Button-Bar";a.adobeAnalytics.events.buttonBarLinkClick(),b.methods.linkClickWithNonPageReload(e,f,d)}),$("a#link-home-adsl, a#link-home-nbn").click(function(c){c.preventDefault();var d=this.href,e=$(this).text(),f="Link click",g="OAHP-Button-Bar";a.adobeAnalytics.events.buttonBarLinkClick($(this).text()),b.methods.linkClickWithPageReload(d,f,g,e)}),$("a#home-left-cta-btn, a#home-right-cta-btn").click(function(c){c.preventDefault();var d=this.href,e=$(this).text(),f="Link click",g="OAHP-Bottom-Content";a.adobeAnalytics.events.bottomContentLinkClick($(this).text()),b.methods.linkClickWithPageReload(d,f,g,e)}),$("#carousel .slide a").click(function(c){c.preventDefault();var d=this.href,e=d,f="OAHP-Carousel",g="Link click";a.adobeAnalytics.events.carouselLinkClick(this.href),b.methods.linkClickWithPageReload(d,g,f,e)}),$("a#cis-bundle-large,a#cis-bundle-regular,a#cis-nbn-large,a#cis-nbn-regular").click(function(c){var d=(this.href,this.id),e="Product-List-CIS",f="Link click";a.adobeAnalytics.events.productListCisLinkClick(this.id),b.methods.linkClickWithNonPageReload(f,e,d)}),$("a#nbn-regular,a#nbn-large,a#bundle-large,a#bundle-regular").click(function(c){c.preventDefault();var d=$(this).text();if("Choose"==d){var e=this.href,f=this.id,g="Product-List-Choose",h="Link click";a.adobeAnalytics.events.productListChooseLinkClick(this.id),b.methods.linkClickWithPageReload(e,h,g,f)}}),$(".feature-list a").click(function(c){var d=$(this).text(),e="Product-Feature-List",f="Link click";a.adobeAnalytics.events.featureListLinkClick($(this).text()),b.methods.linkClickWithNonPageReload(f,e,d)}),$("a#adsl-churn-reset,a#nbn-reset,a#adsl-new-reset").click(function(c){var d=this.id,e="SQ-Try-Another-Addr",f="Link click";a.adobeAnalytics.events.tryAnotherAddressLinkClick(this.id),b.methods.linkClickWithNonPageReload(f,e,d)}),$(".accordian-container .expand-btn").click(function(c){var d=$(this);$thisParent=d.closest("li");var e=$(this).siblings(".headline").text();if($thisParent.hasClass("active")){var f=e,g="Product-Accordion",h="Link click";a.adobeAnalytics.events.productAccordianLinkClick($(this).siblings(".headline").text()),b.methods.linkClickWithNonPageReload(h,g,f)}}),$(".campaign-header .campaign-header__cta a").click(function(c){var d=$(this).text(),e=d,f="Campaign-Header",g="click";a.adobeAnalytics.events.campaignHeaderCtaLinkClick(g,f,e,""),b.methods.linkClickWithNonPageReload(g,f,e)}),$(".steps-cta .steps-cta__steps-item a").click(function(c){c.preventDefault();var d=$(this).attr("href"),e=($(this).text(),d),f="Steps-CTA",g="click";a.adobeAnalytics.events.stepsCtaLinkClick(g,f,e),b.methods.linkClickWithPageReload(d,g,f,e)}),$(".campaign-carousel .campaign-carousel__cta a").click(function(c){var d=$(this).attr("href"),e=$(this).text(),f="",g="Campaign-Carousel",h="",i=$(this).data("cta-type");"primary"==i?(f=e,h="click",a.adobeAnalytics.events.campaignHeaderCtaLinkClick(h,g,f,""),b.methods.linkClickWithNonPageReload(h,g,f)):(c.preventDefault(),f=d,h="link click",a.adobeAnalytics.events.campaignHeaderCtaLinkClick(h,g,f,d),b.methods.linkClickWithPageReload(d,h,g,f))}),$(".about-us-panel .tab-panel__tab a").click(function(c){var d=$(this).text(),e=d,f="About-Us",g="click";a.adobeAnalytics.events.aboutUsTabClick(g,f,e),b.methods.linkClickWithNonPageReload(g,f,e)});var c;c=$(".product-feature-belong-voice"),0==c.length&&(c=$(".productFeatureBelongVoice")),d=c.find(".expandcollapse a");var d;d.click(function(c){var d=$(this);if($thisParent=d.closest(".expandcollapse"),$thisParent.hasClass("is-collapsed")){var e=$(".sq-container").data("sq-type");e=e.toUpperCase();var f="product-feature-belong-voice",g="Product Feature Belong Voice expand - "+e,h="Expand";a.adobeAnalytics.events.productFeatureBelongVoiceExpand(e),b.methods.linkClickWithNonPageReload(h,f,g)}}),$(".tooltip-btn button").click(function(c){if($("#join-product-form").hasClass("join-product-form")){var d=$(this);$thisParent=d.closest("span.tooltip-btn");var e=$thisParent.closest("label").attr("id");if($thisParent.hasClass("is-active")){var f=e.replace("rdo-","Join-Product-"),g="Tooltip",h="Link click";a.adobeAnalytics.events.productAccordianLinkClick($thisParent.closest("label").attr("id").replace("rdo-","Join-Product-")),b.methods.linkClickWithNonPageReload(h,g,f)}}else if($("#main").hasClass("product-page")){var d=$(this);$thisParent=d.closest("span.tooltip-btn");var e=$thisParent.siblings("h4").text();if($thisParent.hasClass("is-active")){var f="Product-List-"+e,g="Tooltip",h="Link click";a.adobeAnalytics.events.productAccordianLinkClick("Product-List-"+$thisParent.siblings("h4").text()),b.methods.linkClickWithNonPageReload(h,g,f)}}}),$(".footer a.facebook, .footer a.twitter").click(function(c){var d=this.href,e=this.target,f=$(this).text(),g="Outbound link click",h="Footer-Social";a.adobeAnalytics.events.footerSocialLinkClick($(this).text()),b.methods.linkClickWithPageReload(d,g,h,f,e)}),$(".footer .links a").click(function(c){c.preventDefault();var d=this.href,e="Link click",f=$(this).text(),g="Footer-Menu";a.adobeAnalytics.events.footerMenuLinkClick($(this).text()),b.methods.linkClickWithPageReload(d,e,g,f)})},methods:{getTodayDate:function(){var a=new Date,b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();return b<10&&(b="0"+b),c<10&&(c="0"+c),a=b+"/"+c+"/"+d},getNumberOfDaysBetweenTwoDates:function(a,b){var c=864e5,d=a.split("/"),e=new Date(d[2],parseInt(d[1])-1,d[0]),f=Date.parse(e),g=b.split("/"),h=new Date(g[2],parseInt(g[1])-1,g[0]),i=Date.parse(h),j=i-f,k=Math.round(j/c);return k},getRangeOfDaysBetweenTwoDates:function(a){var b;return b=a>=1&&a<=3?"1-3":a>=4&&a<=6?"4-6":a>=7?"7+":"0"},privateBrowsing:function(a){"undefined"!=typeof ga&&(ga("send","event","Private-Browsing","Click",a.toUpperCase()+"-Private Browsing"),ga("send","pageview","/virtual/private-browsing/"+a+"-private-browsing.html"))},autoPaymentPrompt:{PayNowRedirect:function(a,c){var d="Link click",e="Auto-Payment";b.methods.linkClickWithPageReload(a,d,e,c)}},sq:{sqCheck:function(a,b){"undefined"!=typeof ga&&(ga("send","event","SQ-Check","Click",a.toUpperCase()+"-Check if you can Belong-"+b),ga("send","pageview","/virtual/sq-check/"+a+"-check-if-you-can-belong-"+b+".html"))},sqSuccess:function(a,b,c){"undefined"!=typeof ga&&(ga("send","event","SQ-Success","Click",a+"-"+c+"-Check if you can Belong",{dimension6:b}),ga("send","pageview","/virtual/sq-success/"+a+"-"+c+"-check-if-you-can-belong.html",{dimension6:b}))},landlineOption:function(a,b){"undefined"!=typeof ga&&(ga("send","event","Landline","Click",a+"-"+b),ga("send","pageview","/virtual/landline/"+a+"-"+b.toLowerCase()+".html"))},selectAddress:function(a){"undefined"!=typeof ga&&(ga("send","event","SQ-Select-Address","Select","Please select an address-"+a),ga("send","pageview","/virtual/sq/please-select-an-address.html"))},findOutMoreOrJoinNow:function(a,b,c,d){"undefined"!=typeof ga?ga("send","pageview","/virtual/"+c.toLowerCase()+"/"+b+"-"+c.toLowerCase()+".html",ga("send","event",c,"Link click",b+"-"+c,{dimension6:d,hitCallback:function(){window.location.href=a}})):window.location.href=a}},sqFailures:{validationMessages:function(a,b){"undefined"!=typeof ga&&(ga("send","event","SQ-Validation","Click",a+" - "+b),ga("send","pageview","/virtual/sq-validation/"+b+"-"+b+".html"))},failureMessages:function(a,b,c){"undefined"!=typeof ga&&(ga("send","event","SQ-Failure","Click",b+"-"+c+"-"+a),ga("send","pageview","/virtual/sq-failure/"+b+"-"+c+"-"+a+".html"))},experionError:function(a){"undefined"!=typeof ga&&(ga("send","event","Experion-Error","Click",a+"-Experion error"),ga("send","pageview","/virtual/experion-error/"+a+"-experion-error.html"))}},eoi:{eoiForm:function(a,b){"undefined"!=typeof ga&&(ga("send","event","EOI","Click",a+"-"+b),ga("send","pageview","/virtual/eoi/"+a+"-"+b+".html"))},tryAgain:function(){"undefined"!=typeof ga&&(ga("send","event","EOI","Click","Try again"),ga("send","pageview","/virtual/eoi/try-again.html"))},keepMeInformed:function(a){"undefined"!=typeof ga&&(ga("send","event","EOI","Click",a+"-Keep me informed"),ga("send","pageview","/virtual/eoi/"+a+"-keep-me-informed.html"))},contactMe:function(a){"undefined"!=typeof ga&&(ga("send","event","EOI","Click",a+"-Contact me"),ga("send","pageview","/virtual/eoi/"+a+"contact-me.html"))},letMeKnow:function(a){"undefined"!=typeof ga&&(ga("send","event","EOI","Click",a+"-Let me know"),ga("send","pageview","/virtual/eoi/"+a+"let-me-know.html"))}},faq:{productFaq:function(a,b){"undefined"!=typeof ga&&ga("send","event","productFAQ","Click","Product-Faq",{dimension31:b+" - "+a})}},join:{productSelection:function(a){"undefined"!=typeof ga&&(ga("send","event","Product","Click","Join-Product",{dimension16:a}),ga("send","pageview","/virtual/product/join-product",{dimension16:a}))},productPreSelection:function(a){"undefined"!=typeof ga&&(ga("send","event","Product","PreSelected","Join-Product",{dimension16:a}),ga("send","pageview","/virtual/product/preselected-join-product",{dimension16:a}))},addSpeedBoost25:function(){"undefined"!=typeof ga&&(ga("send","event","SpeedBoost-Add","Click","Join-SB-25"),ga("send","pageview","/virtual/speedboost-add/join-sb-25.html"))},addSpeedBoost100:function(){"undefined"!=typeof ga&&(ga("send","event","SpeedBoost-Add","Click","Join-SB-100"),ga("send","pageview","/virtual/speedboost-add/join-sb-100.html"))},addVoice:function(a){"undefined"!=typeof ga&&(ga("send","event","Voice-Add","Click","Join-Voice-"+a),ga("send","pageview","/virtual/voice-add/join-voice-"+a+".html"))},checkContract:function(){"undefined"!=typeof ga&&(ga("send","event","Contract","Click","Join-Contract"),ga("send","pageview","/virtual/contract/join-contract.html"))},promoApplied:function(a){"undefined"!=typeof ga&&(ga("send","event","Promo","Click","Apply",{dimension14:a}),ga("send","pageview","/virtual/Promo/apply",{dimension14:a}))},promoAppliedStaffDiscount:function(a){"undefined"!=typeof ga&&(ga("send","event","Staff Promo","Click","Continue",{dimension14:a}),ga("send","pageview","/virtual/staff-promo/continue",{dimension14:a}))},joinSteps:function(a,b,c){"undefined"!=typeof ga&&(ga("send","event","Join","Click",a,{dimension16:c}),ga("send","pageview","/virtual/join/"+b,{dimension16:c}))},confirmYourOrder:function(a,c,d,e,f,g,h,i,j,k,l){var m=b.methods.getTodayDate();"undefined"!=typeof ga&&(ga("send","event","Join","Click","4 - Confirm your Order",{dimension6:c,dimension13:d,dimension14:e,dimension16:g+"-"+f,dimension17:h,dimension18:i,dimension19:m,dimension20:j,dimension22:a,dimension12:k,dimension28:l}),ga("send","pageview","/virtual/join/4-confirm-your-order.html",{dimension6:c,dimension13:d,dimension14:e,dimension16:g+"-"+f,dimension17:h,dimension18:i,dimension19:m,dimension20:j,dimension22:a,dimension12:k,dimension28:l}))},feedback:function(){"undefined"!=typeof ga&&(ga("send","event","Join","Click","5 - Feedback "),ga("send","pageview","/virtual/join/5-feedback.html"))}},joinErrors:{errorEmail:function(a,b){"undefined"!=typeof ga&&(ga("send","event","Join: Email Error","Click",a+" - "+b),ga("send","pageview","/virtual/join-confirm-email-error/"+a+"-"+b+".html"))},errorPersonalDetails:function(a){"undefined"!=typeof ga&&(ga("send","event","Join: Personal Details Error","Click",a),ga("send","pageview","/virtual/join-personal-details-error/"+a+".html"))},errorPayment:function(a){"undefined"!=typeof ga&&(ga("send","event","Join: Payment Error","Click",a),ga("send","pageview","/virtual/join-payment-error/"+a+".html"))},errorOrder:function(a){"undefined"!=typeof ga&&(ga("send","event","Join: Order Error","Click",a),ga("send","pageview","/virtual/join-order-error/"+a+".html"))},errorProductSelection:function(a){"undefined"!=typeof ga&&(ga("send","event","Join: Product Selection Error","Click",a),ga("send","pageview","/virtual/join-product-selection-error/"+a+".html"))}},linkClickWithPageReload:function(a,b,c,d,e){var f=d.trim();"undefined"!=typeof ga?ga("send","event",c,b,d,ga("send","pageview","/virtual/"+c.toLowerCase()+"/"+f.toLowerCase()+".html",{hitCallback:function(){e||(document.location=a)}})):e||(document.location=a)},linkClickWithNonPageReload:function(a,b,c,d){"undefined"!=typeof ga&&(d=d||!1,ga("send",{hitType:"event",eventCategory:b,eventAction:a,eventLabel:c,nonInteraction:d}))},agent:{backToMe:function(){"undefined"!=typeof ga&&ga("send","event","Agent","Click","Change back to me")},mobo:function(){"undefined"!=typeof ga&&ga("send","event","Agent","Click","Select and log in",{dimension7:"Agent"})}}}}}()}(BELONG),function(a){a.authenticate=function(){var a,b,c,d;return{init:function(){a=this,b=$(".logout-link.icon-btn"),c=$("#GlobalData"),d=c.data("isLoggedIn"),d?"belong here log in"===$(".icon-btn.login").text().toLowerCase()&&$(".icon-btn.login").text("Belong Here"):$(".logout-link").addClass("hidden"),b.on("click",function(b){b.preventDefault(),a.methods.logout(function(a){window.location.href=window.location.protocol+"//"+window.location.host+"/am/UI/Logout"})})},methods:{login:function(a,b,c,d,e){return d=d||function(){},e=e||function(){},$.ajax({url:"/am/UI/Login",type:"POST",data:"IDToken1="+encodeURIComponent(a)+"&IDToken2="+encodeURIComponent(b)+"&IDButton=Log+In&goto="+Base64.encode(c)+"&gotoOnFail=&SunQueryParamsString=cmVhbG09L0V4dGVybmFsJg%3D%3D&encoded=true&gx_charset=UTF-8",dataType:"html",success:d,error:e})},logout:function(a,b){return a=a||function(){},b=b||function(){},$.ajax({url:window.location.protocol+"//"+window.location.host+"/apps/logout",type:"GET",dataType:"html",success:a,error:b})}}}}()}(BELONG),function(a){"use strict";a.belongModal=function(){return{setupAutoResize:function(b){function c(a,b){clearTimeout(a._tId),a._tId=setTimeout(function(){a.call(b)},100)}function d(){return(e.data("winheight")!==$(window).height()||e.data("winwidth")!==$(window).width())&&(e.data("winheight",$(window).height()),e.data("winwidth",$(window).width()),a.belongModal.setHeights(b),"mdl-sq"==e.attr("id")&&e.find(".belong-modal__footer").is(":visible")?$(".sqContainer").css("height",e.data("winheight")-e.find(".belong-modal__footer").height("").innerHeight()-e.find(".belong-modal__header").height("").innerHeight()):"mdl-sq"!=e.attr("id")||e.find(".belong-modal__footer").is(":visible")||$(".sqContainer").css("height",e.data("winheight")-e.find(".belong-modal__header").height("").innerHeight()),void 0)}b.animateResize=b.animateResize||!1,b.noShadow=b.noShadow||!1,b.nameSpace=b.nameSpace||"modalAutoResize";var e=b.modalContainer;e.data("winheight",$(window).height()),e.data("winwidth",$(window).width()),$(window).off("resize."+b.nameSpace).on("resize."+b.nameSpace,function(){c(d,window)}),$(window).off("orientationchange").on("orientationchange",function(c){e.data("winheight",$(window).height()),e.data("winwidth",$(window).width()),a.belongModal.setHeights(b),"mdl-sq"==e.attr("id")&&e.find(".belong-modal__footer").is(":visible")?$(".sqContainer").css("height",e.find(".belong-modal__body").innerHeight()-e.find(".belong-modal__footer").height("").innerHeight()):"mdl-sq"!=e.attr("id")||e.find(".belong-modal__footer").is(":visible")||$(".sqContainer").css("height",e.find(".belong-modal__body").innerHeight())}),a.belongModal.setHeights(b)},setHeights:function(b){var c=b.modalContainer,d=c.find(".belong-modal__header").height("").innerHeight(),e=c.find(".belong-modal__body").innerHeight(),f=c.find(".belong-modal__footer").height("").innerHeight(),g=0,h=0,i=0;c.find(".belong-modal__body").height(""),g=a.belongModal.calculateModalHeight(c.height("").innerHeight()),i=g-d-f,"mdl-sq"==c.attr("id")&&$("#sq-form").is(":visible")?i=c.data("winheight")-d:($("#structured-address-form").is(":visible")||$("#eoi-form").is(":visible"))&&(i=c.data("winheight")-c.find(".belong-modal__footer").height("").innerHeight()-c.find(".belong-modal__header").height("").innerHeight()),b.animateResize?(c.find(".belong-modal__body").height(e),c.find(".belong-modal__body").velocity({height:i},{duration:200})):c.find(".belong-modal__body").height(i),c.find(".belong-modal__body").children().each(function(){h+=$(this).innerHeight()}),h>i&&!b.noShadow?c.find(".belong-modal__body").addClass("belong-modal__body--scroll"):c.find(".belong-modal__body").removeClass("belong-modal__body--scroll")},calculateModalHeight:function(a){return $(window).height()>900&&$(window).height()<a?850:$(window).height()<a?$(window).width()<640?$(window).height():$(window).height()-50:a}}}()}(BELONG),function(a){"use strict";a.belongTabPanel=function(a,b){function c(a){var b=$("#"+g+" .tab-panel__panel.tab-panel__panel--active");b.addClass("hidden").removeClass("tab-panel__panel--active"),0!==a&&$("#"+g+' [data-panel-id="'+a+'"]').removeClass("hidden").addClass("tab-panel__panel--active")}function d(a){var b=$("#"+g+" .tab-panel__panel"),c=$("#"+g+" .tab-panel__panels");1===a?(c.removeClass("tab-panel__panels---top-left-radius"),c.addClass("tab-panel__panels---top-right-radius")):a===b.length?(c.removeClass("tab-panel__panels---top-right-radius"),c.addClass("tab-panel__panels---top-left-radius")):(c.addClass("tab-panel__panels---top-left-radius"),c.addClass("tab-panel__panels---top-right-radius"))}function e(){var a=i.outerWidth(),b=j.outerWidth();if(!(0!==k&&k>=a))if(b>a)$("#"+g).addClass("tab-panel--small"),$("#"+g).removeClass("tab-panel--large"),f.setActiveTab(0),k=a;else{$("#"+g).addClass("tab-panel--large"),$("#"+g).removeClass("tab-panel--small"),k=0;var c=$("#"+g+" .tab-panel__panel.tab-panel__panel--active");0===c.length&&f.setActiveTab(1)}}var f=this,g=a,h=!1;"undefined"!=typeof b&&(h=b),f.selectedContract=ko.observable().subscribeTo("selectedContract",!0),f.promoCode=ko.observable().subscribeTo("promoCode",!0),f.promoCodeApplied=ko.observable().subscribeTo("isPromoApplied",!0),f.appliedPromo=ko.computed(function(){if(f.promoCodeApplied())return f.promoCode()}),f.showNdc=ko.observable().subscribeTo("showNdc",!0),f.showNdc.subscribe(function(a){var b=f.selectedContract().option;if(a===!1)switch(b){case"TWELVE_MONTHS":f.setActiveTab(1);break;case"MONTH_BY_MONTH":f.setActiveTab(2)}else switch(b){case"TWELVE_MONTHS":f.setActiveTab(4);break;case"MONTH_BY_MONTH":f.setActiveTab(5)}}),f.isSmallView=function(){return $("#"+g).hasClass("tab-panel--small")},f.isLargeView=function(){return $("#"+g).hasClass("tab-panel--large")},f.setActiveTab=function(a){var b=$("#"+g+' .tab-panel__tab[data-tab-id="'+a+'"]'),e=a;if(!f.isLargeView()||!b.hasClass("tab-panel__tab--active"))return f.isSmallView()&&b.hasClass("tab-panel__tab--active")&&(e=0),c(e),$("#"+g+" .tab-panel__tab").removeClass("tab-panel__tab--active"),0!==e&&b.addClass("tab-panel__tab--active"),d(a),!1};var i=$("#"+g+" .tab-panel__panels"),j=$("#"+g+" .tab-panel__tabs"),k=0;!function(){f.showNdc()?f.setActiveTab(4):f.setActiveTab(1),d(1),h===!1&&(f.setActiveTab(0),e(),$(window).resize(function(){e()}))}()}}(BELONG),function(a){"use strict";a.buttons=function(){var a;return{init:function(){a=this},disableButton:function(a){var b={success:!1,alreadyDisabled:!1},c=a.attr("disabled");return"undefined"!=typeof c?(b.alreadyDisabled=!0,b.success=!0,b):(a.attr("disabled","disabled"),a.addClass("button-disabled"),b.alreadyDisabled=!1,b.success=!0,b)},enableButton:function(a){return a.removeAttr("disabled"),a.removeClass("button-disabled"),!0}}}()}(BELONG),function(a){"use strict";a.collapsibles=function(){var a,b=$(".collapsible-container");return{init:function(){a=this,b.find(".collapsible-icon").off("click.collapsibles").on("click.collapsibles",a.events.clickEvent)},methods:{toggleCollapsibleContainer:function(a,b){"undefined"==typeof b||null==b||""==b?a.toggleClass("collapsed"):"expand"==b.toLowerCase()?a.removeClass("collapsed"):"collapse"==b.toLowerCase()?a.addClass("collapsed"):a.toggleClass("collapsed");var c=a.find(".collapsible-icon > span");2===c.length&&c.toggleClass("hidden");var d=a.find(".collapsible-readonly-title > span");2===d.length&&d.toggleClass("hidden")}},events:{clickEvent:function(b){var c=$(this).closest(".collapsible-container");a.methods.toggleCollapsibleContainer(c),b.preventDefault()}}}}()}(BELONG),function(a){var b=function(){ko.bindingHandlers.fadeVisible={init:function(a,b){var c=b();$(a).toggle(ko.unwrap(c))},update:function(a,b){var c=b();ko.unwrap(c)?$(a).velocity({opacity:1,translateZ:0,translateY:0},{display:"block"}):$(a).velocity({opacity:0,translateZ:0,translateY:"10px"},{display:"none"})}},ko.bindingHandlers.logger={update:function(a,b,c){var d=ko.utils.domData.get(a,"_ko_logger")||0;ko.toJS(b()||c());ko.utils.domData.set(a,"_ko_logger",++d),window.console&&console.log}},ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.stopBinding=!0,ko.extenders.trimAndUppercase=function(a,b){return a.subscribe(function(b){a(b.trim().toUpperCase())}),a}};a.koCustomBindings={init:b}}(BELONG),function(a){var b=function(){ko.validation.rules.mustEqual={validator:function(a,b){return a===b},message:"The field must equal {0}"},ko.validation.rules.australianMobileNumber={cleanValue:function(a){if(null==a)return"";var b=a.replace(/\s|-|\.|\(|\)|\,/g,"");return b},validator:function(a,b){var c=!1,d=this,e=d.cleanValue(a);return c="function"==typeof b?b():b,!c||(0==e.length||10==e.length&&/(^04\d{8}$)|(^610?4\d{8}$)|(^\+610?4\d{8}$)/.test(e))},message:"Please specify a valid mobile number"},ko.validation.rules.australianPhoneNumber={cleanValue:function(a){if(null==a)return"";var b=a.replace(/\s|-|\.|\(|\)|\,/g,"");return b},validator:function(a,b){var c=this,d=!1;if(d="function"==typeof b?b():b){var e=c.cleanValue(a);return 0==e.length||10==e.length&&/^\({0,1}((0)(2|3|7|8)){0,1}\){0,1}(\ |-){0,1}[0-9]{2}(\ |-){0,1}[0-9]{2}(\ |-){0,1}[0-9]{1}(\ |-){0,1}[0-9]{3}$/.test(e)}return!0},message:"Please specify a valid phone number"},ko.validation.registerExtenders()};a.koCustomValidation={init:b}}(BELONG),function(a){"use strict";a.mobo=function(){var b,c,d,e,f;return{init:function(){if(b=this,!a.GD.isLoggedIn||!a.GD.isAgent)return!1;if(c=$("#mobo-change-back-to-me"),d=$("#mobo-impersonate"),e=$("#mobo-header"),f=e.data("interactionType"),e.removeClass("hidden"),$("#main").css("padding-top",80),$(".desktop-call").addClass("hidden"),a.GD.isMobo)switch(b.methods.enableMobo(),f){case"agent-only":b.methods.disablePage();break;case"customer-only":case"all":b.methods.enablePage()}else switch(b.methods.disableMobo(),f){case"customer-only":b.methods.disablePage();break;case"agent-only":case"all":b.methods.enablePage()}b.methods.validateMobo(),d.off("click.impersonate").on("click.impersonate",b.events.impersonate),c.off("click.backToMe").on("click.backToMe",b.events.backToMe)},methods:{disablePage:function(){$("#mobo-header .mobo-disable-overlay").removeClass("hidden")},enablePage:function(){$("#mobo-header .mobo-disable-overlay").addClass("hidden")},enableMobo:function(){$(".mobo-inactive").addClass("hidden"),$(".mobo-active").removeClass("hidden"),$(".mobo-active .customer-name").text(a.GD.moboFirstname+" "+a.GD.moboLastname)},disableMobo:function(){$(".mobo-active").addClass("hidden"),$(".mobo-inactive").removeClass("hidden")},grantPermissions:function(a,b,c,d){return c=c||function(){},d=d||function(){},$.ajax({url:"/apps/userImpersonate/?agentUser="+a+"&customerUser="+b,type:"GET",dataType:"html",success:c,error:d})},validateMobo:function(){$("#mobo").length&&(a.moboValidator=a.validation.setupFormValidation("mobo",$("#mobo"),{rules:{"mobo-email-address":{required:!0,backendEmail:!0,disallowedCharacters:!0,maxlength:255}}}),a.moboValidator.resetForm())}},events:{impersonate:function(c){c.preventDefault();var d=$("#mobo-email-address").val(),e=a.GD.loginEmail;return!!a.validation.validateForm(a.moboValidator)&&(a.validation.resetCustomMessages(),void b.methods.grantPermissions(e,d,function(b,c,e){""!==b&&401!==parseFloat(b)?window.location.reload():a.validation.attachCustomMessage("mobo-email-address","The user "+d+" cannot be managed as the email is not recognised.","error",!0)},function(b){a.validation.attachCustomMessage("mobo-email-address","The user "+d+" cannot be managed as the email is not recognised.","error",!0)}))},backToMe:function(b){b.preventDefault(),$.ajax({url:"?mobo=-",type:"GET",dataType:"html",success:function(b){location.reload(),a.adobeAnalytics.global.agent.backToMe(),a.analytics.methods.agent.backToMe()},error:function(a){}})}}}}()}(BELONG),function(a){"use strict";a.modalAnalytics=function(){return new function(){function a(){window.jsHelpers=window.jsHelpers||{},window.jsHelpers.trackElementScrolling=function(a){var b=!1,c=0,d=$(a.scrollableElementSelector);if(0==d.length)return void(a.notFound&&a.notFound());var e,f=d[0].scrollHeight;e=f;var g=d.innerHeight();a.initialised&&a.initialised({containerHeight:g,scrollHeight:f}),d.scroll(function(){var h=$(this),i=h.scrollTop(),j=i+g;j>c&&(c=j),f=d[0].scrollHeight,i+g>=f?(a.bottomReached&&a.bottomReached({containerHeight:g,initialScrollHeight:e,scrollHeight:f,maxScrollBottomPositionReached:c}),b=!0):a.scroll&&a.scroll({containerHeight:g,initialScrollHeight:e,scrollHeight:f,scrollTop:i,scrollBottom:j,maxScrollBottomPositionReached:c,bottomReached:b})})}}function b(a){var b={scrollableElementSelector:a,initialised:function(a){o=a.scrollHeight,p=a.containerHeight},scroll:function(a){o=a.scrollHeight,m=a.maxScrollBottomPositionReached},bottomReached:function(a){n=!0}};window.jsHelpers.trackElementScrolling(b)}function c(){g&&g.off("click.analytics"),h&&h.off("click.analytics"),i&&i.off("click.analytics")}function d(){g=$(".mfp-close"),g.on("click.analytics",function(a){""!=l.closeMethod&&"modal"!=l.closeMethod||(l.closeMethod="close")}),h=$("#"+l.activeModalID).not(".mfp-close"),h.on("click.analytics",function(a){"close"!=l.closeMethod&&""==l.closeMethod&&(l.closeMethod="modal")}),i=$(".mfp-container").not("#"+l.activeModalID+" *"),i.on("click.analytics",function(a){"close"!=l.closeMethod&&(""!=l.closeMethod&&"modal"!=l.closeMethod||(l.closeMethod="overlay"))})}function e(){j=(new Date).getTime();var a={eventType:"globalModalActivated",eventCategory:"Modal",eventAction:"Click",eventLabel:"Activate",virtualPage:"/virtual/modal/activate/"+l.activeModalID+".html",modalID:l.activeModalID};BELONG.adobeAnalytics.methods.fireDtmEvent(a)}function f(a){k=(new Date).getTime();var b={eventType:"globalModalClosed",eventCategory:"Modal",eventAction:"Click",eventLabel:"Close",virtualPage:"/virtual/modal/close/"+l.activeModalID+".html",modalID:l.activeModalID,modalOpenDurationMs:k-j,closeMethod:a,scrollAreaTotalHeight:o,scrollAreaContainerHeight:p,maxScrollBottomPositionReached:m,scrollBottomReached:n};BELONG.adobeAnalytics.methods.fireDtmEvent(b)}var g,h,i,j,k,l=this,m=0,n=!1,o=0,p=0;l.activeModalID,l.closeMethod,l.activate=function(c,f){if(!c)throw"modalAnalytics.activate(): modalID is required (ID of the modal to track).";this.closeMethod="",l.activeModalID=c,f||(f=".belong-modal__body"),a(),b(f),d(),e()},l.close=function(){o<=p&&0==n&&(n=!0),""==this.closeMethod&&(this.closeMethod="generic"),f(l.closeMethod),c(),l.activeModalID="",l.closeMethod=""},l.ctaClicked=function(a){a=a?"cta-"+a:"cta",l.closeMethod=a}}}()}(BELONG),function(){"use strict";BELONG.handlePrivateBrowsingMode=BELONG.handlePrivateBrowsingMode||{},$.extend(BELONG.handlePrivateBrowsingMode,function(){return{init:function(){var a=this;a.methods.isPrivateBrowsingMode()},methods:{isPrivateBrowsingMode:function(){try{var a="test",b=window.localStorage;throw b.setItem(a,"1"),b.removeItem(a),new Error("error")}catch(a){BELONG.adobeAnalytics.global.privateBrowsing(BELONG.sqUtil.get.sourceType()),BELONG.analytics.methods.privateBrowsing(BELONG.sqUtil.get.sourceType())}}}}}())}(),function(a){"use strict"}(BELONG),function(a){"use strict";a.responsiveImages=function(){$("img.fn_responsive_image").each(function(){var a=$(this);enquire.register(DD.bp.get("1025"),{match:function(){a.attr("src",a.data("laptopBackground")).removeClass("mobile_img").removeClass("tablet_img").removeClass("desktop_img").addClass("laptop_img")}},!0),enquire.register(DD.bp.get("m","1024"),{match:function(){a.attr("src",a.data("tabletBackground")).removeClass("mobile_img").removeClass("desktop_img").removeClass("laptop_img").addClass("tablet_img"),0!==a.closest(".flexslider").length&&$(".flexslider .flex-viewport").css({height:a.height()})}}),enquire.register(DD.bp.get(0,"s"),{match:function(){a.attr("src",a.data("mobileBackground")).removeClass("tablet_img").removeClass("desktop_img").removeClass("laptop_img").addClass("mobile_img")}})})}}(BELONG),function(a){"use strict";a.responsiveTable=function(){var a=function(){$(".fn_responsive-table").each(function(a,b){var c,d,e,f,g,h,i,j=$(b);j.removeClass("fn_responsive-table"),c=$("<div></div>"),d=$('<div class="scrolltable"></div>').append(c).insertBefore(j),j.appendTo(c),c.prepend('<span class="shadow-before"></span>').append('<span class="shadow-after"></span>'),f=function(){var a=j.outerWidth()-c.outerWidth(),b=Math.floor(c.scrollLeft()/a*100);b<10?c.find(".shadow-before").css("margin-left",parseInt(10-b,10)*-1+"px"):c.find(".shadow-before").css("margin-left",0),b>90?c.find(".shadow-after").css("margin-left",parseInt(90-b,10)*-1+"px"):c.find(".shadow-after").css("margin-left",0)},g=function(){j.outerWidth()>c.outerWidth()?(d.addClass("has-scroll"),f(),c.on("scroll.responsiveTable",f)):(d.removeClass("has-scroll"),c.off("scroll.responsiveTable",f))},h=function(){var b,c,f=$("<ul />"),h=$('<div class="responsive-table-menu hidden"></div>'),i=$('<a href="#" class="responsive-table-menu-btn">Show/hide columns</a>'),k=$('<div class="responsive-table-menu-wrapper" />').append(i).append(h.append(f)),l=0;c=function(a){var b;return a?(b=a.split(" "),b=$.grep(b,function(a){return 0===a.indexOf("column-")}),b.join(" ")):""},j.find("thead th").each(function(b){var d=$(this),e=d.attr("id"),h=parseInt(d.attr("colspan"),10)||1,i=c(d.attr("class"));if(e||(e="table-"+a+"-col-"+b,d.attr("id",e)),j.find("tbody tr, tfoot tr").each(function(){var a=$(this).find("th, td").slice(l,l+h);a.attr("headers",e),i&&a.addClass(i)}),!d.hasClass("column-persist")){var k="table-"+a+"-toggle-col-"+b,m=$('<input type="checkbox" name="toggle-cols" id="'+k+'" value="'+e+'" />');f.append($("<li />").append(m).append('<label for="'+k+'">'+d.text()+"</label>")),m.change(function(){var a=m.val(),b=$("#"+a+", [headers="+a+"]");m.is(":checked")?b.removeClass("column-force-hide").addClass("column-force-show"):b.removeClass("column-force-show").addClass("column-force-hide"),g()}),m.bind("updateInputs.responsiveTable",function(){"table-cell"===d.css("display")?m.attr("checked",!0):m.attr("checked",!1)})}l+=h}),b=function(){$("body").off("click.responsiveTable touchstart.responsiveTable"),h.addClass("hidden")},i.on("click touchstart",function(a){a.preventDefault(),h.hasClass("hidden")?(h.removeClass("hidden"),$("body").on("click.responsiveTable touchstart.responsiveTable",function(a){0===k.find(a.target).length&&b()})):b()}),e=h.find("input"),d.before(k),j.addClass("responsive-table-column-toggling-initialised")},i=function(){e&&e.trigger("updateInputs.responsiveTable"),g()},j.hasClass("responsive-table-column-toggling")&&h(),$(window).on("resize.responsiveTable orientationchange.responsiveTable",$.throttle(100,i)),i()})};return{init:a}}()}(BELONG),function(a){"use strict";a.tooltip=function(){var a={disableHover:!0};$(".lt-ie9").length>0&&(a.speed=0),$("a.fn_tooltip").accessibleTooltip(a)}}(BELONG),function(a){"use strict";a.validation=function(){var b,c=[];return{init:function(){b=this,b.loadCommonMethods()},setupFormValidation:function(b,c,d){c[0]&&$.data(c[0],"validator",!1);var e={};if(e.rules={},e.messages={},e.debug=!1,1==d.hasOwnProperty("ignore")&&(e.ignore=d.ignore),1==d.hasOwnProperty("debug")&&(e.debug=d.debug),e.onkeyup=!1,1==d.hasOwnProperty("onkeyup")&&(e.onkeyup=d.onkeyup),e.focusCleanup=!1,1==d.hasOwnProperty("focusCleanup")&&(e.focusCleanup=d.focusCleanup),"function"==typeof d.errorPlacement&&(e.errorPlacement=d.errorPlacement),
e.focusInvalid=!0,1==d.hasOwnProperty("focusInvalid")&&(e.focusInvalid=d.focusInvalid),d.hasOwnProperty("rules")){for(var f in d.rules)e.rules[f]=d.rules[f];for(var g in e.rules){var h=e.rules[g];for(var i in h){var f=h[i],j=a.responseMessage.getValidationMessage("global",g,i),k=a.responseMessage.getValidationMessage(b,g,i);void 0==e.messages[g]&&(e.messages[g]={}),e.messages[g][i]=j,""!=k&&(e.messages[g][i]=k)}}}if(d.hasOwnProperty("messages"))for(var g in d.messages){var h=d.messages[g];for(var i in h)void 0!=e.messages[g]&&void 0!=e.messages[g][i]?e.messages[g][i]=h[i]:void 0!=e.messages[g]&&void 0==e.messages[g][i]?(e.messages[g]={},e.messages[g][i]=h[i]):(e.messages[g]={},e.messages[g][i]=h[i])}return c.validate(e)},validateForm:function(a){var b=a.form();return b},resetForm:function(a){if("undefined"!=typeof a){a.resetForm(),a.reset();var c=a.currentForm.id;b.removeValidatorErrorLabels(c)}},removeValidatorErrorLabels:function(a){if(""!=a){var b=$("#"+a+" label.error");b.remove()}},validateInput:function(a,b){var c=a.element(b);return c},attachCustomMessage:function(a,b,d,e){var f=$("#"+a),g=f.prop("name");if(0==a.length)throw"attachCustomMessage(): Element for ID '"+a+"' does not exist.";var h=c.length+1,i=!0;if("undefined"!=typeof e&&(i="false"!=e),"undefined"==typeof d&&(d="error"),"error"==d.toLowerCase()){f.addClass("error");var j=f.closest(".ctrl-holder");j.length>0&&j.addClass("error")}var k="";1!=i&&(k="hidden");var l=a+"-custom-message-"+h,m='<label class="custom-message '+d+" "+k+'" id="'+l+'" data-forElementID="'+a+'">'+b+"</label>",n=$('[data-forElementID="'+a+'"], label[for="'+g+'"].error');n.length>0?n.last().after(m):f.after(m);var o={id:h,hostElementID:a,messageDomID:l,typeClass:d};return c.push(o),o},removeCustomMessage:function(a,b){var d=a.messageDomID,e=$("#"+d);e.remove();var f=!0;if(f="undefined"==typeof b||0!=b,1==f){for(var g="",h="",i=0;i<c.length;i++){var j=c[i];j.id==a.id&&(g=a.typeClass,h=a.hostElementID,c.splice(i,1))}if("error"==g.toLowerCase()){var k=$("#"+h);k.removeClass("error");var l=k.closest(".ctrl-holder");l.length>0&&l.removeClass("error")}}},resetCustomMessages:function(){for(var a=0;a<=c.length-1;a++){var d=c[a];b.removeCustomMessage(d,!1)}c=[]},loadCommonMethods:function(){jQuery.validator.addMethod("badPassword",function(a){var b=["trustno1","password1","abcd1234"];return $.inArray(a.toLowerCase(),b)===-1},"For your security, we don't let you use common passwords (such as abcd1234)"),jQuery.validator.addMethod("disallowedCharacters",function(a){var b=/^[^<>+;\[\]\{\}\"]+$/i.test(a)||""===a;return b},"Looks like there may be a typo. This field cannot include some of those characters."),jQuery.validator.addMethod("backendEmail",function(a){return/^$|^.+@.+\..{2,4}$/.test(a)},"Looks like there may be a typo. This field can only include a valid email address."),jQuery.validator.addMethod("australianMobileNumber",function(a){if(""!==a){var c=b.helpers.validateAustralianMobileNumber(a);return c}return!0},"Please specify a valid mobile number"),jQuery.validator.addMethod("australianPhoneNumber",function(a){if(""!=a){var c=b.helpers.validateAustralianLandlineNumber(a);return c}return!0},"Looks like there's a typo in that phone number. Try again."),jQuery.validator.addMethod("australianMobileOrLandlineNumber",function(a){var c=!0;return""==a||(c=b.helpers.validateAustralianMobileNumber(a),0==c?c=b.helpers.validateAustralianLandlineNumber(a):c)},"Looks like there's a typo in that phone number. Try again."),jQuery.validator.addMethod("birthDateFormat",function(a){return/((\d{2})|(\d))\/((\d{2})|(\d))\/(\d{2})/.test(a)},"You've missed some of your date of birth information. Try again perhaps?"),jQuery.validator.addMethod("validAustralianDateString",function(b){var c=a.validation.helpers.isValidDate(b,"AU");return c},"It looks like you have not provided a valid date."),jQuery.validator.addMethod("exactlength",function(a,b,c){return c===-1||(this.optional(b)||a.length===c)},"Please enter exactly {0} characters."),jQuery.validator.addMethod("passwordComplexity",function(a){return/^(?=.*\d)(?=.*[a-zA-Z]).*$/.test(a)},"So it's as secure as possible, your password needs to have a mix of letters and numbers."),jQuery.validator.addMethod("notEqualToEmail",function(a,b,c){var d=$(c.emailAddressFieldID).val();return a!==d.substr(0,d.indexOf("@"))&&a!==d},"For your security, we don't let you use your email address as your password."),jQuery.validator.addMethod("overEighteen",function(a,b,c){var d,e,f=$(c.dobFieldID).val(),g=new Date(parseInt(f.substr(6,4),10),parseInt(f.substr(3,2),10)-1,parseInt(f.substr(0,2),10)),h=new Date;return d=h.getFullYear()-g.getFullYear(),e=h.getMonth()-g.getMonth(),(e<0||0===e&&h.getDate()<g.getDate())&&(d-=1),d>=18},"You must be at least 18 years old to join Belong."),jQuery.validator.addMethod("validID",function(a){return!!a.match(/^\d{6}$/)},"Please reenter your Customer ID."),jQuery.validator.addMethod("priceAmount",function(a){return!!a.match(/^[\d]+(\.\d{2})?$/i)},"That doesn't seem to be a valid amount. Please use numbers and decimals only."),jQuery.validator.addMethod("equalToCaseSensitive",function(a,b,c){return $(c.compareToFieldID).val().toString().toLowerCase()===a.toLowerCase()},"That doesn't match your entered email address."),jQuery.validator.addMethod("notEqual",function(a,b,c){return this.optional(b)||a!==c})},helpers:{cleanAustralianPhoneNumber:function(a){if(null==a)return"";var b=a.replace(/\s|-|\.|\(|\)|\,/g,"");return b},validateAustralianMobileNumber:function(a){var c=b.helpers.cleanAustralianPhoneNumber(a);return 10==c.length&&/(^04\d{8}$)|(^610?4\d{8}$)|(^\+610?4\d{8}$)/.test(c)},validateAustralianLandlineNumber:function(a){var c=b.helpers.cleanAustralianPhoneNumber(a);if(10!=c.length)return!1;var d=/^\({0,1}((0)(2|3|7|8)){0,1}\){0,1}(\ |-){0,1}[0-9]{2}(\ |-){0,1}[0-9]{2}(\ |-){0,1}[0-9]{1}(\ |-){0,1}[0-9]{3}$/.test(c);return d},isValidDate:function(a,b){var c=function(a,b,c){var d=new Date(a,b-1,c),e=d.getFullYear().toString()+(d.getMonth()+1).toString()+d.getDate().toString(),f=a.toString()+b.toString()+c.toString(),g=f==e;return g};"undefined"==typeof b||null===b||""===b?b="AU":"ISO"==b.toUpperCase()||(b="AU");var d,e,f,g,h,i;if("AU"==b){if(10!=a.length)return!1;var d=a.substr(0,2),f=a.substr(3,2),h=a.substr(6,4),e=parseInt(d),g=parseInt(f),i=parseInt(h)}else if("ISO"===b){if(10!=a.length)return!1;var h=a.substr(6,4),f=a.substr(3,2),d=a.substr(0,2),e=parseInt(d),g=parseInt(f),i=parseInt(h)}if(isNaN(e)||isNaN(g)||isNaN(i))return!1;var j=c(i,g,e);return j}},commonRules:{},commonMessages:{}}}()}(BELONG),function(a){a.koComponents=a.koComponents||{},a.koComponents.tileButtonSlider=function(){var a;return{init:function(){a=this,ko.components.register("tile-button-slider",{viewModel:a.viewModel,template:a.template})},template:'<div class="tile-button-slider">                    <ul class="slides" data-bind="foreach: items">                        <li>                            <a class="tile tile--small" data-bind="click: $parent.itemClicked, css: {\'tile--active\': active}">                                <div class="tile__month" data-bind="text: primaryLabel"></div>                                <div class="tile__year" data-bind="text: secondaryLabel"></div>                            </a>                        </li>                    </ul>                </div>',viewModel:function(a){var b=this;b.items=ko.observableArray([]),b.selectedItem=ko.observable(),b.tileClickCallback=a.tileClickCallback,b.isVisible=ko.observable(!1),b.init=function(a){$.each(a,function(a,c){c.active=ko.observable(!1),b.items.push(c),c.initSelected&&b.itemClicked(c)})},b.itemClicked=function(a){b.selectedItem()&&b.selectedItem().active(!1),a.active(!0),b.selectedItem(a),b.tileClickCallback(a)},b.applyFlexSlider=function(){var c=0,d=!1,e=!1;if(b.items().length>4&&(c=b.items().length-4,d=!0,e=!0),b.items().length){var f=$("#"+a.elementId+" .tile-button-slider");f.flexslider({itemWidth:60,itemMargin:10,minItems:2,maxItems:4,animation:"slide",animationSpeed:400,animationLoop:!1,controlNav:!1,move:1,slideshow:!1,prevText:"",nextText:"",startAt:0,touch:e,directionNav:d,start:function(){f.flexslider(c)}})}},a.bindingScopeCallback(b)}}}()}(BELONG),ko.templates["interaction-history-card"]='<div class="belong-card-container"><div class="b-card -short"><div class="b-card__title -bold"><h3 data-bind="text: type"></h3></div><div class="b-card__messages"><span data-bind="text: activityDate"></span><p data-bind="text: previewDescription"></p></div><div class="b-card__links-container"><a data-bind="click: $parent.showDetail">See more</a></div></div></div>',ko.templates["interaction-history"]='<div class="belong-cards" data-bind="template: { name: \'interaction-history-card\', foreach: interactionHistory }"></div><div class="error-overlay" style="display: none;" data-bind="visible: isError"><span class="svg-alert-grey"></span><h3>Server error</h3><p>Looks like something went wrong, please try again</p></div><div class="error-overlay" style="display: none;" data-bind="visible: isEmpty"><span class="svg-alert-grey"></span><h3>Coming soon!</h3><p>Check back here to see your SMS and email communications with Belong.</p></div><div class="interaction-history__loading" data-bind="visible: isLoading"><img src="/etc/designs/belong/assets/img/loader-on-grey.gif" alt="loading"></div><div class="interaction-history__load-more" data-bind="visible: isShowMore" style="display: none;"><a data-bind="click: showMoreActivities" class="btn -color-secondary-dark -text-medium">Show more</a></div><div id="detailModal" class="belong-modal generic-information-modal" data-bind="with: detailItem"><div class="belong-modal__header"><h2 data-bind="text: type"></h2></div><div class="belong-modal__body interaction-history__whitespace"><div class="belong-modal__section"><p><span data-bind="text: activityDate"></span></p><p data-bind="html: description"></p></div></div><div class="belong-modal__footer"><a href="#" class="btn -color-primary -text-medium belong-modal__continue-link">Close</a></div></div>';var globalAddressList,sqConfig;switch(window.BELONG=window.BELONG||{},BELONG.IS_RESPONSIVE=!0,BELONG.IS_EDIT=BELONG.IS_EDIT||!1,Array.prototype.indexOf=Array.prototype.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},window.location.host){case"localhost:5000":case"localhost:4567":case"localhost:4502":case"localhost:4503":case"localhost:3000":BELONG.DEVSWITCH=!0,BELONG.DEVDELAY=1;break;case"dev.belong.com.au":case"test.belong.com.au":case"test1.belong.com.au":case"test2.belong.com.au":case"staging.belong.com.au":window.location.href.indexOf("/fed/")!==-1?(BELONG.DEVSWITCH=!0,BELONG.DEVDELAY=500):(BELONG.DEVSWITCH=!1,BELONG.DEVDELAY=0,BELONG.URLS={});break;default:BELONG.DEVSWITCH=!1,BELONG.DEVDELAY=0,BELONG.URLS={}}"undefined"==typeof console&&(window.console={},console.log=console.error=console.info=console.debug=console.warn=console.trace=console.dir=console.dirxml=console.group=console.groupEnd=console.time=console.timeEnd=console.assert=console.profile=function(){}),function(a){"use strict";a.INIT={visual:function(){a.validation.init(),a.util.helpers(),a.tooltip(),a.sectionTitle.init(),a.product.init(),a.expandCollapse.init(),a.responsiveTable.init(),a.responsiveImages(),a.flexslider(),a.iconCarousel(),a.campaignCarousel(),a.headerNav.init(),a.mobo.init(),a.forms.simpleSelect(),a.forms.styledRadio(),a.forms.date.init(),a.navMobile.init(),a.collapsibles.init(),a.accordian(),a.faqAccordian(),a.advancedAccordion(),a.genericInformationModal.init(),a.targetMobileApp.init(),a.sqLauncher.init(),a.sqInjector.init(),a.agentTermsModal.init(),a.stickyFooter.init()},functional:function(){a.analytics.init(),a.handlePrivateBrowsingMode.init(),a.livePerson.init(),a.util.scrollPage(),a.DEVSWITCH,a.sqExecute.init(),a.sqModal.init(),a.forms.applyShiftLabel(),a.appleSmartBanner.init(),a.chatPopup.init()},pages:function(){a.unsubscribe.init(),a.join.init(),a.join.cisModal.init(),a.autoPaymentPrompt.init(),a.outageCheck.init(),a.onlineTroubleshooting.init(),a.manageService.init(),a.managePayment.init(),a.callbackForm.init(),a.leadGenerationForm.init(),a.leadGenModal.init(),a.feedbackForm.init(),a.personalDetails.init(),a.productBuilder.init(),a.onlineMoves.init(),a.aboutUs.init(),a.compareModule.init(),a.usage.init(),a.orderTracking.init(),a.accountLogin.init(),a.accountSetup.init(),a.offers.init(),a.interactionHistory.init()},queryStrings:function(){var b=a.util.loadPageVar("promocode");""!==b&&localStorage.setItem("promocode",b)}},a.init=function(){a.GD=$("#GlobalData").data(),a.adobeAnalytics.init(),a.adobeAnalytics.initDataLayer(),a.agents.init(),a.koCustomBindings.init(),a.koCustomValidation.init(),a.ajaxSetup(),a.datepickerSetup(),a.INIT.visual(),a.INIT.functional(),a.INIT.pages(),a.INIT.queryStrings(),a.triggerReady()},$(document).ready(function(){a.init()})}(BELONG);
